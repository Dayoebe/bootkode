import $a from"https://cdn.jsdelivr.net/npm/@editorjs/editorjs@latest";import ec from"https://cdn.jsdelivr.net/npm/@editorjs/header@latest";import tc from"https://cdn.jsdelivr.net/npm/@editorjs/list@latest";function nc(s,a){for(var l=0;l<a.length;l++){const h=a[l];if(typeof h!="string"&&!Array.isArray(h)){for(const g in h)if(g!=="default"&&!(g in s)){const d=Object.getOwnPropertyDescriptor(h,g);d&&Object.defineProperty(s,g,d.get?d:{enumerable:!0,get:()=>h[g]})}}}return Object.freeze(Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}))}var di=!1,gi=!1,hn=[],xi=-1;function rc(s){ic(s)}function ic(s){hn.includes(s)||hn.push(s),oc()}function sc(s){let a=hn.indexOf(s);a!==-1&&a>xi&&hn.splice(a,1)}function oc(){!gi&&!di&&(di=!0,queueMicrotask(ac))}function ac(){di=!1,gi=!0;for(let s=0;s<hn.length;s++)hn[s](),xi=s;hn.length=0,xi=-1,gi=!1}var Dn,pn,Rn,ro,wi=!0;function cc(s){wi=!1,s(),wi=!0}function lc(s){Dn=s.reactive,Rn=s.release,pn=a=>s.effect(a,{scheduler:l=>{wi?rc(l):l()}}),ro=s.raw}function ys(s){pn=s}function uc(s){let a=()=>{};return[h=>{let g=pn(h);return s._x_effects||(s._x_effects=new Set,s._x_runEffects=()=>{s._x_effects.forEach(d=>d())}),s._x_effects.add(g),a=()=>{g!==void 0&&(s._x_effects.delete(g),Rn(g))},g},()=>{a()}]}function io(s,a){let l=!0,h,g=pn(()=>{let d=s();JSON.stringify(d),l?h=d:queueMicrotask(()=>{a(d,h),h=d}),l=!1});return()=>Rn(g)}var so=[],oo=[],ao=[];function fc(s){ao.push(s)}function Di(s,a){typeof a=="function"?(s._x_cleanups||(s._x_cleanups=[]),s._x_cleanups.push(a)):(a=s,oo.push(a))}function co(s){so.push(s)}function lo(s,a,l){s._x_attributeCleanups||(s._x_attributeCleanups={}),s._x_attributeCleanups[a]||(s._x_attributeCleanups[a]=[]),s._x_attributeCleanups[a].push(l)}function uo(s,a){s._x_attributeCleanups&&Object.entries(s._x_attributeCleanups).forEach(([l,h])=>{(a===void 0||a.includes(l))&&(h.forEach(g=>g()),delete s._x_attributeCleanups[l])})}function hc(s){for(s._x_effects?.forEach(sc);s._x_cleanups?.length;)s._x_cleanups.pop()()}var Ri=new MutationObserver(Pi),vi=!1;function Li(){Ri.observe(document,{subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0}),vi=!0}function fo(){dc(),Ri.disconnect(),vi=!1}var Qn=[];function dc(){let s=Ri.takeRecords();Qn.push(()=>s.length>0&&Pi(s));let a=Qn.length;queueMicrotask(()=>{if(Qn.length===a)for(;Qn.length>0;)Qn.shift()()})}function Re(s){if(!vi)return s();fo();let a=s();return Li(),a}var Bi=!1,_r=[];function gc(){Bi=!0}function xc(){Bi=!1,Pi(_r),_r=[]}function Pi(s){if(Bi){_r=_r.concat(s);return}let a=[],l=new Set,h=new Map,g=new Map;for(let d=0;d<s.length;d++)if(!s[d].target._x_ignoreMutationObserver&&(s[d].type==="childList"&&(s[d].removedNodes.forEach(A=>{A.nodeType===1&&A._x_marker&&l.add(A)}),s[d].addedNodes.forEach(A=>{if(A.nodeType===1){if(l.has(A)){l.delete(A);return}A._x_marker||a.push(A)}})),s[d].type==="attributes")){let A=s[d].target,m=s[d].attributeName,S=s[d].oldValue,C=()=>{h.has(A)||h.set(A,[]),h.get(A).push({name:m,value:A.getAttribute(m)})},_=()=>{g.has(A)||g.set(A,[]),g.get(A).push(m)};A.hasAttribute(m)&&S===null?C():A.hasAttribute(m)?(_(),C()):_()}g.forEach((d,A)=>{uo(A,d)}),h.forEach((d,A)=>{so.forEach(m=>m(A,d))});for(let d of l)a.some(A=>A.contains(d))||oo.forEach(A=>A(d));for(let d of a)d.isConnected&&ao.forEach(A=>A(d));a=null,l=null,h=null,g=null}function ho(s){return ir(Mn(s))}function rr(s,a,l){return s._x_dataStack=[a,...Mn(l||s)],()=>{s._x_dataStack=s._x_dataStack.filter(h=>h!==a)}}function Mn(s){return s._x_dataStack?s._x_dataStack:typeof ShadowRoot=="function"&&s instanceof ShadowRoot?Mn(s.host):s.parentNode?Mn(s.parentNode):[]}function ir(s){return new Proxy({objects:s},wc)}var wc={ownKeys({objects:s}){return Array.from(new Set(s.flatMap(a=>Object.keys(a))))},has({objects:s},a){return a==Symbol.unscopables?!1:s.some(l=>Object.prototype.hasOwnProperty.call(l,a)||Reflect.has(l,a))},get({objects:s},a,l){return a=="toJSON"?pc:Reflect.get(s.find(h=>Reflect.has(h,a))||{},a,l)},set({objects:s},a,l,h){const g=s.find(A=>Object.prototype.hasOwnProperty.call(A,a))||s[s.length-1],d=Object.getOwnPropertyDescriptor(g,a);return d?.set&&d?.get?d.set.call(h,l)||!0:Reflect.set(g,a,l)}};function pc(){return Reflect.ownKeys(this).reduce((a,l)=>(a[l]=Reflect.get(this,l),a),{})}function go(s){let a=h=>typeof h=="object"&&!Array.isArray(h)&&h!==null,l=(h,g="")=>{Object.entries(Object.getOwnPropertyDescriptors(h)).forEach(([d,{value:A,enumerable:m}])=>{if(m===!1||A===void 0||typeof A=="object"&&A!==null&&A.__v_skip)return;let S=g===""?d:`${g}.${d}`;typeof A=="object"&&A!==null&&A._x_interceptor?h[d]=A.initialize(s,S,d):a(A)&&A!==h&&!(A instanceof Element)&&l(A,S)})};return l(s)}function xo(s,a=()=>{}){let l={initialValue:void 0,_x_interceptor:!0,initialize(h,g,d){return s(this.initialValue,()=>Ac(h,g),A=>pi(h,g,A),g,d)}};return a(l),h=>{if(typeof h=="object"&&h!==null&&h._x_interceptor){let g=l.initialize.bind(l);l.initialize=(d,A,m)=>{let S=h.initialize(d,A,m);return l.initialValue=S,g(d,A,m)}}else l.initialValue=h;return l}}function Ac(s,a){return a.split(".").reduce((l,h)=>l[h],s)}function pi(s,a,l){if(typeof a=="string"&&(a=a.split(".")),a.length===1)s[a[0]]=l;else{if(a.length===0)throw error;return s[a[0]]||(s[a[0]]={}),pi(s[a[0]],a.slice(1),l)}}var wo={};function _t(s,a){wo[s]=a}function Ai(s,a){let l=Cc(a);return Object.entries(wo).forEach(([h,g])=>{Object.defineProperty(s,`$${h}`,{get(){return g(a,l)},enumerable:!1})}),s}function Cc(s){let[a,l]=Io(s),h={interceptor:xo,...a};return Di(s,l),h}function Ec(s,a,l,...h){try{return l(...h)}catch(g){nr(g,s,a)}}function nr(s,a,l=void 0){s=Object.assign(s??{message:"No error message given."},{el:a,expression:l}),console.warn(`Alpine Expression Error: ${s.message}

${l?'Expression: "'+l+`"

`:""}`,a),setTimeout(()=>{throw s},0)}var br=!0;function po(s){let a=br;br=!1;let l=s();return br=a,l}function dn(s,a,l={}){let h;return st(s,a)(g=>h=g,l),h}function st(...s){return Ao(...s)}var Ao=Co;function mc(s){Ao=s}function Co(s,a){let l={};Ai(l,s);let h=[l,...Mn(s)],g=typeof a=="function"?Ic(h,a):Sc(h,a,s);return Ec.bind(null,s,a,g)}function Ic(s,a){return(l=()=>{},{scope:h={},params:g=[]}={})=>{let d=a.apply(ir([h,...s]),g);Nr(l,d)}}var ci={};function yc(s,a){if(ci[s])return ci[s];let l=Object.getPrototypeOf(async function(){}).constructor,h=/^[\n\s]*if.*\(.*\)/.test(s.trim())||/^(let|const)\s/.test(s.trim())?`(async()=>{ ${s} })()`:s,d=(()=>{try{let A=new l(["__self","scope"],`with (scope) { __self.result = ${h} }; __self.finished = true; return __self.result;`);return Object.defineProperty(A,"name",{value:`[Alpine] ${s}`}),A}catch(A){return nr(A,a,s),Promise.resolve()}})();return ci[s]=d,d}function Sc(s,a,l){let h=yc(a,l);return(g=()=>{},{scope:d={},params:A=[]}={})=>{h.result=void 0,h.finished=!1;let m=ir([d,...s]);if(typeof h=="function"){let S=h(h,m).catch(C=>nr(C,l,a));h.finished?(Nr(g,h.result,m,A,l),h.result=void 0):S.then(C=>{Nr(g,C,m,A,l)}).catch(C=>nr(C,l,a)).finally(()=>h.result=void 0)}}}function Nr(s,a,l,h,g){if(br&&typeof a=="function"){let d=a.apply(l,h);d instanceof Promise?d.then(A=>Nr(s,A,l,h)).catch(A=>nr(A,g,a)):s(d)}else typeof a=="object"&&a instanceof Promise?a.then(d=>s(d)):s(a)}var Fi="x-";function vn(s=""){return Fi+s}function bc(s){Fi=s}var Mr={};function Ue(s,a){return Mr[s]=a,{before(l){if(!Mr[l]){console.warn(String.raw`Cannot find directive \`${l}\`. \`${s}\` will use the default order of execution`);return}const h=fn.indexOf(l);fn.splice(h>=0?h:fn.indexOf("DEFAULT"),0,s)}}}function Tc(s){return Object.keys(Mr).includes(s)}function ki(s,a,l){if(a=Array.from(a),s._x_virtualDirectives){let d=Object.entries(s._x_virtualDirectives).map(([m,S])=>({name:m,value:S})),A=Eo(d);d=d.map(m=>A.find(S=>S.name===m.name)?{name:`x-bind:${m.name}`,value:`"${m.value}"`}:m),a=a.concat(d)}let h={};return a.map(bo((d,A)=>h[d]=A)).filter(_o).map(Mc(h,l)).sort(Oc).map(d=>Nc(s,d))}function Eo(s){return Array.from(s).map(bo()).filter(a=>!_o(a))}var Ci=!1,Jn=new Map,mo=Symbol();function _c(s){Ci=!0;let a=Symbol();mo=a,Jn.set(a,[]);let l=()=>{for(;Jn.get(a).length;)Jn.get(a).shift()();Jn.delete(a)},h=()=>{Ci=!1,l()};s(l),h()}function Io(s){let a=[],l=m=>a.push(m),[h,g]=uc(s);return a.push(g),[{Alpine:sr,effect:h,cleanup:l,evaluateLater:st.bind(st,s),evaluate:dn.bind(dn,s)},()=>a.forEach(m=>m())]}function Nc(s,a){let l=()=>{},h=Mr[a.type]||l,[g,d]=Io(s);lo(s,a.original,d);let A=()=>{s._x_ignore||s._x_ignoreSelf||(h.inline&&h.inline(s,a,g),h=h.bind(h,s,a,g),Ci?Jn.get(mo).push(h):h())};return A.runCleanups=d,A}var yo=(s,a)=>({name:l,value:h})=>(l.startsWith(s)&&(l=l.replace(s,a)),{name:l,value:h}),So=s=>s;function bo(s=()=>{}){return({name:a,value:l})=>{let{name:h,value:g}=To.reduce((d,A)=>A(d),{name:a,value:l});return h!==a&&s(h,a),{name:h,value:g}}}var To=[];function Ui(s){To.push(s)}function _o({name:s}){return No().test(s)}var No=()=>new RegExp(`^${Fi}([^:^.]+)\\b`);function Mc(s,a){return({name:l,value:h})=>{let g=l.match(No()),d=l.match(/:([a-zA-Z0-9\-_:]+)/),A=l.match(/\.[^.\]]+(?=[^\]]*$)/g)||[],m=a||s[l]||l;return{type:g?g[1]:null,value:d?d[1]:null,modifiers:A.map(S=>S.replace(".","")),expression:h,original:m}}}var Ei="DEFAULT",fn=["ignore","ref","data","id","anchor","bind","init","for","model","modelable","transition","show","if",Ei,"teleport"];function Oc(s,a){let l=fn.indexOf(s.type)===-1?Ei:s.type,h=fn.indexOf(a.type)===-1?Ei:a.type;return fn.indexOf(l)-fn.indexOf(h)}function er(s,a,l={}){s.dispatchEvent(new CustomEvent(a,{detail:l,bubbles:!0,composed:!0,cancelable:!0}))}function wn(s,a){if(typeof ShadowRoot=="function"&&s instanceof ShadowRoot){Array.from(s.children).forEach(g=>wn(g,a));return}let l=!1;if(a(s,()=>l=!0),l)return;let h=s.firstElementChild;for(;h;)wn(h,a),h=h.nextElementSibling}function mt(s,...a){console.warn(`Alpine Warning: ${s}`,...a)}var Ss=!1;function Dc(){Ss&&mt("Alpine has already been initialized on this page. Calling Alpine.start() more than once can cause problems."),Ss=!0,document.body||mt("Unable to initialize. Trying to load Alpine before `<body>` is available. Did you forget to add `defer` in Alpine's `<script>` tag?"),er(document,"alpine:init"),er(document,"alpine:initializing"),Li(),fc(a=>Ut(a,wn)),Di(a=>Bn(a)),co((a,l)=>{ki(a,l).forEach(h=>h())});let s=a=>!vr(a.parentElement,!0);Array.from(document.querySelectorAll(Do().join(","))).filter(s).forEach(a=>{Ut(a)}),er(document,"alpine:initialized"),setTimeout(()=>{Bc()})}var Hi=[],Mo=[];function Oo(){return Hi.map(s=>s())}function Do(){return Hi.concat(Mo).map(s=>s())}function Ro(s){Hi.push(s)}function vo(s){Mo.push(s)}function vr(s,a=!1){return Ln(s,l=>{if((a?Do():Oo()).some(g=>l.matches(g)))return!0})}function Ln(s,a){if(s){if(a(s))return s;if(s._x_teleportBack&&(s=s._x_teleportBack),!!s.parentElement)return Ln(s.parentElement,a)}}function Rc(s){return Oo().some(a=>s.matches(a))}var Lo=[];function vc(s){Lo.push(s)}var Lc=1;function Ut(s,a=wn,l=()=>{}){Ln(s,h=>h._x_ignore)||_c(()=>{a(s,(h,g)=>{h._x_marker||(l(h,g),Lo.forEach(d=>d(h,g)),ki(h,h.attributes).forEach(d=>d()),h._x_ignore||(h._x_marker=Lc++),h._x_ignore&&g())})})}function Bn(s,a=wn){a(s,l=>{hc(l),uo(l),delete l._x_marker})}function Bc(){[["ui","dialog",["[x-dialog], [x-popover]"]],["anchor","anchor",["[x-anchor]"]],["sort","sort",["[x-sort]"]]].forEach(([a,l,h])=>{Tc(l)||h.some(g=>{if(document.querySelector(g))return mt(`found "${g}", but missing ${a} plugin`),!0})})}var mi=[],zi=!1;function ji(s=()=>{}){return queueMicrotask(()=>{zi||setTimeout(()=>{Ii()})}),new Promise(a=>{mi.push(()=>{s(),a()})})}function Ii(){for(zi=!1;mi.length;)mi.shift()()}function Pc(){zi=!0}function Vi(s,a){return Array.isArray(a)?bs(s,a.join(" ")):typeof a=="object"&&a!==null?Fc(s,a):typeof a=="function"?Vi(s,a()):bs(s,a)}function bs(s,a){let l=g=>g.split(" ").filter(d=>!s.classList.contains(d)).filter(Boolean),h=g=>(s.classList.add(...g),()=>{s.classList.remove(...g)});return a=a===!0?a="":a||"",h(l(a))}function Fc(s,a){let l=m=>m.split(" ").filter(Boolean),h=Object.entries(a).flatMap(([m,S])=>S?l(m):!1).filter(Boolean),g=Object.entries(a).flatMap(([m,S])=>S?!1:l(m)).filter(Boolean),d=[],A=[];return g.forEach(m=>{s.classList.contains(m)&&(s.classList.remove(m),A.push(m))}),h.forEach(m=>{s.classList.contains(m)||(s.classList.add(m),d.push(m))}),()=>{A.forEach(m=>s.classList.add(m)),d.forEach(m=>s.classList.remove(m))}}function Lr(s,a){return typeof a=="object"&&a!==null?kc(s,a):Uc(s,a)}function kc(s,a){let l={};return Object.entries(a).forEach(([h,g])=>{l[h]=s.style[h],h.startsWith("--")||(h=Hc(h)),s.style.setProperty(h,g)}),setTimeout(()=>{s.style.length===0&&s.removeAttribute("style")}),()=>{Lr(s,l)}}function Uc(s,a){let l=s.getAttribute("style",a);return s.setAttribute("style",a),()=>{s.setAttribute("style",l||"")}}function Hc(s){return s.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function yi(s,a=()=>{}){let l=!1;return function(){l?a.apply(this,arguments):(l=!0,s.apply(this,arguments))}}Ue("transition",(s,{value:a,modifiers:l,expression:h},{evaluate:g})=>{typeof h=="function"&&(h=g(h)),h!==!1&&(!h||typeof h=="boolean"?jc(s,l,a):zc(s,h,a))});function zc(s,a,l){Bo(s,Vi,""),{enter:g=>{s._x_transition.enter.during=g},"enter-start":g=>{s._x_transition.enter.start=g},"enter-end":g=>{s._x_transition.enter.end=g},leave:g=>{s._x_transition.leave.during=g},"leave-start":g=>{s._x_transition.leave.start=g},"leave-end":g=>{s._x_transition.leave.end=g}}[l](a)}function jc(s,a,l){Bo(s,Lr);let h=!a.includes("in")&&!a.includes("out")&&!l,g=h||a.includes("in")||["enter"].includes(l),d=h||a.includes("out")||["leave"].includes(l);a.includes("in")&&!h&&(a=a.filter((ie,Q)=>Q<a.indexOf("out"))),a.includes("out")&&!h&&(a=a.filter((ie,Q)=>Q>a.indexOf("out")));let A=!a.includes("opacity")&&!a.includes("scale"),m=A||a.includes("opacity"),S=A||a.includes("scale"),C=m?0:1,_=S?Kn(a,"scale",95)/100:1,N=Kn(a,"delay",0)/1e3,z=Kn(a,"origin","center"),Y="opacity, transform",Ae=Kn(a,"duration",150)/1e3,q=Kn(a,"duration",75)/1e3,j="cubic-bezier(0.4, 0.0, 0.2, 1)";g&&(s._x_transition.enter.during={transformOrigin:z,transitionDelay:`${N}s`,transitionProperty:Y,transitionDuration:`${Ae}s`,transitionTimingFunction:j},s._x_transition.enter.start={opacity:C,transform:`scale(${_})`},s._x_transition.enter.end={opacity:1,transform:"scale(1)"}),d&&(s._x_transition.leave.during={transformOrigin:z,transitionDelay:`${N}s`,transitionProperty:Y,transitionDuration:`${q}s`,transitionTimingFunction:j},s._x_transition.leave.start={opacity:1,transform:"scale(1)"},s._x_transition.leave.end={opacity:C,transform:`scale(${_})`})}function Bo(s,a,l={}){s._x_transition||(s._x_transition={enter:{during:l,start:l,end:l},leave:{during:l,start:l,end:l},in(h=()=>{},g=()=>{}){Si(s,a,{during:this.enter.during,start:this.enter.start,end:this.enter.end},h,g)},out(h=()=>{},g=()=>{}){Si(s,a,{during:this.leave.during,start:this.leave.start,end:this.leave.end},h,g)}})}window.Element.prototype._x_toggleAndCascadeWithTransitions=function(s,a,l,h){const g=document.visibilityState==="visible"?requestAnimationFrame:setTimeout;let d=()=>g(l);if(a){s._x_transition&&(s._x_transition.enter||s._x_transition.leave)?s._x_transition.enter&&(Object.entries(s._x_transition.enter.during).length||Object.entries(s._x_transition.enter.start).length||Object.entries(s._x_transition.enter.end).length)?s._x_transition.in(l):d():s._x_transition?s._x_transition.in(l):d();return}s._x_hidePromise=s._x_transition?new Promise((A,m)=>{s._x_transition.out(()=>{},()=>A(h)),s._x_transitioning&&s._x_transitioning.beforeCancel(()=>m({isFromCancelledTransition:!0}))}):Promise.resolve(h),queueMicrotask(()=>{let A=Po(s);A?(A._x_hideChildren||(A._x_hideChildren=[]),A._x_hideChildren.push(s)):g(()=>{let m=S=>{let C=Promise.all([S._x_hidePromise,...(S._x_hideChildren||[]).map(m)]).then(([_])=>_?.());return delete S._x_hidePromise,delete S._x_hideChildren,C};m(s).catch(S=>{if(!S.isFromCancelledTransition)throw S})})})};function Po(s){let a=s.parentNode;if(a)return a._x_hidePromise?a:Po(a)}function Si(s,a,{during:l,start:h,end:g}={},d=()=>{},A=()=>{}){if(s._x_transitioning&&s._x_transitioning.cancel(),Object.keys(l).length===0&&Object.keys(h).length===0&&Object.keys(g).length===0){d(),A();return}let m,S,C;Vc(s,{start(){m=a(s,h)},during(){S=a(s,l)},before:d,end(){m(),C=a(s,g)},after:A,cleanup(){S(),C()}})}function Vc(s,a){let l,h,g,d=yi(()=>{Re(()=>{l=!0,h||a.before(),g||(a.end(),Ii()),a.after(),s.isConnected&&a.cleanup(),delete s._x_transitioning})});s._x_transitioning={beforeCancels:[],beforeCancel(A){this.beforeCancels.push(A)},cancel:yi(function(){for(;this.beforeCancels.length;)this.beforeCancels.shift()();d()}),finish:d},Re(()=>{a.start(),a.during()}),Pc(),requestAnimationFrame(()=>{if(l)return;let A=Number(getComputedStyle(s).transitionDuration.replace(/,.*/,"").replace("s",""))*1e3,m=Number(getComputedStyle(s).transitionDelay.replace(/,.*/,"").replace("s",""))*1e3;A===0&&(A=Number(getComputedStyle(s).animationDuration.replace("s",""))*1e3),Re(()=>{a.before()}),h=!0,requestAnimationFrame(()=>{l||(Re(()=>{a.end()}),Ii(),setTimeout(s._x_transitioning.finish,A+m),g=!0)})})}function Kn(s,a,l){if(s.indexOf(a)===-1)return l;const h=s[s.indexOf(a)+1];if(!h||a==="scale"&&isNaN(h))return l;if(a==="duration"||a==="delay"){let g=h.match(/([0-9]+)ms/);if(g)return g[1]}return a==="origin"&&["top","right","left","center","bottom"].includes(s[s.indexOf(a)+2])?[h,s[s.indexOf(a)+2]].join(" "):h}var Jt=!1;function tn(s,a=()=>{}){return(...l)=>Jt?a(...l):s(...l)}function Gc(s){return(...a)=>Jt&&s(...a)}var Fo=[];function Br(s){Fo.push(s)}function Wc(s,a){Fo.forEach(l=>l(s,a)),Jt=!0,ko(()=>{Ut(a,(l,h)=>{h(l,()=>{})})}),Jt=!1}var bi=!1;function Yc(s,a){a._x_dataStack||(a._x_dataStack=s._x_dataStack),Jt=!0,bi=!0,ko(()=>{Xc(a)}),Jt=!1,bi=!1}function Xc(s){let a=!1;Ut(s,(h,g)=>{wn(h,(d,A)=>{if(a&&Rc(d))return A();a=!0,g(d,A)})})}function ko(s){let a=pn;ys((l,h)=>{let g=a(l);return Rn(g),()=>{}}),s(),ys(a)}function Uo(s,a,l,h=[]){switch(s._x_bindings||(s._x_bindings=Dn({})),s._x_bindings[a]=l,a=h.includes("camel")?tl(a):a,a){case"value":Zc(s,l);break;case"style":Kc(s,l);break;case"class":Qc(s,l);break;case"selected":case"checked":qc(s,a,l);break;default:Ho(s,a,l);break}}function Zc(s,a){if(Vo(s))s.attributes.value===void 0&&(s.value=a),window.fromModel&&(typeof a=="boolean"?s.checked=Tr(s.value)===a:s.checked=Ts(s.value,a));else if(Gi(s))Number.isInteger(a)?s.value=a:!Array.isArray(a)&&typeof a!="boolean"&&![null,void 0].includes(a)?s.value=String(a):Array.isArray(a)?s.checked=a.some(l=>Ts(l,s.value)):s.checked=!!a;else if(s.tagName==="SELECT")el(s,a);else{if(s.value===a)return;s.value=a===void 0?"":a}}function Qc(s,a){s._x_undoAddedClasses&&s._x_undoAddedClasses(),s._x_undoAddedClasses=Vi(s,a)}function Kc(s,a){s._x_undoAddedStyles&&s._x_undoAddedStyles(),s._x_undoAddedStyles=Lr(s,a)}function qc(s,a,l){Ho(s,a,l),$c(s,a,l)}function Ho(s,a,l){[null,void 0,!1].includes(l)&&rl(a)?s.removeAttribute(a):(zo(a)&&(l=a),Jc(s,a,l))}function Jc(s,a,l){s.getAttribute(a)!=l&&s.setAttribute(a,l)}function $c(s,a,l){s[a]!==l&&(s[a]=l)}function el(s,a){const l=[].concat(a).map(h=>h+"");Array.from(s.options).forEach(h=>{h.selected=l.includes(h.value)})}function tl(s){return s.toLowerCase().replace(/-(\w)/g,(a,l)=>l.toUpperCase())}function Ts(s,a){return s==a}function Tr(s){return[1,"1","true","on","yes",!0].includes(s)?!0:[0,"0","false","off","no",!1].includes(s)?!1:s?!!s:null}var nl=new Set(["allowfullscreen","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","inert","ismap","itemscope","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected","shadowrootclonable","shadowrootdelegatesfocus","shadowrootserializable"]);function zo(s){return nl.has(s)}function rl(s){return!["aria-pressed","aria-checked","aria-expanded","aria-selected"].includes(s)}function il(s,a,l){return s._x_bindings&&s._x_bindings[a]!==void 0?s._x_bindings[a]:jo(s,a,l)}function sl(s,a,l,h=!0){if(s._x_bindings&&s._x_bindings[a]!==void 0)return s._x_bindings[a];if(s._x_inlineBindings&&s._x_inlineBindings[a]!==void 0){let g=s._x_inlineBindings[a];return g.extract=h,po(()=>dn(s,g.expression))}return jo(s,a,l)}function jo(s,a,l){let h=s.getAttribute(a);return h===null?typeof l=="function"?l():l:h===""?!0:zo(a)?!![a,"true"].includes(h):h}function Gi(s){return s.type==="checkbox"||s.localName==="ui-checkbox"||s.localName==="ui-switch"}function Vo(s){return s.type==="radio"||s.localName==="ui-radio"}function Go(s,a){var l;return function(){var h=this,g=arguments,d=function(){l=null,s.apply(h,g)};clearTimeout(l),l=setTimeout(d,a)}}function Wo(s,a){let l;return function(){let h=this,g=arguments;l||(s.apply(h,g),l=!0,setTimeout(()=>l=!1,a))}}function Yo({get:s,set:a},{get:l,set:h}){let g=!0,d,A=pn(()=>{let m=s(),S=l();if(g)h(li(m)),g=!1;else{let C=JSON.stringify(m),_=JSON.stringify(S);C!==d?h(li(m)):C!==_&&a(li(S))}d=JSON.stringify(s()),JSON.stringify(l())});return()=>{Rn(A)}}function li(s){return typeof s=="object"?JSON.parse(JSON.stringify(s)):s}function ol(s){(Array.isArray(s)?s:[s]).forEach(l=>l(sr))}var un={},_s=!1;function al(s,a){if(_s||(un=Dn(un),_s=!0),a===void 0)return un[s];un[s]=a,go(un[s]),typeof a=="object"&&a!==null&&a.hasOwnProperty("init")&&typeof a.init=="function"&&un[s].init()}function cl(){return un}var Xo={};function ll(s,a){let l=typeof a!="function"?()=>a:a;return s instanceof Element?Zo(s,l()):(Xo[s]=l,()=>{})}function ul(s){return Object.entries(Xo).forEach(([a,l])=>{Object.defineProperty(s,a,{get(){return(...h)=>l(...h)}})}),s}function Zo(s,a,l){let h=[];for(;h.length;)h.pop()();let g=Object.entries(a).map(([A,m])=>({name:A,value:m})),d=Eo(g);return g=g.map(A=>d.find(m=>m.name===A.name)?{name:`x-bind:${A.name}`,value:`"${A.value}"`}:A),ki(s,g,l).map(A=>{h.push(A.runCleanups),A()}),()=>{for(;h.length;)h.pop()()}}var Qo={};function fl(s,a){Qo[s]=a}function hl(s,a){return Object.entries(Qo).forEach(([l,h])=>{Object.defineProperty(s,l,{get(){return(...g)=>h.bind(a)(...g)},enumerable:!1})}),s}var dl={get reactive(){return Dn},get release(){return Rn},get effect(){return pn},get raw(){return ro},version:"3.14.9",flushAndStopDeferringMutations:xc,dontAutoEvaluateFunctions:po,disableEffectScheduling:cc,startObservingMutations:Li,stopObservingMutations:fo,setReactivityEngine:lc,onAttributeRemoved:lo,onAttributesAdded:co,closestDataStack:Mn,skipDuringClone:tn,onlyDuringClone:Gc,addRootSelector:Ro,addInitSelector:vo,interceptClone:Br,addScopeToNode:rr,deferMutations:gc,mapAttributes:Ui,evaluateLater:st,interceptInit:vc,setEvaluator:mc,mergeProxies:ir,extractProp:sl,findClosest:Ln,onElRemoved:Di,closestRoot:vr,destroyTree:Bn,interceptor:xo,transition:Si,setStyles:Lr,mutateDom:Re,directive:Ue,entangle:Yo,throttle:Wo,debounce:Go,evaluate:dn,initTree:Ut,nextTick:ji,prefixed:vn,prefix:bc,plugin:ol,magic:_t,store:al,start:Dc,clone:Yc,cloneNode:Wc,bound:il,$data:ho,watch:io,walk:wn,data:fl,bind:ll},sr=dl;function gl(s,a){const l=Object.create(null),h=s.split(",");for(let g=0;g<h.length;g++)l[h[g]]=!0;return g=>!!l[g]}var xl=Object.freeze({}),wl=Object.prototype.hasOwnProperty,Pr=(s,a)=>wl.call(s,a),gn=Array.isArray,tr=s=>Ko(s)==="[object Map]",pl=s=>typeof s=="string",Wi=s=>typeof s=="symbol",Fr=s=>s!==null&&typeof s=="object",Al=Object.prototype.toString,Ko=s=>Al.call(s),qo=s=>Ko(s).slice(8,-1),Yi=s=>pl(s)&&s!=="NaN"&&s[0]!=="-"&&""+parseInt(s,10)===s,Cl=s=>{const a=Object.create(null);return l=>a[l]||(a[l]=s(l))},El=Cl(s=>s.charAt(0).toUpperCase()+s.slice(1)),Jo=(s,a)=>s!==a&&(s===s||a===a),Ti=new WeakMap,qn=[],Pt,xn=Symbol("iterate"),_i=Symbol("Map key iterate");function ml(s){return s&&s._isEffect===!0}function Il(s,a=xl){ml(s)&&(s=s.raw);const l=bl(s,a);return a.lazy||l(),l}function yl(s){s.active&&($o(s),s.options.onStop&&s.options.onStop(),s.active=!1)}var Sl=0;function bl(s,a){const l=function(){if(!l.active)return s();if(!qn.includes(l)){$o(l);try{return _l(),qn.push(l),Pt=l,s()}finally{qn.pop(),ea(),Pt=qn[qn.length-1]}}};return l.id=Sl++,l.allowRecurse=!!a.allowRecurse,l._isEffect=!0,l.active=!0,l.raw=s,l.deps=[],l.options=a,l}function $o(s){const{deps:a}=s;if(a.length){for(let l=0;l<a.length;l++)a[l].delete(s);a.length=0}}var On=!0,Xi=[];function Tl(){Xi.push(On),On=!1}function _l(){Xi.push(On),On=!0}function ea(){const s=Xi.pop();On=s===void 0?!0:s}function Tt(s,a,l){if(!On||Pt===void 0)return;let h=Ti.get(s);h||Ti.set(s,h=new Map);let g=h.get(l);g||h.set(l,g=new Set),g.has(Pt)||(g.add(Pt),Pt.deps.push(g),Pt.options.onTrack&&Pt.options.onTrack({effect:Pt,target:s,type:a,key:l}))}function $t(s,a,l,h,g,d){const A=Ti.get(s);if(!A)return;const m=new Set,S=_=>{_&&_.forEach(N=>{(N!==Pt||N.allowRecurse)&&m.add(N)})};if(a==="clear")A.forEach(S);else if(l==="length"&&gn(s))A.forEach((_,N)=>{(N==="length"||N>=h)&&S(_)});else switch(l!==void 0&&S(A.get(l)),a){case"add":gn(s)?Yi(l)&&S(A.get("length")):(S(A.get(xn)),tr(s)&&S(A.get(_i)));break;case"delete":gn(s)||(S(A.get(xn)),tr(s)&&S(A.get(_i)));break;case"set":tr(s)&&S(A.get(xn));break}const C=_=>{_.options.onTrigger&&_.options.onTrigger({effect:_,target:s,key:l,type:a,newValue:h,oldValue:g,oldTarget:d}),_.options.scheduler?_.options.scheduler(_):_()};m.forEach(C)}var Nl=gl("__proto__,__v_isRef,__isVue"),ta=new Set(Object.getOwnPropertyNames(Symbol).map(s=>Symbol[s]).filter(Wi)),Ml=na(),Ol=na(!0),Ns=Dl();function Dl(){const s={};return["includes","indexOf","lastIndexOf"].forEach(a=>{s[a]=function(...l){const h=Me(this);for(let d=0,A=this.length;d<A;d++)Tt(h,"get",d+"");const g=h[a](...l);return g===-1||g===!1?h[a](...l.map(Me)):g}}),["push","pop","shift","unshift","splice"].forEach(a=>{s[a]=function(...l){Tl();const h=Me(this)[a].apply(this,l);return ea(),h}}),s}function na(s=!1,a=!1){return function(h,g,d){if(g==="__v_isReactive")return!s;if(g==="__v_isReadonly")return s;if(g==="__v_raw"&&d===(s?a?Wl:oa:a?Gl:sa).get(h))return h;const A=gn(h);if(!s&&A&&Pr(Ns,g))return Reflect.get(Ns,g,d);const m=Reflect.get(h,g,d);return(Wi(g)?ta.has(g):Nl(g))||(s||Tt(h,"get",g),a)?m:Ni(m)?!A||!Yi(g)?m.value:m:Fr(m)?s?aa(m):qi(m):m}}var Rl=vl();function vl(s=!1){return function(l,h,g,d){let A=l[h];if(!s&&(g=Me(g),A=Me(A),!gn(l)&&Ni(A)&&!Ni(g)))return A.value=g,!0;const m=gn(l)&&Yi(h)?Number(h)<l.length:Pr(l,h),S=Reflect.set(l,h,g,d);return l===Me(d)&&(m?Jo(g,A)&&$t(l,"set",h,g,A):$t(l,"add",h,g)),S}}function Ll(s,a){const l=Pr(s,a),h=s[a],g=Reflect.deleteProperty(s,a);return g&&l&&$t(s,"delete",a,void 0,h),g}function Bl(s,a){const l=Reflect.has(s,a);return(!Wi(a)||!ta.has(a))&&Tt(s,"has",a),l}function Pl(s){return Tt(s,"iterate",gn(s)?"length":xn),Reflect.ownKeys(s)}var Fl={get:Ml,set:Rl,deleteProperty:Ll,has:Bl,ownKeys:Pl},kl={get:Ol,set(s,a){return console.warn(`Set operation on key "${String(a)}" failed: target is readonly.`,s),!0},deleteProperty(s,a){return console.warn(`Delete operation on key "${String(a)}" failed: target is readonly.`,s),!0}},Zi=s=>Fr(s)?qi(s):s,Qi=s=>Fr(s)?aa(s):s,Ki=s=>s,kr=s=>Reflect.getPrototypeOf(s);function Cr(s,a,l=!1,h=!1){s=s.__v_raw;const g=Me(s),d=Me(a);a!==d&&!l&&Tt(g,"get",a),!l&&Tt(g,"get",d);const{has:A}=kr(g),m=h?Ki:l?Qi:Zi;if(A.call(g,a))return m(s.get(a));if(A.call(g,d))return m(s.get(d));s!==g&&s.get(a)}function Er(s,a=!1){const l=this.__v_raw,h=Me(l),g=Me(s);return s!==g&&!a&&Tt(h,"has",s),!a&&Tt(h,"has",g),s===g?l.has(s):l.has(s)||l.has(g)}function mr(s,a=!1){return s=s.__v_raw,!a&&Tt(Me(s),"iterate",xn),Reflect.get(s,"size",s)}function Ms(s){s=Me(s);const a=Me(this);return kr(a).has.call(a,s)||(a.add(s),$t(a,"add",s,s)),this}function Os(s,a){a=Me(a);const l=Me(this),{has:h,get:g}=kr(l);let d=h.call(l,s);d?ia(l,h,s):(s=Me(s),d=h.call(l,s));const A=g.call(l,s);return l.set(s,a),d?Jo(a,A)&&$t(l,"set",s,a,A):$t(l,"add",s,a),this}function Ds(s){const a=Me(this),{has:l,get:h}=kr(a);let g=l.call(a,s);g?ia(a,l,s):(s=Me(s),g=l.call(a,s));const d=h?h.call(a,s):void 0,A=a.delete(s);return g&&$t(a,"delete",s,void 0,d),A}function Rs(){const s=Me(this),a=s.size!==0,l=tr(s)?new Map(s):new Set(s),h=s.clear();return a&&$t(s,"clear",void 0,void 0,l),h}function Ir(s,a){return function(h,g){const d=this,A=d.__v_raw,m=Me(A),S=a?Ki:s?Qi:Zi;return!s&&Tt(m,"iterate",xn),A.forEach((C,_)=>h.call(g,S(C),S(_),d))}}function yr(s,a,l){return function(...h){const g=this.__v_raw,d=Me(g),A=tr(d),m=s==="entries"||s===Symbol.iterator&&A,S=s==="keys"&&A,C=g[s](...h),_=l?Ki:a?Qi:Zi;return!a&&Tt(d,"iterate",S?_i:xn),{next(){const{value:N,done:z}=C.next();return z?{value:N,done:z}:{value:m?[_(N[0]),_(N[1])]:_(N),done:z}},[Symbol.iterator](){return this}}}}function Kt(s){return function(...a){{const l=a[0]?`on key "${a[0]}" `:"";console.warn(`${El(s)} operation ${l}failed: target is readonly.`,Me(this))}return s==="delete"?!1:this}}function Ul(){const s={get(d){return Cr(this,d)},get size(){return mr(this)},has:Er,add:Ms,set:Os,delete:Ds,clear:Rs,forEach:Ir(!1,!1)},a={get(d){return Cr(this,d,!1,!0)},get size(){return mr(this)},has:Er,add:Ms,set:Os,delete:Ds,clear:Rs,forEach:Ir(!1,!0)},l={get(d){return Cr(this,d,!0)},get size(){return mr(this,!0)},has(d){return Er.call(this,d,!0)},add:Kt("add"),set:Kt("set"),delete:Kt("delete"),clear:Kt("clear"),forEach:Ir(!0,!1)},h={get(d){return Cr(this,d,!0,!0)},get size(){return mr(this,!0)},has(d){return Er.call(this,d,!0)},add:Kt("add"),set:Kt("set"),delete:Kt("delete"),clear:Kt("clear"),forEach:Ir(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(d=>{s[d]=yr(d,!1,!1),l[d]=yr(d,!0,!1),a[d]=yr(d,!1,!0),h[d]=yr(d,!0,!0)}),[s,l,a,h]}var[Hl,zl,o0,a0]=Ul();function ra(s,a){const l=s?zl:Hl;return(h,g,d)=>g==="__v_isReactive"?!s:g==="__v_isReadonly"?s:g==="__v_raw"?h:Reflect.get(Pr(l,g)&&g in h?l:h,g,d)}var jl={get:ra(!1)},Vl={get:ra(!0)};function ia(s,a,l){const h=Me(l);if(h!==l&&a.call(s,h)){const g=qo(s);console.warn(`Reactive ${g} contains both the raw and reactive versions of the same object${g==="Map"?" as keys":""}, which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.`)}}var sa=new WeakMap,Gl=new WeakMap,oa=new WeakMap,Wl=new WeakMap;function Yl(s){switch(s){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Xl(s){return s.__v_skip||!Object.isExtensible(s)?0:Yl(qo(s))}function qi(s){return s&&s.__v_isReadonly?s:ca(s,!1,Fl,jl,sa)}function aa(s){return ca(s,!0,kl,Vl,oa)}function ca(s,a,l,h,g){if(!Fr(s))return console.warn(`value cannot be made reactive: ${String(s)}`),s;if(s.__v_raw&&!(a&&s.__v_isReactive))return s;const d=g.get(s);if(d)return d;const A=Xl(s);if(A===0)return s;const m=new Proxy(s,A===2?h:l);return g.set(s,m),m}function Me(s){return s&&Me(s.__v_raw)||s}function Ni(s){return!!(s&&s.__v_isRef===!0)}_t("nextTick",()=>ji);_t("dispatch",s=>er.bind(er,s));_t("watch",(s,{evaluateLater:a,cleanup:l})=>(h,g)=>{let d=a(h),m=io(()=>{let S;return d(C=>S=C),S},g);l(m)});_t("store",cl);_t("data",s=>ho(s));_t("root",s=>vr(s));_t("refs",s=>(s._x_refs_proxy||(s._x_refs_proxy=ir(Zl(s))),s._x_refs_proxy));function Zl(s){let a=[];return Ln(s,l=>{l._x_refs&&a.push(l._x_refs)}),a}var ui={};function la(s){return ui[s]||(ui[s]=0),++ui[s]}function Ql(s,a){return Ln(s,l=>{if(l._x_ids&&l._x_ids[a])return!0})}function Kl(s,a){s._x_ids||(s._x_ids={}),s._x_ids[a]||(s._x_ids[a]=la(a))}_t("id",(s,{cleanup:a})=>(l,h=null)=>{let g=`${l}${h?`-${h}`:""}`;return ql(s,g,a,()=>{let d=Ql(s,l),A=d?d._x_ids[l]:la(l);return h?`${l}-${A}-${h}`:`${l}-${A}`})});Br((s,a)=>{s._x_id&&(a._x_id=s._x_id)});function ql(s,a,l,h){if(s._x_id||(s._x_id={}),s._x_id[a])return s._x_id[a];let g=h();return s._x_id[a]=g,l(()=>{delete s._x_id[a]}),g}_t("el",s=>s);ua("Focus","focus","focus");ua("Persist","persist","persist");function ua(s,a,l){_t(a,h=>mt(`You can't use [$${a}] without first installing the "${s}" plugin here: https://alpinejs.dev/plugins/${l}`,h))}Ue("modelable",(s,{expression:a},{effect:l,evaluateLater:h,cleanup:g})=>{let d=h(a),A=()=>{let _;return d(N=>_=N),_},m=h(`${a} = __placeholder`),S=_=>m(()=>{},{scope:{__placeholder:_}}),C=A();S(C),queueMicrotask(()=>{if(!s._x_model)return;s._x_removeModelListeners.default();let _=s._x_model.get,N=s._x_model.set,z=Yo({get(){return _()},set(Y){N(Y)}},{get(){return A()},set(Y){S(Y)}});g(z)})});Ue("teleport",(s,{modifiers:a,expression:l},{cleanup:h})=>{s.tagName.toLowerCase()!=="template"&&mt("x-teleport can only be used on a <template> tag",s);let g=vs(l),d=s.content.cloneNode(!0).firstElementChild;s._x_teleport=d,d._x_teleportBack=s,s.setAttribute("data-teleport-template",!0),d.setAttribute("data-teleport-target",!0),s._x_forwardEvents&&s._x_forwardEvents.forEach(m=>{d.addEventListener(m,S=>{S.stopPropagation(),s.dispatchEvent(new S.constructor(S.type,S))})}),rr(d,{},s);let A=(m,S,C)=>{C.includes("prepend")?S.parentNode.insertBefore(m,S):C.includes("append")?S.parentNode.insertBefore(m,S.nextSibling):S.appendChild(m)};Re(()=>{A(d,g,a),tn(()=>{Ut(d)})()}),s._x_teleportPutBack=()=>{let m=vs(l);Re(()=>{A(s._x_teleport,m,a)})},h(()=>Re(()=>{d.remove(),Bn(d)}))});var Jl=document.createElement("div");function vs(s){let a=tn(()=>document.querySelector(s),()=>Jl)();return a||mt(`Cannot find x-teleport element for selector: "${s}"`),a}var fa=()=>{};fa.inline=(s,{modifiers:a},{cleanup:l})=>{a.includes("self")?s._x_ignoreSelf=!0:s._x_ignore=!0,l(()=>{a.includes("self")?delete s._x_ignoreSelf:delete s._x_ignore})};Ue("ignore",fa);Ue("effect",tn((s,{expression:a},{effect:l})=>{l(st(s,a))}));function Mi(s,a,l,h){let g=s,d=S=>h(S),A={},m=(S,C)=>_=>C(S,_);if(l.includes("dot")&&(a=$l(a)),l.includes("camel")&&(a=e1(a)),l.includes("passive")&&(A.passive=!0),l.includes("capture")&&(A.capture=!0),l.includes("window")&&(g=window),l.includes("document")&&(g=document),l.includes("debounce")){let S=l[l.indexOf("debounce")+1]||"invalid-wait",C=Or(S.split("ms")[0])?Number(S.split("ms")[0]):250;d=Go(d,C)}if(l.includes("throttle")){let S=l[l.indexOf("throttle")+1]||"invalid-wait",C=Or(S.split("ms")[0])?Number(S.split("ms")[0]):250;d=Wo(d,C)}return l.includes("prevent")&&(d=m(d,(S,C)=>{C.preventDefault(),S(C)})),l.includes("stop")&&(d=m(d,(S,C)=>{C.stopPropagation(),S(C)})),l.includes("once")&&(d=m(d,(S,C)=>{S(C),g.removeEventListener(a,d,A)})),(l.includes("away")||l.includes("outside"))&&(g=document,d=m(d,(S,C)=>{s.contains(C.target)||C.target.isConnected!==!1&&(s.offsetWidth<1&&s.offsetHeight<1||s._x_isShown!==!1&&S(C))})),l.includes("self")&&(d=m(d,(S,C)=>{C.target===s&&S(C)})),(n1(a)||ha(a))&&(d=m(d,(S,C)=>{r1(C,l)||S(C)})),g.addEventListener(a,d,A),()=>{g.removeEventListener(a,d,A)}}function $l(s){return s.replace(/-/g,".")}function e1(s){return s.toLowerCase().replace(/-(\w)/g,(a,l)=>l.toUpperCase())}function Or(s){return!Array.isArray(s)&&!isNaN(s)}function t1(s){return[" ","_"].includes(s)?s:s.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[_\s]/,"-").toLowerCase()}function n1(s){return["keydown","keyup"].includes(s)}function ha(s){return["contextmenu","click","mouse"].some(a=>s.includes(a))}function r1(s,a){let l=a.filter(d=>!["window","document","prevent","stop","once","capture","self","away","outside","passive"].includes(d));if(l.includes("debounce")){let d=l.indexOf("debounce");l.splice(d,Or((l[d+1]||"invalid-wait").split("ms")[0])?2:1)}if(l.includes("throttle")){let d=l.indexOf("throttle");l.splice(d,Or((l[d+1]||"invalid-wait").split("ms")[0])?2:1)}if(l.length===0||l.length===1&&Ls(s.key).includes(l[0]))return!1;const g=["ctrl","shift","alt","meta","cmd","super"].filter(d=>l.includes(d));return l=l.filter(d=>!g.includes(d)),!(g.length>0&&g.filter(A=>((A==="cmd"||A==="super")&&(A="meta"),s[`${A}Key`])).length===g.length&&(ha(s.type)||Ls(s.key).includes(l[0])))}function Ls(s){if(!s)return[];s=t1(s);let a={ctrl:"control",slash:"/",space:" ",spacebar:" ",cmd:"meta",esc:"escape",up:"arrow-up",down:"arrow-down",left:"arrow-left",right:"arrow-right",period:".",comma:",",equal:"=",minus:"-",underscore:"_"};return a[s]=s,Object.keys(a).map(l=>{if(a[l]===s)return l}).filter(l=>l)}Ue("model",(s,{modifiers:a,expression:l},{effect:h,cleanup:g})=>{let d=s;a.includes("parent")&&(d=s.parentNode);let A=st(d,l),m;typeof l=="string"?m=st(d,`${l} = __placeholder`):typeof l=="function"&&typeof l()=="string"?m=st(d,`${l()} = __placeholder`):m=()=>{};let S=()=>{let z;return A(Y=>z=Y),Bs(z)?z.get():z},C=z=>{let Y;A(Ae=>Y=Ae),Bs(Y)?Y.set(z):m(()=>{},{scope:{__placeholder:z}})};typeof l=="string"&&s.type==="radio"&&Re(()=>{s.hasAttribute("name")||s.setAttribute("name",l)});var _=s.tagName.toLowerCase()==="select"||["checkbox","radio"].includes(s.type)||a.includes("lazy")?"change":"input";let N=Jt?()=>{}:Mi(s,_,a,z=>{C(fi(s,a,z,S()))});if(a.includes("fill")&&([void 0,null,""].includes(S())||Gi(s)&&Array.isArray(S())||s.tagName.toLowerCase()==="select"&&s.multiple)&&C(fi(s,a,{target:s},S())),s._x_removeModelListeners||(s._x_removeModelListeners={}),s._x_removeModelListeners.default=N,g(()=>s._x_removeModelListeners.default()),s.form){let z=Mi(s.form,"reset",[],Y=>{ji(()=>s._x_model&&s._x_model.set(fi(s,a,{target:s},S())))});g(()=>z())}s._x_model={get(){return S()},set(z){C(z)}},s._x_forceModelUpdate=z=>{z===void 0&&typeof l=="string"&&l.match(/\./)&&(z=""),window.fromModel=!0,Re(()=>Uo(s,"value",z)),delete window.fromModel},h(()=>{let z=S();a.includes("unintrusive")&&document.activeElement.isSameNode(s)||s._x_forceModelUpdate(z)})});function fi(s,a,l,h){return Re(()=>{if(l instanceof CustomEvent&&l.detail!==void 0)return l.detail!==null&&l.detail!==void 0?l.detail:l.target.value;if(Gi(s))if(Array.isArray(h)){let g=null;return a.includes("number")?g=hi(l.target.value):a.includes("boolean")?g=Tr(l.target.value):g=l.target.value,l.target.checked?h.includes(g)?h:h.concat([g]):h.filter(d=>!i1(d,g))}else return l.target.checked;else{if(s.tagName.toLowerCase()==="select"&&s.multiple)return a.includes("number")?Array.from(l.target.selectedOptions).map(g=>{let d=g.value||g.text;return hi(d)}):a.includes("boolean")?Array.from(l.target.selectedOptions).map(g=>{let d=g.value||g.text;return Tr(d)}):Array.from(l.target.selectedOptions).map(g=>g.value||g.text);{let g;return Vo(s)?l.target.checked?g=l.target.value:g=h:g=l.target.value,a.includes("number")?hi(g):a.includes("boolean")?Tr(g):a.includes("trim")?g.trim():g}}})}function hi(s){let a=s?parseFloat(s):null;return s1(a)?a:s}function i1(s,a){return s==a}function s1(s){return!Array.isArray(s)&&!isNaN(s)}function Bs(s){return s!==null&&typeof s=="object"&&typeof s.get=="function"&&typeof s.set=="function"}Ue("cloak",s=>queueMicrotask(()=>Re(()=>s.removeAttribute(vn("cloak")))));vo(()=>`[${vn("init")}]`);Ue("init",tn((s,{expression:a},{evaluate:l})=>typeof a=="string"?!!a.trim()&&l(a,{},!1):l(a,{},!1)));Ue("text",(s,{expression:a},{effect:l,evaluateLater:h})=>{let g=h(a);l(()=>{g(d=>{Re(()=>{s.textContent=d})})})});Ue("html",(s,{expression:a},{effect:l,evaluateLater:h})=>{let g=h(a);l(()=>{g(d=>{Re(()=>{s.innerHTML=d,s._x_ignoreSelf=!0,Ut(s),delete s._x_ignoreSelf})})})});Ui(yo(":",So(vn("bind:"))));var da=(s,{value:a,modifiers:l,expression:h,original:g},{effect:d,cleanup:A})=>{if(!a){let S={};ul(S),st(s,h)(_=>{Zo(s,_,g)},{scope:S});return}if(a==="key")return o1(s,h);if(s._x_inlineBindings&&s._x_inlineBindings[a]&&s._x_inlineBindings[a].extract)return;let m=st(s,h);d(()=>m(S=>{S===void 0&&typeof h=="string"&&h.match(/\./)&&(S=""),Re(()=>Uo(s,a,S,l))})),A(()=>{s._x_undoAddedClasses&&s._x_undoAddedClasses(),s._x_undoAddedStyles&&s._x_undoAddedStyles()})};da.inline=(s,{value:a,modifiers:l,expression:h})=>{a&&(s._x_inlineBindings||(s._x_inlineBindings={}),s._x_inlineBindings[a]={expression:h,extract:!1})};Ue("bind",da);function o1(s,a){s._x_keyExpression=a}Ro(()=>`[${vn("data")}]`);Ue("data",(s,{expression:a},{cleanup:l})=>{if(a1(s))return;a=a===""?"{}":a;let h={};Ai(h,s);let g={};hl(g,h);let d=dn(s,a,{scope:g});(d===void 0||d===!0)&&(d={}),Ai(d,s);let A=Dn(d);go(A);let m=rr(s,A);A.init&&dn(s,A.init),l(()=>{A.destroy&&dn(s,A.destroy),m()})});Br((s,a)=>{s._x_dataStack&&(a._x_dataStack=s._x_dataStack,a.setAttribute("data-has-alpine-state",!0))});function a1(s){return Jt?bi?!0:s.hasAttribute("data-has-alpine-state"):!1}Ue("show",(s,{modifiers:a,expression:l},{effect:h})=>{let g=st(s,l);s._x_doHide||(s._x_doHide=()=>{Re(()=>{s.style.setProperty("display","none",a.includes("important")?"important":void 0)})}),s._x_doShow||(s._x_doShow=()=>{Re(()=>{s.style.length===1&&s.style.display==="none"?s.removeAttribute("style"):s.style.removeProperty("display")})});let d=()=>{s._x_doHide(),s._x_isShown=!1},A=()=>{s._x_doShow(),s._x_isShown=!0},m=()=>setTimeout(A),S=yi(N=>N?A():d(),N=>{typeof s._x_toggleAndCascadeWithTransitions=="function"?s._x_toggleAndCascadeWithTransitions(s,N,A,d):N?m():d()}),C,_=!0;h(()=>g(N=>{!_&&N===C||(a.includes("immediate")&&(N?m():d()),S(N),C=N,_=!1)}))});Ue("for",(s,{expression:a},{effect:l,cleanup:h})=>{let g=l1(a),d=st(s,g.items),A=st(s,s._x_keyExpression||"index");s._x_prevKeys=[],s._x_lookup={},l(()=>c1(s,g,d,A)),h(()=>{Object.values(s._x_lookup).forEach(m=>Re(()=>{Bn(m),m.remove()})),delete s._x_prevKeys,delete s._x_lookup})});function c1(s,a,l,h){let g=A=>typeof A=="object"&&!Array.isArray(A),d=s;l(A=>{u1(A)&&A>=0&&(A=Array.from(Array(A).keys(),j=>j+1)),A===void 0&&(A=[]);let m=s._x_lookup,S=s._x_prevKeys,C=[],_=[];if(g(A))A=Object.entries(A).map(([j,ie])=>{let Q=Ps(a,ie,j,A);h(W=>{_.includes(W)&&mt("Duplicate key on x-for",s),_.push(W)},{scope:{index:j,...Q}}),C.push(Q)});else for(let j=0;j<A.length;j++){let ie=Ps(a,A[j],j,A);h(Q=>{_.includes(Q)&&mt("Duplicate key on x-for",s),_.push(Q)},{scope:{index:j,...ie}}),C.push(ie)}let N=[],z=[],Y=[],Ae=[];for(let j=0;j<S.length;j++){let ie=S[j];_.indexOf(ie)===-1&&Y.push(ie)}S=S.filter(j=>!Y.includes(j));let q="template";for(let j=0;j<_.length;j++){let ie=_[j],Q=S.indexOf(ie);if(Q===-1)S.splice(j,0,ie),N.push([q,j]);else if(Q!==j){let W=S.splice(j,1)[0],ne=S.splice(Q-1,1)[0];S.splice(j,0,ne),S.splice(Q,0,W),z.push([W,ne])}else Ae.push(ie);q=ie}for(let j=0;j<Y.length;j++){let ie=Y[j];ie in m&&(Re(()=>{Bn(m[ie]),m[ie].remove()}),delete m[ie])}for(let j=0;j<z.length;j++){let[ie,Q]=z[j],W=m[ie],ne=m[Q],et=document.createElement("div");Re(()=>{ne||mt('x-for ":key" is undefined or invalid',d,Q,m),ne.after(et),W.after(ne),ne._x_currentIfEl&&ne.after(ne._x_currentIfEl),et.before(W),W._x_currentIfEl&&W.after(W._x_currentIfEl),et.remove()}),ne._x_refreshXForScope(C[_.indexOf(Q)])}for(let j=0;j<N.length;j++){let[ie,Q]=N[j],W=ie==="template"?d:m[ie];W._x_currentIfEl&&(W=W._x_currentIfEl);let ne=C[Q],et=_[Q],ue=document.importNode(d.content,!0).firstElementChild,U=Dn(ne);rr(ue,U,d),ue._x_refreshXForScope=de=>{Object.entries(de).forEach(([k,Ht])=>{U[k]=Ht})},Re(()=>{W.after(ue),tn(()=>Ut(ue))()}),typeof et=="object"&&mt("x-for key cannot be an object, it must be a string or an integer",d),m[et]=ue}for(let j=0;j<Ae.length;j++)m[Ae[j]]._x_refreshXForScope(C[_.indexOf(Ae[j])]);d._x_prevKeys=_})}function l1(s){let a=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,l=/^\s*\(|\)\s*$/g,h=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,g=s.match(h);if(!g)return;let d={};d.items=g[2].trim();let A=g[1].replace(l,"").trim(),m=A.match(a);return m?(d.item=A.replace(a,"").trim(),d.index=m[1].trim(),m[2]&&(d.collection=m[2].trim())):d.item=A,d}function Ps(s,a,l,h){let g={};return/^\[.*\]$/.test(s.item)&&Array.isArray(a)?s.item.replace("[","").replace("]","").split(",").map(A=>A.trim()).forEach((A,m)=>{g[A]=a[m]}):/^\{.*\}$/.test(s.item)&&!Array.isArray(a)&&typeof a=="object"?s.item.replace("{","").replace("}","").split(",").map(A=>A.trim()).forEach(A=>{g[A]=a[A]}):g[s.item]=a,s.index&&(g[s.index]=l),s.collection&&(g[s.collection]=h),g}function u1(s){return!Array.isArray(s)&&!isNaN(s)}function ga(){}ga.inline=(s,{expression:a},{cleanup:l})=>{let h=vr(s);h._x_refs||(h._x_refs={}),h._x_refs[a]=s,l(()=>delete h._x_refs[a])};Ue("ref",ga);Ue("if",(s,{expression:a},{effect:l,cleanup:h})=>{s.tagName.toLowerCase()!=="template"&&mt("x-if can only be used on a <template> tag",s);let g=st(s,a),d=()=>{if(s._x_currentIfEl)return s._x_currentIfEl;let m=s.content.cloneNode(!0).firstElementChild;return rr(m,{},s),Re(()=>{s.after(m),tn(()=>Ut(m))()}),s._x_currentIfEl=m,s._x_undoIf=()=>{Re(()=>{Bn(m),m.remove()}),delete s._x_currentIfEl},m},A=()=>{s._x_undoIf&&(s._x_undoIf(),delete s._x_undoIf)};l(()=>g(m=>{m?d():A()})),h(()=>s._x_undoIf&&s._x_undoIf())});Ue("id",(s,{expression:a},{evaluate:l})=>{l(a).forEach(g=>Kl(s,g))});Br((s,a)=>{s._x_ids&&(a._x_ids=s._x_ids)});Ui(yo("@",So(vn("on:"))));Ue("on",tn((s,{value:a,modifiers:l,expression:h},{cleanup:g})=>{let d=h?st(s,h):()=>{};s.tagName.toLowerCase()==="template"&&(s._x_forwardEvents||(s._x_forwardEvents=[]),s._x_forwardEvents.includes(a)||s._x_forwardEvents.push(a));let A=Mi(s,a,l,m=>{d(()=>{},{scope:{$event:m},params:[m]})});g(()=>A())}));Ur("Collapse","collapse","collapse");Ur("Intersect","intersect","intersect");Ur("Focus","trap","focus");Ur("Mask","mask","mask");function Ur(s,a,l){Ue(a,h=>mt(`You can't use [x-${a}] without first installing the "${s}" plugin here: https://alpinejs.dev/plugins/${l}`,h))}sr.setEvaluator(Co);sr.setReactivityEngine({reactive:qi,effect:Il,release:yl,raw:Me});var f1=sr,Ji=f1;function h1(s){let a=()=>{let l,h;try{h=localStorage}catch(g){console.error(g),console.warn("Alpine: $persist is using temporary storage since localStorage is unavailable.");let d=new Map;h={getItem:d.get.bind(d),setItem:d.set.bind(d)}}return s.interceptor((g,d,A,m,S)=>{let C=l||`_x_${m}`,_=Fs(C,h)?ks(C,h):g;return A(_),s.effect(()=>{let N=d();Us(C,N,h),A(N)}),_},g=>{g.as=d=>(l=d,g),g.using=d=>(h=d,g)})};Object.defineProperty(s,"$persist",{get:()=>a()}),s.magic("persist",a),s.persist=(l,{get:h,set:g},d=localStorage)=>{let A=Fs(l,d)?ks(l,d):h();g(A),s.effect(()=>{let m=h();Us(l,m,d),g(m)})}}function Fs(s,a){return a.getItem(s)!==null}function ks(s,a){let l=a.getItem(s,a);if(l!==void 0)return JSON.parse(l)}function Us(s,a,l){l.setItem(s,JSON.stringify(a))}var d1=h1;function g1(s){s.directive("collapse",a),a.inline=(l,{modifiers:h})=>{h.includes("min")&&(l._x_doShow=()=>{},l._x_doHide=()=>{})};function a(l,{modifiers:h}){let g=Hs(h,"duration",250)/1e3,d=Hs(h,"min",0),A=!h.includes("min");l._x_isShown||(l.style.height=`${d}px`),!l._x_isShown&&A&&(l.hidden=!0),l._x_isShown||(l.style.overflow="hidden");let m=(C,_)=>{let N=s.setStyles(C,_);return _.height?()=>{}:N},S={transitionProperty:"height",transitionDuration:`${g}s`,transitionTimingFunction:"cubic-bezier(0.4, 0.0, 0.2, 1)"};l._x_transition={in(C=()=>{},_=()=>{}){A&&(l.hidden=!1),A&&(l.style.display=null);let N=l.getBoundingClientRect().height;l.style.height="auto";let z=l.getBoundingClientRect().height;N===z&&(N=d),s.transition(l,s.setStyles,{during:S,start:{height:N+"px"},end:{height:z+"px"}},()=>l._x_isShown=!0,()=>{Math.abs(l.getBoundingClientRect().height-z)<1&&(l.style.overflow=null)})},out(C=()=>{},_=()=>{}){let N=l.getBoundingClientRect().height;s.transition(l,m,{during:S,start:{height:N+"px"},end:{height:d+"px"}},()=>l.style.overflow="hidden",()=>{l._x_isShown=!1,l.style.height==`${d}px`&&A&&(l.style.display="none",l.hidden=!0)})}}}}function Hs(s,a,l){if(s.indexOf(a)===-1)return l;const h=s[s.indexOf(a)+1];if(!h)return l;if(a==="duration"){let g=h.match(/([0-9]+)ms/);if(g)return g[1]}if(a==="min"){let g=h.match(/([0-9]+)px/);if(g)return g[1]}return h}var x1=g1,G;(function(s){s[s.QR_CODE=0]="QR_CODE",s[s.AZTEC=1]="AZTEC",s[s.CODABAR=2]="CODABAR",s[s.CODE_39=3]="CODE_39",s[s.CODE_93=4]="CODE_93",s[s.CODE_128=5]="CODE_128",s[s.DATA_MATRIX=6]="DATA_MATRIX",s[s.MAXICODE=7]="MAXICODE",s[s.ITF=8]="ITF",s[s.EAN_13=9]="EAN_13",s[s.EAN_8=10]="EAN_8",s[s.PDF_417=11]="PDF_417",s[s.RSS_14=12]="RSS_14",s[s.RSS_EXPANDED=13]="RSS_EXPANDED",s[s.UPC_A=14]="UPC_A",s[s.UPC_E=15]="UPC_E",s[s.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(G||(G={}));var zs=new Map([[G.QR_CODE,"QR_CODE"],[G.AZTEC,"AZTEC"],[G.CODABAR,"CODABAR"],[G.CODE_39,"CODE_39"],[G.CODE_93,"CODE_93"],[G.CODE_128,"CODE_128"],[G.DATA_MATRIX,"DATA_MATRIX"],[G.MAXICODE,"MAXICODE"],[G.ITF,"ITF"],[G.EAN_13,"EAN_13"],[G.EAN_8,"EAN_8"],[G.PDF_417,"PDF_417"],[G.RSS_14,"RSS_14"],[G.RSS_EXPANDED,"RSS_EXPANDED"],[G.UPC_A,"UPC_A"],[G.UPC_E,"UPC_E"],[G.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),js;(function(s){s[s.UNKNOWN=0]="UNKNOWN",s[s.URL=1]="URL"})(js||(js={}));function w1(s){return Object.values(G).includes(s)}var en;(function(s){s[s.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",s[s.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(en||(en={}));var bt=function(){function s(){}return s.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",s.SCAN_DEFAULT_FPS=2,s.DEFAULT_DISABLE_FLIP=!1,s.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,s.DEFAULT_SUPPORTED_SCAN_TYPE=[en.SCAN_TYPE_CAMERA,en.SCAN_TYPE_FILE],s}(),xa=function(){function s(a,l){this.format=a,this.formatName=l}return s.prototype.toString=function(){return this.formatName},s.create=function(a){if(!zs.has(a))throw"".concat(a," not in html5QrcodeSupportedFormatsTextMap");return new s(a,zs.get(a))},s}(),Vs=function(){function s(){}return s.createFromText=function(a){var l={text:a};return{decodedText:a,result:l}},s.createFromQrcodeResult=function(a){return{decodedText:a.text,result:a}},s}(),Oi;(function(s){s[s.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",s[s.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",s[s.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(Oi||(Oi={}));var wa=function(){function s(){}return s.createFrom=function(a){return{errorMessage:a,type:Oi.UNKWOWN_ERROR}},s}(),pa=function(){function s(a){this.verbose=a}return s.prototype.log=function(a){this.verbose&&console.log(a)},s.prototype.warn=function(a){this.verbose&&console.warn(a)},s.prototype.logError=function(a,l){(this.verbose||l===!0)&&console.error(a)},s.prototype.logErrors=function(a){if(a.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(a)},s}();function Bt(s){return typeof s>"u"||s===null}function p1(s,a,l){return s>l?l:s<a?a:s}var Nn=function(){function s(){}return s.codeParseError=function(a){return"QR code parse error, error = ".concat(a)},s.errorGettingUserMedia=function(a){return"Error getting userMedia, error = ".concat(a)},s.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},s.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},s.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},s.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},s.scannerPaused=function(){return"Scanner paused"},s}(),Ce=function(){function s(){}return s.scanningStatus=function(){return"Scanning"},s.idleStatus=function(){return"Idle"},s.errorStatus=function(){return"Error"},s.permissionStatus=function(){return"Permission"},s.noCameraFoundErrorStatus=function(){return"No Cameras"},s.lastMatch=function(a){return"Last Match: ".concat(a)},s.codeScannerTitle=function(){return"Code Scanner"},s.cameraPermissionTitle=function(){return"Request Camera Permissions"},s.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},s.noCameraFound=function(){return"No camera found"},s.scanButtonStopScanningText=function(){return"Stop Scanning"},s.scanButtonStartScanningText=function(){return"Start Scanning"},s.torchOnButton=function(){return"Switch On Torch"},s.torchOffButton=function(){return"Switch Off Torch"},s.torchOnFailedMessage=function(){return"Failed to turn on torch"},s.torchOffFailedMessage=function(){return"Failed to turn off torch"},s.scanButtonScanningStarting=function(){return"Launching Camera..."},s.textIfCameraScanSelected=function(){return"Scan an Image File"},s.textIfFileScanSelected=function(){return"Scan using camera directly"},s.selectCamera=function(){return"Select Camera"},s.fileSelectionChooseImage=function(){return"Choose Image"},s.fileSelectionChooseAnother=function(){return"Choose Another"},s.fileSelectionNoImageSelected=function(){return"No image choosen"},s.anonymousCameraPrefix=function(){return"Anonymous Camera"},s.dragAndDropMessage=function(){return"Or drop an image to scan"},s.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},s.zoom=function(){return"zoom"},s.loadingImage=function(){return"Loading image..."},s.cameraScanAltText=function(){return"Camera based scan"},s.fileScanAltText=function(){return"Fule based scan"},s}(),Gs=function(){function s(){}return s.poweredBy=function(){return"Powered by "},s.reportIssues=function(){return"Report issues"},s}(),Aa=function(){function s(){}return s.isMediaStreamConstraintsValid=function(a,l){if(typeof a!="object"){var h=typeof a;return l.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(h,"."),!0),!1}for(var g=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],d=new Set(g),A=Object.keys(a),m=0,S=A;m<S.length;m++){var C=S[m];if(d.has(C))return l.logError("".concat(C," is not supported videoConstaints."),!0),!1}return!0},s}(),Sr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function A1(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var $n={exports:{}},C1=$n.exports,Ws;function E1(){return Ws||(Ws=1,function(s,a){(function(l,h){h(a)})(C1,function(l){function h(w){return w==null}var g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,e){w.__proto__=e}||function(w,e){for(var t in e)e.hasOwnProperty(t)&&(w[t]=e[t])};function d(w,e){g(w,e);function t(){this.constructor=w}w.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function A(w,e){var t=Object.setPrototypeOf;t?t(w,e):w.__proto__=e}function m(w,e){e===void 0&&(e=w.constructor);var t=Error.captureStackTrace;t&&t(w,e)}var S=function(w){d(e,w);function e(t){var n=this.constructor,r=w.call(this,t)||this;return Object.defineProperty(r,"name",{value:n.name,enumerable:!1}),A(r,n.prototype),m(r),r}return e}(Error);class C extends S{constructor(e=void 0){super(e),this.message=e}getKind(){return this.constructor.kind}}C.kind="Exception";class _ extends C{}_.kind="ArgumentException";class N extends C{}N.kind="IllegalArgumentException";class z{constructor(e){if(this.binarizer=e,e===null)throw new N("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(e,t){return this.binarizer.getBlackRow(e,t)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(e,t,n,r){const i=this.binarizer.getLuminanceSource().crop(e,t,n,r);return new z(this.binarizer.createBinarizer(i))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new z(this.binarizer.createBinarizer(e))}rotateCounterClockwise45(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new z(this.binarizer.createBinarizer(e))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class Y extends C{static getChecksumInstance(){return new Y}}Y.kind="ChecksumException";class Ae{constructor(e){this.source=e}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class q{static arraycopy(e,t,n,r,i){for(;i--;)n[r++]=e[t++]}static currentTimeMillis(){return Date.now()}}class j extends C{}j.kind="IndexOutOfBoundsException";class ie extends j{constructor(e=void 0,t=void 0){super(t),this.index=e,this.message=t}}ie.kind="ArrayIndexOutOfBoundsException";class Q{static fill(e,t){for(let n=0,r=e.length;n<r;n++)e[n]=t}static fillWithin(e,t,n,r){Q.rangeCheck(e.length,t,n);for(let i=t;i<n;i++)e[i]=r}static rangeCheck(e,t,n){if(t>n)throw new N("fromIndex("+t+") > toIndex("+n+")");if(t<0)throw new ie(t);if(n>e)throw new ie(n)}static asList(...e){return e}static create(e,t,n){return Array.from({length:e}).map(i=>Array.from({length:t}).fill(n))}static createInt32Array(e,t,n){return Array.from({length:e}).map(i=>Int32Array.from({length:t}).fill(n))}static equals(e,t){if(!e||!t||!e.length||!t.length||e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}static hashCode(e){if(e===null)return 0;let t=1;for(const n of e)t=31*t+n;return t}static fillUint8Array(e,t){for(let n=0;n!==e.length;n++)e[n]=t}static copyOf(e,t){return e.slice(0,t)}static copyOfUint8Array(e,t){if(e.length<=t){const n=new Uint8Array(t);return n.set(e),n}return e.slice(0,t)}static copyOfRange(e,t,n){const r=n-t,i=new Int32Array(r);return q.arraycopy(e,t,i,0,r),i}static binarySearch(e,t,n){n===void 0&&(n=Q.numberComparator);let r=0,i=e.length-1;for(;r<=i;){const o=i+r>>1,c=n(t,e[o]);if(c>0)r=o+1;else if(c<0)i=o-1;else return o}return-r-1}static numberComparator(e,t){return e-t}}class W{static numberOfTrailingZeros(e){let t;if(e===0)return 32;let n=31;return t=e<<16,t!==0&&(n-=16,e=t),t=e<<8,t!==0&&(n-=8,e=t),t=e<<4,t!==0&&(n-=4,e=t),t=e<<2,t!==0&&(n-=2,e=t),n-(e<<1>>>31)}static numberOfLeadingZeros(e){if(e===0)return 32;let t=1;return e>>>16||(t+=16,e<<=16),e>>>24||(t+=8,e<<=8),e>>>28||(t+=4,e<<=4),e>>>30||(t+=2,e<<=2),t-=e>>>31,t}static toHexString(e){return e.toString(16)}static toBinaryString(e){return String(parseInt(String(e),2))}static bitCount(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63}static truncDivision(e,t){return Math.trunc(e/t)}static parseInt(e,t=void 0){return parseInt(e,t)}}W.MIN_VALUE_32_BITS=-2147483648,W.MAX_VALUE=Number.MAX_SAFE_INTEGER;class ne{constructor(e,t){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,t==null?this.bits=ne.makeArray(e):this.bits=t)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(e){if(e>this.bits.length*32){const t=ne.makeArray(e);q.arraycopy(this.bits,0,t,0,this.bits.length),this.bits=t}}get(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0}set(e){this.bits[Math.floor(e/32)]|=1<<(e&31)}flip(e){this.bits[Math.floor(e/32)]^=1<<(e&31)}getNextSet(e){const t=this.size;if(e>=t)return t;const n=this.bits;let r=Math.floor(e/32),i=n[r];i&=~((1<<(e&31))-1);const o=n.length;for(;i===0;){if(++r===o)return t;i=n[r]}const c=r*32+W.numberOfTrailingZeros(i);return c>t?t:c}getNextUnset(e){const t=this.size;if(e>=t)return t;const n=this.bits;let r=Math.floor(e/32),i=~n[r];i&=~((1<<(e&31))-1);const o=n.length;for(;i===0;){if(++r===o)return t;i=~n[r]}const c=r*32+W.numberOfTrailingZeros(i);return c>t?t:c}setBulk(e,t){this.bits[Math.floor(e/32)]=t}setRange(e,t){if(t<e||e<0||t>this.size)throw new N;if(t===e)return;t--;const n=Math.floor(e/32),r=Math.floor(t/32),i=this.bits;for(let o=n;o<=r;o++){const c=o>n?0:e&31,f=(2<<(o<r?31:t&31))-(1<<c);i[o]|=f}}clear(){const e=this.bits.length,t=this.bits;for(let n=0;n<e;n++)t[n]=0}isRange(e,t,n){if(t<e||e<0||t>this.size)throw new N;if(t===e)return!0;t--;const r=Math.floor(e/32),i=Math.floor(t/32),o=this.bits;for(let c=r;c<=i;c++){const u=c>r?0:e&31,x=(2<<(c<i?31:t&31))-(1<<u)&4294967295;if((o[c]&x)!==(n?x:0))return!1}return!0}appendBit(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(e,t){if(t<0||t>32)throw new N("Num bits must be between 0 and 32");this.ensureCapacity(this.size+t);for(let n=t;n>0;n--)this.appendBit((e>>n-1&1)===1)}appendBitArray(e){const t=e.size;this.ensureCapacity(this.size+t);for(let n=0;n<t;n++)this.appendBit(e.get(n))}xor(e){if(this.size!==e.size)throw new N("Sizes don't match");const t=this.bits;for(let n=0,r=t.length;n<r;n++)t[n]^=e.bits[n]}toBytes(e,t,n,r){for(let i=0;i<r;i++){let o=0;for(let c=0;c<8;c++)this.get(e)&&(o|=1<<7-c),e++;t[n+i]=o}}getBitArray(){return this.bits}reverse(){const e=new Int32Array(this.bits.length),t=Math.floor((this.size-1)/32),n=t+1,r=this.bits;for(let i=0;i<n;i++){let o=r[i];o=o>>1&1431655765|(o&1431655765)<<1,o=o>>2&858993459|(o&858993459)<<2,o=o>>4&252645135|(o&252645135)<<4,o=o>>8&16711935|(o&16711935)<<8,o=o>>16&65535|(o&65535)<<16,e[t-i]=o}if(this.size!==n*32){const i=n*32-this.size;let o=e[0]>>>i;for(let c=1;c<n;c++){const u=e[c];o|=u<<32-i,e[c-1]=o,o=u>>>i}e[n-1]=o}this.bits=e}static makeArray(e){return new Int32Array(Math.floor((e+31)/32))}equals(e){if(!(e instanceof ne))return!1;const t=e;return this.size===t.size&&Q.equals(this.bits,t.bits)}hashCode(){return 31*this.size+Q.hashCode(this.bits)}toString(){let e="";for(let t=0,n=this.size;t<n;t++)(t&7)===0&&(e+=" "),e+=this.get(t)?"X":".";return e}clone(){return new ne(this.size,this.bits.slice())}}var et;(function(w){w[w.OTHER=0]="OTHER",w[w.PURE_BARCODE=1]="PURE_BARCODE",w[w.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",w[w.TRY_HARDER=3]="TRY_HARDER",w[w.CHARACTER_SET=4]="CHARACTER_SET",w[w.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",w[w.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",w[w.ASSUME_GS1=7]="ASSUME_GS1",w[w.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",w[w.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",w[w.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(et||(et={}));var ue=et;class U extends C{static getFormatInstance(){return new U}}U.kind="FormatException";var de;(function(w){w[w.Cp437=0]="Cp437",w[w.ISO8859_1=1]="ISO8859_1",w[w.ISO8859_2=2]="ISO8859_2",w[w.ISO8859_3=3]="ISO8859_3",w[w.ISO8859_4=4]="ISO8859_4",w[w.ISO8859_5=5]="ISO8859_5",w[w.ISO8859_6=6]="ISO8859_6",w[w.ISO8859_7=7]="ISO8859_7",w[w.ISO8859_8=8]="ISO8859_8",w[w.ISO8859_9=9]="ISO8859_9",w[w.ISO8859_10=10]="ISO8859_10",w[w.ISO8859_11=11]="ISO8859_11",w[w.ISO8859_13=12]="ISO8859_13",w[w.ISO8859_14=13]="ISO8859_14",w[w.ISO8859_15=14]="ISO8859_15",w[w.ISO8859_16=15]="ISO8859_16",w[w.SJIS=16]="SJIS",w[w.Cp1250=17]="Cp1250",w[w.Cp1251=18]="Cp1251",w[w.Cp1252=19]="Cp1252",w[w.Cp1256=20]="Cp1256",w[w.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",w[w.UTF8=22]="UTF8",w[w.ASCII=23]="ASCII",w[w.Big5=24]="Big5",w[w.GB18030=25]="GB18030",w[w.EUC_KR=26]="EUC_KR"})(de||(de={}));class k{constructor(e,t,n,...r){this.valueIdentifier=e,this.name=n,typeof t=="number"?this.values=Int32Array.from([t]):this.values=t,this.otherEncodingNames=r,k.VALUE_IDENTIFIER_TO_ECI.set(e,this),k.NAME_TO_ECI.set(n,this);const i=this.values;for(let o=0,c=i.length;o!==c;o++){const u=i[o];k.VALUES_TO_ECI.set(u,this)}for(const o of r)k.NAME_TO_ECI.set(o,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(e){if(e<0||e>=900)throw new U("incorect value");const t=k.VALUES_TO_ECI.get(e);if(t===void 0)throw new U("incorect value");return t}static getCharacterSetECIByName(e){const t=k.NAME_TO_ECI.get(e);if(t===void 0)throw new U("incorect value");return t}equals(e){if(!(e instanceof k))return!1;const t=e;return this.getName()===t.getName()}}k.VALUE_IDENTIFIER_TO_ECI=new Map,k.VALUES_TO_ECI=new Map,k.NAME_TO_ECI=new Map,k.Cp437=new k(de.Cp437,Int32Array.from([0,2]),"Cp437"),k.ISO8859_1=new k(de.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),k.ISO8859_2=new k(de.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),k.ISO8859_3=new k(de.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),k.ISO8859_4=new k(de.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),k.ISO8859_5=new k(de.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),k.ISO8859_6=new k(de.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),k.ISO8859_7=new k(de.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),k.ISO8859_8=new k(de.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),k.ISO8859_9=new k(de.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),k.ISO8859_10=new k(de.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),k.ISO8859_11=new k(de.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),k.ISO8859_13=new k(de.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),k.ISO8859_14=new k(de.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),k.ISO8859_15=new k(de.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),k.ISO8859_16=new k(de.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),k.SJIS=new k(de.SJIS,20,"SJIS","Shift_JIS"),k.Cp1250=new k(de.Cp1250,21,"Cp1250","windows-1250"),k.Cp1251=new k(de.Cp1251,22,"Cp1251","windows-1251"),k.Cp1252=new k(de.Cp1252,23,"Cp1252","windows-1252"),k.Cp1256=new k(de.Cp1256,24,"Cp1256","windows-1256"),k.UnicodeBigUnmarked=new k(de.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),k.UTF8=new k(de.UTF8,26,"UTF8","UTF-8"),k.ASCII=new k(de.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),k.Big5=new k(de.Big5,28,"Big5"),k.GB18030=new k(de.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),k.EUC_KR=new k(de.EUC_KR,30,"EUC_KR","EUC-KR");class Ht extends C{}Ht.kind="UnsupportedOperationException";class ot{static decode(e,t){const n=this.encodingName(t);return this.customDecoder?this.customDecoder(e,n):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(n)?this.decodeFallback(e,n):new TextDecoder(n).decode(e)}static shouldDecodeOnFallback(e){return!ot.isBrowser()&&e==="ISO-8859-1"}static encode(e,t){const n=this.encodingName(t);return this.customEncoder?this.customEncoder(e,n):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(e){return typeof e=="string"?e:e.getName()}static encodingCharacterSet(e){return e instanceof k?e:k.getCharacterSetECIByName(e)}static decodeFallback(e,t){const n=this.encodingCharacterSet(t);if(ot.isDecodeFallbackSupported(n)){let r="";for(let i=0,o=e.length;i<o;i++){let c=e[i].toString(16);c.length<2&&(c="0"+c),r+="%"+c}return decodeURIComponent(r)}if(n.equals(k.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new Ht(`Encoding ${this.encodingName(t)} not supported by fallback.`)}static isDecodeFallbackSupported(e){return e.equals(k.UTF8)||e.equals(k.ISO8859_1)||e.equals(k.ASCII)}static encodeFallback(e){const n=btoa(unescape(encodeURIComponent(e))).split(""),r=[];for(let i=0;i<n.length;i++)r.push(n[i].charCodeAt(0));return new Uint8Array(r)}}class te{static castAsNonUtf8Char(e,t=null){const n=t?t.getName():this.ISO88591;return ot.decode(new Uint8Array([e]),n)}static guessEncoding(e,t){if(t!=null&&t.get(ue.CHARACTER_SET)!==void 0)return t.get(ue.CHARACTER_SET).toString();const n=e.length;let r=!0,i=!0,o=!0,c=0,u=0,f=0,x=0,p=0,E=0,y=0,b=0,T=0,M=0,R=0;const P=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191;for(let F=0;F<n&&(r||i||o);F++){const B=e[F]&255;o&&(c>0?(B&128)===0?o=!1:c--:(B&128)!==0&&((B&64)===0?o=!1:(c++,(B&32)===0?u++:(c++,(B&16)===0?f++:(c++,(B&8)===0?x++:o=!1))))),r&&(B>127&&B<160?r=!1:B>159&&(B<192||B===215||B===247)&&R++),i&&(p>0?B<64||B===127||B>252?i=!1:p--:B===128||B===160||B>239?i=!1:B>160&&B<224?(E++,b=0,y++,y>T&&(T=y)):B>127?(p++,y=0,b++,b>M&&(M=b)):(y=0,b=0))}return o&&c>0&&(o=!1),i&&p>0&&(i=!1),o&&(P||u+f+x>0)?te.UTF8:i&&(te.ASSUME_SHIFT_JIS||T>=3||M>=3)?te.SHIFT_JIS:r&&i?T===2&&E===2||R*10>=n?te.SHIFT_JIS:te.ISO88591:r?te.ISO88591:i?te.SHIFT_JIS:o?te.UTF8:te.PLATFORM_DEFAULT_ENCODING}static format(e,...t){let n=-1;function r(o,c,u,f,x,p){if(o==="%%")return"%";if(t[++n]===void 0)return;o=f?parseInt(f.substr(1)):void 0;let E=x?parseInt(x.substr(1)):void 0,y;switch(p){case"s":y=t[n];break;case"c":y=t[n][0];break;case"f":y=parseFloat(t[n]).toFixed(o);break;case"p":y=parseFloat(t[n]).toPrecision(o);break;case"e":y=parseFloat(t[n]).toExponential(o);break;case"x":y=parseInt(t[n]).toString(E||16);break;case"d":y=parseFloat(parseInt(t[n],E||10).toPrecision(o)).toFixed(0);break}y=typeof y=="object"?JSON.stringify(y):(+y).toString(E);let b=parseInt(u),T=u&&u[0]+""=="0"?"0":" ";for(;y.length<b;)y=c!==void 0?y+T:T+y;return y}let i=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(i,r)}static getBytes(e,t){return ot.encode(e,t)}static getCharCode(e,t=0){return e.charCodeAt(t)}static getCharAt(e){return String.fromCharCode(e)}}te.SHIFT_JIS=k.SJIS.getName(),te.GB2312="GB2312",te.ISO88591=k.ISO8859_1.getName(),te.EUC_JP="EUC_JP",te.UTF8=k.UTF8.getName(),te.PLATFORM_DEFAULT_ENCODING=te.UTF8,te.ASSUME_SHIFT_JIS=!1;class Ee{constructor(e=""){this.value=e}enableDecoding(e){return this.encoding=e,this}append(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=te.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this}appendChars(e,t,n){for(let r=t;t<t+n;r++)this.append(e[r]);return this}length(){return this.value.length}charAt(e){return this.value.charAt(e)}deleteCharAt(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)}setCharAt(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+1)}substring(e,t){return this.value.substring(e,t)}setLengthToZero(){this.value=""}toString(){return this.value}insert(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+t.length)}}class Ve{constructor(e,t,n,r){if(this.width=e,this.height=t,this.rowSize=n,this.bits=r,t==null&&(t=e),this.height=t,e<1||t<1)throw new N("Both dimensions must be greater than 0");n==null&&(n=Math.floor((e+31)/32)),this.rowSize=n,r==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(e){const t=e.length,n=e[0].length,r=new Ve(n,t);for(let i=0;i<t;i++){const o=e[i];for(let c=0;c<n;c++)o[c]&&r.set(c,i)}return r}static parseFromString(e,t,n){if(e===null)throw new N("stringRepresentation cannot be null");const r=new Array(e.length);let i=0,o=0,c=-1,u=0,f=0;for(;f<e.length;)if(e.charAt(f)===`
`||e.charAt(f)==="\r"){if(i>o){if(c===-1)c=i-o;else if(i-o!==c)throw new N("row lengths do not match");o=i,u++}f++}else if(e.substring(f,f+t.length)===t)f+=t.length,r[i]=!0,i++;else if(e.substring(f,f+n.length)===n)f+=n.length,r[i]=!1,i++;else throw new N("illegal character encountered: "+e.substring(f));if(i>o){if(c===-1)c=i-o;else if(i-o!==c)throw new N("row lengths do not match");u++}const x=new Ve(c,u);for(let p=0;p<i;p++)r[p]&&x.set(Math.floor(p%c),Math.floor(p/c));return x}get(e,t){const n=t*this.rowSize+Math.floor(e/32);return(this.bits[n]>>>(e&31)&1)!==0}set(e,t){const n=t*this.rowSize+Math.floor(e/32);this.bits[n]|=1<<(e&31)&4294967295}unset(e,t){const n=t*this.rowSize+Math.floor(e/32);this.bits[n]&=~(1<<(e&31)&4294967295)}flip(e,t){const n=t*this.rowSize+Math.floor(e/32);this.bits[n]^=1<<(e&31)&4294967295}xor(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new N("input matrix dimensions do not match");const t=new ne(Math.floor(this.width/32)+1),n=this.rowSize,r=this.bits;for(let i=0,o=this.height;i<o;i++){const c=i*n,u=e.getRow(i,t).getBitArray();for(let f=0;f<n;f++)r[c+f]^=u[f]}}clear(){const e=this.bits,t=e.length;for(let n=0;n<t;n++)e[n]=0}setRegion(e,t,n,r){if(t<0||e<0)throw new N("Left and top must be nonnegative");if(r<1||n<1)throw new N("Height and width must be at least 1");const i=e+n,o=t+r;if(o>this.height||i>this.width)throw new N("The region must fit inside the matrix");const c=this.rowSize,u=this.bits;for(let f=t;f<o;f++){const x=f*c;for(let p=e;p<i;p++)u[x+Math.floor(p/32)]|=1<<(p&31)&4294967295}}getRow(e,t){t==null||t.getSize()<this.width?t=new ne(this.width):t.clear();const n=this.rowSize,r=this.bits,i=e*n;for(let o=0;o<n;o++)t.setBulk(o*32,r[i+o]);return t}setRow(e,t){q.arraycopy(t.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)}rotate180(){const e=this.getWidth(),t=this.getHeight();let n=new ne(e),r=new ne(e);for(let i=0,o=Math.floor((t+1)/2);i<o;i++)n=this.getRow(i,n),r=this.getRow(t-1-i,r),n.reverse(),r.reverse(),this.setRow(i,r),this.setRow(t-1-i,n)}getEnclosingRectangle(){const e=this.width,t=this.height,n=this.rowSize,r=this.bits;let i=e,o=t,c=-1,u=-1;for(let f=0;f<t;f++)for(let x=0;x<n;x++){const p=r[f*n+x];if(p!==0){if(f<o&&(o=f),f>u&&(u=f),x*32<i){let E=0;for(;(p<<31-E&4294967295)===0;)E++;x*32+E<i&&(i=x*32+E)}if(x*32+31>c){let E=31;for(;!(p>>>E);)E--;x*32+E>c&&(c=x*32+E)}}}return c<i||u<o?null:Int32Array.from([i,o,c-i+1,u-o+1])}getTopLeftOnBit(){const e=this.rowSize,t=this.bits;let n=0;for(;n<t.length&&t[n]===0;)n++;if(n===t.length)return null;const r=n/e;let i=n%e*32;const o=t[n];let c=0;for(;(o<<31-c&4294967295)===0;)c++;return i+=c,Int32Array.from([i,r])}getBottomRightOnBit(){const e=this.rowSize,t=this.bits;let n=t.length-1;for(;n>=0&&t[n]===0;)n--;if(n<0)return null;const r=Math.floor(n/e);let i=Math.floor(n%e)*32;const o=t[n];let c=31;for(;!(o>>>c);)c--;return i+=c,Int32Array.from([i,r])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(e){if(!(e instanceof Ve))return!1;const t=e;return this.width===t.width&&this.height===t.height&&this.rowSize===t.rowSize&&Q.equals(this.bits,t.bits)}hashCode(){let e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+Q.hashCode(this.bits),e}toString(e="X ",t="  ",n=`
`){return this.buildToString(e,t,n)}buildToString(e,t,n){let r=new Ee;for(let i=0,o=this.height;i<o;i++){for(let c=0,u=this.width;c<u;c++)r.append(this.get(c,i)?e:t);r.append(n)}return r.toString()}clone(){return new Ve(this.width,this.height,this.rowSize,this.bits.slice())}}class v extends C{static getNotFoundInstance(){return new v}}v.kind="NotFoundException";class Ge extends Ae{constructor(e){super(e),this.luminances=Ge.EMPTY,this.buckets=new Int32Array(Ge.LUMINANCE_BUCKETS)}getBlackRow(e,t){const n=this.getLuminanceSource(),r=n.getWidth();t==null||t.getSize()<r?t=new ne(r):t.clear(),this.initArrays(r);const i=n.getRow(e,this.luminances),o=this.buckets;for(let u=0;u<r;u++)o[(i[u]&255)>>Ge.LUMINANCE_SHIFT]++;const c=Ge.estimateBlackPoint(o);if(r<3)for(let u=0;u<r;u++)(i[u]&255)<c&&t.set(u);else{let u=i[0]&255,f=i[1]&255;for(let x=1;x<r-1;x++){const p=i[x+1]&255;(f*4-u-p)/2<c&&t.set(x),u=f,f=p}}return t}getBlackMatrix(){const e=this.getLuminanceSource(),t=e.getWidth(),n=e.getHeight(),r=new Ve(t,n);this.initArrays(t);const i=this.buckets;for(let u=1;u<5;u++){const f=Math.floor(n*u/5),x=e.getRow(f,this.luminances),p=Math.floor(t*4/5);for(let E=Math.floor(t/5);E<p;E++){const y=x[E]&255;i[y>>Ge.LUMINANCE_SHIFT]++}}const o=Ge.estimateBlackPoint(i),c=e.getMatrix();for(let u=0;u<n;u++){const f=u*t;for(let x=0;x<t;x++)(c[f+x]&255)<o&&r.set(x,u)}return r}createBinarizer(e){return new Ge(e)}initArrays(e){this.luminances.length<e&&(this.luminances=new Uint8ClampedArray(e));const t=this.buckets;for(let n=0;n<Ge.LUMINANCE_BUCKETS;n++)t[n]=0}static estimateBlackPoint(e){const t=e.length;let n=0,r=0,i=0;for(let x=0;x<t;x++)e[x]>i&&(r=x,i=e[x]),e[x]>n&&(n=e[x]);let o=0,c=0;for(let x=0;x<t;x++){const p=x-r,E=e[x]*p*p;E>c&&(o=x,c=E)}if(r>o){const x=r;r=o,o=x}if(o-r<=t/16)throw new v;let u=o-1,f=-1;for(let x=o-1;x>r;x--){const p=x-r,E=p*p*(o-x)*(n-e[x]);E>f&&(u=x,f=E)}return u<<Ge.LUMINANCE_SHIFT}}Ge.LUMINANCE_BITS=5,Ge.LUMINANCE_SHIFT=8-Ge.LUMINANCE_BITS,Ge.LUMINANCE_BUCKETS=1<<Ge.LUMINANCE_BITS,Ge.EMPTY=Uint8ClampedArray.from([0]);class se extends Ge{constructor(e){super(e),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const e=this.getLuminanceSource(),t=e.getWidth(),n=e.getHeight();if(t>=se.MINIMUM_DIMENSION&&n>=se.MINIMUM_DIMENSION){const r=e.getMatrix();let i=t>>se.BLOCK_SIZE_POWER;(t&se.BLOCK_SIZE_MASK)!==0&&i++;let o=n>>se.BLOCK_SIZE_POWER;(n&se.BLOCK_SIZE_MASK)!==0&&o++;const c=se.calculateBlackPoints(r,i,o,t,n),u=new Ve(t,n);se.calculateThresholdForBlock(r,i,o,t,n,c,u),this.matrix=u}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(e){return new se(e)}static calculateThresholdForBlock(e,t,n,r,i,o,c){const u=i-se.BLOCK_SIZE,f=r-se.BLOCK_SIZE;for(let x=0;x<n;x++){let p=x<<se.BLOCK_SIZE_POWER;p>u&&(p=u);const E=se.cap(x,2,n-3);for(let y=0;y<t;y++){let b=y<<se.BLOCK_SIZE_POWER;b>f&&(b=f);const T=se.cap(y,2,t-3);let M=0;for(let P=-2;P<=2;P++){const F=o[E+P];M+=F[T-2]+F[T-1]+F[T]+F[T+1]+F[T+2]}const R=M/25;se.thresholdBlock(e,b,p,R,r,c)}}}static cap(e,t,n){return e<t?t:e>n?n:e}static thresholdBlock(e,t,n,r,i,o){for(let c=0,u=n*i+t;c<se.BLOCK_SIZE;c++,u+=i)for(let f=0;f<se.BLOCK_SIZE;f++)(e[u+f]&255)<=r&&o.set(t+f,n+c)}static calculateBlackPoints(e,t,n,r,i){const o=i-se.BLOCK_SIZE,c=r-se.BLOCK_SIZE,u=new Array(n);for(let f=0;f<n;f++){u[f]=new Int32Array(t);let x=f<<se.BLOCK_SIZE_POWER;x>o&&(x=o);for(let p=0;p<t;p++){let E=p<<se.BLOCK_SIZE_POWER;E>c&&(E=c);let y=0,b=255,T=0;for(let R=0,P=x*r+E;R<se.BLOCK_SIZE;R++,P+=r){for(let F=0;F<se.BLOCK_SIZE;F++){const B=e[P+F]&255;y+=B,B<b&&(b=B),B>T&&(T=B)}if(T-b>se.MIN_DYNAMIC_RANGE)for(R++,P+=r;R<se.BLOCK_SIZE;R++,P+=r)for(let F=0;F<se.BLOCK_SIZE;F++)y+=e[P+F]&255}let M=y>>se.BLOCK_SIZE_POWER*2;if(T-b<=se.MIN_DYNAMIC_RANGE&&(M=b/2,f>0&&p>0)){const R=(u[f-1][p]+2*u[f][p-1]+u[f-1][p-1])/4;b<R&&(M=R)}u[f][p]=M}}return u}}se.BLOCK_SIZE_POWER=3,se.BLOCK_SIZE=1<<se.BLOCK_SIZE_POWER,se.BLOCK_SIZE_MASK=se.BLOCK_SIZE-1,se.MINIMUM_DIMENSION=se.BLOCK_SIZE*5,se.MIN_DYNAMIC_RANGE=24;class Pn{constructor(e,t){this.width=e,this.height=t}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(e,t,n,r){throw new Ht("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new Ht("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new Ht("This luminance source does not support rotation by 45 degrees.")}toString(){const e=new Uint8ClampedArray(this.width);let t=new Ee;for(let n=0;n<this.height;n++){const r=this.getRow(n,e);for(let i=0;i<this.width;i++){const o=r[i]&255;let c;o<64?c="#":o<128?c="+":o<192?c=".":c=" ",t.append(c)}t.append(`
`)}return t.toString()}}class zt extends Pn{constructor(e){super(e.getWidth(),e.getHeight()),this.delegate=e}getRow(e,t){const n=this.delegate.getRow(e,t),r=this.getWidth();for(let i=0;i<r;i++)n[i]=255-(n[i]&255);return n}getMatrix(){const e=this.delegate.getMatrix(),t=this.getWidth()*this.getHeight(),n=new Uint8ClampedArray(t);for(let r=0;r<t;r++)n[r]=255-(e[r]&255);return n}isCropSupported(){return this.delegate.isCropSupported()}crop(e,t,n,r){return new zt(this.delegate.crop(e,t,n,r))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new zt(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new zt(this.delegate.rotateCounterClockwise45())}}class jt extends Pn{constructor(e){super(e.width,e.height),this.canvas=e,this.tempCanvasElement=null,this.buffer=jt.makeBufferFromCanvasImageData(e)}static makeBufferFromCanvasImageData(e){const t=e.getContext("2d").getImageData(0,0,e.width,e.height);return jt.toGrayscaleBuffer(t.data,e.width,e.height)}static toGrayscaleBuffer(e,t,n){const r=new Uint8ClampedArray(t*n);for(let i=0,o=0,c=e.length;i<c;i+=4,o++){let u;if(e[i+3]===0)u=255;else{const x=e[i],p=e[i+1],E=e[i+2];u=306*x+601*p+117*E+512>>10}r[o]=u}return r}getRow(e,t){if(e<0||e>=this.getHeight())throw new N("Requested row is outside the image: "+e);const n=this.getWidth(),r=e*n;return t===null?t=this.buffer.slice(r,r+n):(t.length<n&&(t=new Uint8ClampedArray(n)),t.set(this.buffer.slice(r,r+n))),t}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(e,t,n,r){return super.crop(e,t,n,r),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const e=this.canvas.ownerDocument.createElement("canvas");e.width=this.canvas.width,e.height=this.canvas.height,this.tempCanvasElement=e}return this.tempCanvasElement}rotate(e){const t=this.getTempCanvasElement(),n=t.getContext("2d"),r=e*jt.DEGREE_TO_RADIANS,i=this.canvas.width,o=this.canvas.height,c=Math.ceil(Math.abs(Math.cos(r))*i+Math.abs(Math.sin(r))*o),u=Math.ceil(Math.abs(Math.sin(r))*i+Math.abs(Math.cos(r))*o);return t.width=c,t.height=u,n.translate(c/2,u/2),n.rotate(r),n.drawImage(this.canvas,i/-2,o/-2),this.buffer=jt.makeBufferFromCanvasImageData(t),this}invert(){return new zt(this)}}jt.DEGREE_TO_RADIANS=Math.PI/180;class ns{constructor(e,t,n){this.deviceId=e,this.label=t,this.kind="videoinput",this.groupId=n||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var tt=(globalThis||Sr||self||window||void 0)&&(globalThis||Sr||self||window||void 0).__awaiter||function(w,e,t,n){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function c(x){try{f(n.next(x))}catch(p){o(p)}}function u(x){try{f(n.throw(x))}catch(p){o(p)}}function f(x){x.done?i(x.value):r(x.value).then(c,u)}f((n=n.apply(w,e||[])).next())})};class nn{constructor(e,t=500,n){this.reader=e,this.timeBetweenScansMillis=t,this._hints=n,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(e){this._timeBetweenDecodingAttempts=e<0?0:e}set hints(e){this._hints=e||null}get hints(){return this._hints}listVideoInputDevices(){return tt(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const e=yield navigator.mediaDevices.enumerateDevices(),t=[];for(const n of e){const r=n.kind==="video"?"videoinput":n.kind;if(r!=="videoinput")continue;const i=n.deviceId||n.id,o=n.label||`Video device ${t.length+1}`,c=n.groupId,u={deviceId:i,label:o,kind:r,groupId:c};t.push(u)}return t})}getVideoInputDevices(){return tt(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(t=>new ns(t.deviceId,t.label))})}findDeviceById(e){return tt(this,void 0,void 0,function*(){const t=yield this.listVideoInputDevices();return t?t.find(n=>n.deviceId===e):null})}decodeFromInputVideoDevice(e,t){return tt(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(e,t)})}decodeOnceFromVideoDevice(e,t){return tt(this,void 0,void 0,function*(){this.reset();let n;e?n={deviceId:{exact:e}}:n={facingMode:"environment"};const r={video:n};return yield this.decodeOnceFromConstraints(r,t)})}decodeOnceFromConstraints(e,t){return tt(this,void 0,void 0,function*(){const n=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeOnceFromStream(n,t)})}decodeOnceFromStream(e,t){return tt(this,void 0,void 0,function*(){this.reset();const n=yield this.attachStreamToVideo(e,t);return yield this.decodeOnce(n)})}decodeFromInputVideoDeviceContinuously(e,t,n){return tt(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(e,t,n)})}decodeFromVideoDevice(e,t,n){return tt(this,void 0,void 0,function*(){let r;e?r={deviceId:{exact:e}}:r={facingMode:"environment"};const i={video:r};return yield this.decodeFromConstraints(i,t,n)})}decodeFromConstraints(e,t,n){return tt(this,void 0,void 0,function*(){const r=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeFromStream(r,t,n)})}decodeFromStream(e,t,n){return tt(this,void 0,void 0,function*(){this.reset();const r=yield this.attachStreamToVideo(e,t);return yield this.decodeContinuously(r,n)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(e,t){return tt(this,void 0,void 0,function*(){const n=this.prepareVideoElement(t);return this.addVideoSource(n,e),this.videoElement=n,this.stream=e,yield this.playVideoOnLoadAsync(n),n})}playVideoOnLoadAsync(e){return new Promise((t,n)=>this.playVideoOnLoad(e,()=>t()))}playVideoOnLoad(e,t){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(e),e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",t),this.tryPlayVideo(e)}isVideoPlaying(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2}tryPlayVideo(e){return tt(this,void 0,void 0,function*(){if(this.isVideoPlaying(e)){console.warn("Trying to play video that is already playing.");return}try{yield e.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(e,t){const n=document.getElementById(e);if(!n)throw new _(`element with id '${e}' not found`);if(n.nodeName.toLowerCase()!==t.toLowerCase())throw new _(`element with id '${e}' must be an ${t} element`);return n}decodeFromImage(e,t){if(!e&&!t)throw new _("either imageElement with a src set or an url must be provided");return t&&!e?this.decodeFromImageUrl(t):this.decodeFromImageElement(e)}decodeFromVideo(e,t){if(!e&&!t)throw new _("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrl(t):this.decodeFromVideoElement(e)}decodeFromVideoContinuously(e,t,n){if(e===void 0&&t===void 0)throw new _("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrlContinuously(t,n):this.decodeFromVideoElementContinuously(e,n)}decodeFromImageElement(e){if(!e)throw new _("An image element must be provided.");this.reset();const t=this.prepareImageElement(e);this.imageElement=t;let n;return this.isImageLoaded(t)?n=this.decodeOnce(t,!1,!0):n=this._decodeOnLoadImage(t),n}decodeFromVideoElement(e){const t=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(t)}decodeFromVideoElementContinuously(e,t){const n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(n,t)}_decodeFromVideoElementSetup(e){if(!e)throw new _("A video element must be provided.");this.reset();const t=this.prepareVideoElement(e);return this.videoElement=t,t}decodeFromImageUrl(e){if(!e)throw new _("An URL must be provided.");this.reset();const t=this.prepareImageElement();this.imageElement=t;const n=this._decodeOnLoadImage(t);return t.src=e,n}decodeFromVideoUrl(e){if(!e)throw new _("An URL must be provided.");this.reset();const t=this.prepareVideoElement(),n=this.decodeFromVideoElement(t);return t.src=e,n}decodeFromVideoUrlContinuously(e,t){if(!e)throw new _("An URL must be provided.");this.reset();const n=this.prepareVideoElement(),r=this.decodeFromVideoElementContinuously(n,t);return n.src=e,r}_decodeOnLoadImage(e){return new Promise((t,n)=>{this.imageLoadedListener=()=>this.decodeOnce(e,!1,!0).then(t,n),e.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(e){return tt(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(e),yield this.decodeOnce(e)})}_decodeOnLoadVideoContinuously(e,t){return tt(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(e),this.decodeContinuously(e,t)})}isImageLoaded(e){return!(!e.complete||e.naturalWidth===0)}prepareImageElement(e){let t;return typeof e>"u"&&(t=document.createElement("img"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(t=e),t}prepareVideoElement(e){let t;return!e&&typeof document<"u"&&(t=document.createElement("video"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(t=e),t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t}decodeOnce(e,t=!0,n=!0){this._stopAsyncDecode=!1;const r=(i,o)=>{if(this._stopAsyncDecode){o(new v("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const c=this.decode(e);i(c)}catch(c){const u=t&&c instanceof v,x=(c instanceof Y||c instanceof U)&&n;if(u||x)return setTimeout(r,this._timeBetweenDecodingAttempts,i,o);o(c)}};return new Promise((i,o)=>r(i,o))}decodeContinuously(e,t){this._stopContinuousDecode=!1;const n=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const r=this.decode(e);t(r,null),setTimeout(n,this.timeBetweenScansMillis)}catch(r){t(null,r);const i=r instanceof Y||r instanceof U,o=r instanceof v;(i||o)&&setTimeout(n,this._timeBetweenDecodingAttempts)}};n()}decode(e){const t=this.createBinaryBitmap(e);return this.decodeBitmap(t)}_isHTMLVideoElement(e){return e.videoWidth!==0}drawFrameOnCanvas(e,t,n){t||(t={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),n||(n=this.captureCanvasContext),n.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)}drawImageOnCanvas(e,t,n=this.captureCanvasContext){t||(t={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),n||(n=this.captureCanvasContext),n.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)}createBinaryBitmap(e){this.getCaptureCanvasContext(e),this._isHTMLVideoElement(e)?this.drawFrameOnCanvas(e):this.drawImageOnCanvas(e);const t=this.getCaptureCanvas(e),n=new jt(t),r=new se(n);return new z(r)}getCaptureCanvasContext(e){if(!this.captureCanvasContext){const n=this.getCaptureCanvas(e).getContext("2d");this.captureCanvasContext=n}return this.captureCanvasContext}getCaptureCanvas(e){if(!this.captureCanvas){const t=this.createCaptureCanvas(e);this.captureCanvas=t}return this.captureCanvas}decodeBitmap(e){return this.reader.decode(e,this._hints)}createCaptureCanvas(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const t=document.createElement("canvas");let n,r;return typeof e<"u"&&(e instanceof HTMLVideoElement?(n=e.videoWidth,r=e.videoHeight):e instanceof HTMLImageElement&&(n=e.naturalWidth||e.width,r=e.naturalHeight||e.height)),t.style.width=n+"px",t.style.height=r+"px",t.width=n,t.height=r,t}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(e=>e.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(e,t){try{e.srcObject=t}catch{e.src=URL.createObjectURL(t)}}cleanVideoSource(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")}}class nt{constructor(e,t,n=t==null?0:8*t.length,r,i,o=q.currentTimeMillis()){this.text=e,this.rawBytes=t,this.numBits=n,this.resultPoints=r,this.format=i,this.timestamp=o,this.text=e,this.rawBytes=t,n==null?this.numBits=t==null?0:8*t.length:this.numBits=n,this.resultPoints=r,this.format=i,this.resultMetadata=null,o==null?this.timestamp=q.currentTimeMillis():this.timestamp=o}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(e,t){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,t)}putAllMetadata(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))}addResultPoints(e){const t=this.resultPoints;if(t===null)this.resultPoints=e;else if(e!==null&&e.length>0){const n=new Array(t.length+e.length);q.arraycopy(t,0,n,0,t.length),q.arraycopy(e,0,n,t.length,e.length),this.resultPoints=n}}getTimestamp(){return this.timestamp}toString(){return this.text}}var Hr;(function(w){w[w.AZTEC=0]="AZTEC",w[w.CODABAR=1]="CODABAR",w[w.CODE_39=2]="CODE_39",w[w.CODE_93=3]="CODE_93",w[w.CODE_128=4]="CODE_128",w[w.DATA_MATRIX=5]="DATA_MATRIX",w[w.EAN_8=6]="EAN_8",w[w.EAN_13=7]="EAN_13",w[w.ITF=8]="ITF",w[w.MAXICODE=9]="MAXICODE",w[w.PDF_417=10]="PDF_417",w[w.QR_CODE=11]="QR_CODE",w[w.RSS_14=12]="RSS_14",w[w.RSS_EXPANDED=13]="RSS_EXPANDED",w[w.UPC_A=14]="UPC_A",w[w.UPC_E=15]="UPC_E",w[w.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Hr||(Hr={}));var J=Hr,zr;(function(w){w[w.OTHER=0]="OTHER",w[w.ORIENTATION=1]="ORIENTATION",w[w.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",w[w.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",w[w.ISSUE_NUMBER=4]="ISSUE_NUMBER",w[w.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",w[w.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",w[w.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",w[w.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",w[w.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",w[w.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(zr||(zr={}));var We=zr;class Fn{constructor(e,t,n,r,i=-1,o=-1){this.rawBytes=e,this.text=t,this.byteSegments=n,this.ecLevel=r,this.structuredAppendSequenceNumber=i,this.structuredAppendParity=o,this.numBits=e==null?0:8*e.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(e){this.numBits=e}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(e){this.errorsCorrected=e}getErasures(){return this.erasures}setErasures(e){this.erasures=e}getOther(){return this.other}setOther(e){this.other=e}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class kn{exp(e){return this.expTable[e]}log(e){if(e===0)throw new N;return this.logTable[e]}static addOrSubtract(e,t){return e^t}}class at{constructor(e,t){if(t.length===0)throw new N;this.field=e;const n=t.length;if(n>1&&t[0]===0){let r=1;for(;r<n&&t[r]===0;)r++;r===n?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(n-r),q.arraycopy(t,r,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(e===0)return this.getCoefficient(0);const t=this.coefficients;let n;if(e===1){n=0;for(let o=0,c=t.length;o!==c;o++){const u=t[o];n=kn.addOrSubtract(n,u)}return n}n=t[0];const r=t.length,i=this.field;for(let o=1;o<r;o++)n=kn.addOrSubtract(i.multiply(e,n),t[o]);return n}addOrSubtract(e){if(!this.field.equals(e.field))throw new N("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;let t=this.coefficients,n=e.coefficients;if(t.length>n.length){const o=t;t=n,n=o}let r=new Int32Array(n.length);const i=n.length-t.length;q.arraycopy(n,0,r,0,i);for(let o=i;o<n.length;o++)r[o]=kn.addOrSubtract(t[o-i],n[o]);return new at(this.field,r)}multiply(e){if(!this.field.equals(e.field))throw new N("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();const t=this.coefficients,n=t.length,r=e.coefficients,i=r.length,o=new Int32Array(n+i-1),c=this.field;for(let u=0;u<n;u++){const f=t[u];for(let x=0;x<i;x++)o[u+x]=kn.addOrSubtract(o[u+x],c.multiply(f,r[x]))}return new at(c,o)}multiplyScalar(e){if(e===0)return this.field.getZero();if(e===1)return this;const t=this.coefficients.length,n=this.field,r=new Int32Array(t),i=this.coefficients;for(let o=0;o<t;o++)r[o]=n.multiply(i[o],e);return new at(n,r)}multiplyByMonomial(e,t){if(e<0)throw new N;if(t===0)return this.field.getZero();const n=this.coefficients,r=n.length,i=new Int32Array(r+e),o=this.field;for(let c=0;c<r;c++)i[c]=o.multiply(n[c],t);return new at(o,i)}divide(e){if(!this.field.equals(e.field))throw new N("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new N("Divide by 0");const t=this.field;let n=t.getZero(),r=this;const i=e.getCoefficient(e.getDegree()),o=t.inverse(i);for(;r.getDegree()>=e.getDegree()&&!r.isZero();){const c=r.getDegree()-e.getDegree(),u=t.multiply(r.getCoefficient(r.getDegree()),o),f=e.multiplyByMonomial(c,u),x=t.buildMonomial(c,u);n=n.addOrSubtract(x),r=r.addOrSubtract(f)}return[n,r]}toString(){let e="";for(let t=this.getDegree();t>=0;t--){let n=this.getCoefficient(t);if(n!==0){if(n<0?(e+=" - ",n=-n):e.length>0&&(e+=" + "),t===0||n!==1){const r=this.field.log(n);r===0?e+="1":r===1?e+="a":(e+="a^",e+=r)}t!==0&&(t===1?e+="x":(e+="x^",e+=t))}}return e}}class or extends C{}or.kind="ArithmeticException";class ge extends kn{constructor(e,t,n){super(),this.primitive=e,this.size=t,this.generatorBase=n;const r=new Int32Array(t);let i=1;for(let c=0;c<t;c++)r[c]=i,i*=2,i>=t&&(i^=e,i&=t-1);this.expTable=r;const o=new Int32Array(t);for(let c=0;c<t-1;c++)o[r[c]]=c;this.logTable=o,this.zero=new at(this,Int32Array.from([0])),this.one=new at(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,t){if(e<0)throw new N;if(t===0)return this.zero;const n=new Int32Array(e+1);return n[0]=t,new at(this,n)}inverse(e){if(e===0)throw new or;return this.expTable[this.size-this.logTable[e]-1]}multiply(e,t){return e===0||t===0?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+W.toHexString(this.primitive)+","+this.size+")"}equals(e){return e===this}}ge.AZTEC_DATA_12=new ge(4201,4096,1),ge.AZTEC_DATA_10=new ge(1033,1024,1),ge.AZTEC_DATA_6=new ge(67,64,1),ge.AZTEC_PARAM=new ge(19,16,1),ge.QR_CODE_FIELD_256=new ge(285,256,0),ge.DATA_MATRIX_FIELD_256=new ge(301,256,1),ge.AZTEC_DATA_8=ge.DATA_MATRIX_FIELD_256,ge.MAXICODE_FIELD_64=ge.AZTEC_DATA_6;class An extends C{}An.kind="ReedSolomonException";class Nt extends C{}Nt.kind="IllegalStateException";class Un{constructor(e){this.field=e}decode(e,t){const n=this.field,r=new at(n,e),i=new Int32Array(t);let o=!0;for(let y=0;y<t;y++){const b=r.evaluateAt(n.exp(y+n.getGeneratorBase()));i[i.length-1-y]=b,b!==0&&(o=!1)}if(o)return;const c=new at(n,i),u=this.runEuclideanAlgorithm(n.buildMonomial(t,1),c,t),f=u[0],x=u[1],p=this.findErrorLocations(f),E=this.findErrorMagnitudes(x,p);for(let y=0;y<p.length;y++){const b=e.length-1-n.log(p[y]);if(b<0)throw new An("Bad error location");e[b]=ge.addOrSubtract(e[b],E[y])}}runEuclideanAlgorithm(e,t,n){if(e.getDegree()<t.getDegree()){const y=e;e=t,t=y}const r=this.field;let i=e,o=t,c=r.getZero(),u=r.getOne();for(;o.getDegree()>=(n/2|0);){let y=i,b=c;if(i=o,c=u,i.isZero())throw new An("r_{i-1} was zero");o=y;let T=r.getZero();const M=i.getCoefficient(i.getDegree()),R=r.inverse(M);for(;o.getDegree()>=i.getDegree()&&!o.isZero();){const P=o.getDegree()-i.getDegree(),F=r.multiply(o.getCoefficient(o.getDegree()),R);T=T.addOrSubtract(r.buildMonomial(P,F)),o=o.addOrSubtract(i.multiplyByMonomial(P,F))}if(u=T.multiply(c).addOrSubtract(b),o.getDegree()>=i.getDegree())throw new Nt("Division algorithm failed to reduce polynomial?")}const f=u.getCoefficient(0);if(f===0)throw new An("sigmaTilde(0) was zero");const x=r.inverse(f),p=u.multiplyScalar(x),E=o.multiplyScalar(x);return[p,E]}findErrorLocations(e){const t=e.getDegree();if(t===1)return Int32Array.from([e.getCoefficient(1)]);const n=new Int32Array(t);let r=0;const i=this.field;for(let o=1;o<i.getSize()&&r<t;o++)e.evaluateAt(o)===0&&(n[r]=i.inverse(o),r++);if(r!==t)throw new An("Error locator degree does not match number of roots");return n}findErrorMagnitudes(e,t){const n=t.length,r=new Int32Array(n),i=this.field;for(let o=0;o<n;o++){const c=i.inverse(t[o]);let u=1;for(let f=0;f<n;f++)if(o!==f){const x=i.multiply(t[f],c),p=(x&1)===0?x|1:x&-2;u=i.multiply(u,p)}r[o]=i.multiply(e.evaluateAt(c),i.inverse(u)),i.getGeneratorBase()!==0&&(r[o]=i.multiply(r[o],c))}return r}}var Ze;(function(w){w[w.UPPER=0]="UPPER",w[w.LOWER=1]="LOWER",w[w.MIXED=2]="MIXED",w[w.DIGIT=3]="DIGIT",w[w.PUNCT=4]="PUNCT",w[w.BINARY=5]="BINARY"})(Ze||(Ze={}));class be{decode(e){this.ddata=e;let t=e.getBits(),n=this.extractBits(t),r=this.correctBits(n),i=be.convertBoolArrayToByteArray(r),o=be.getEncodedData(r),c=new Fn(i,o,null,null);return c.setNumBits(r.length),c}static highLevelDecode(e){return this.getEncodedData(e)}static getEncodedData(e){let t=e.length,n=Ze.UPPER,r=Ze.UPPER,i="",o=0;for(;o<t;)if(r===Ze.BINARY){if(t-o<5)break;let c=be.readCode(e,o,5);if(o+=5,c===0){if(t-o<11)break;c=be.readCode(e,o,11)+31,o+=11}for(let u=0;u<c;u++){if(t-o<8){o=t;break}const f=be.readCode(e,o,8);i+=te.castAsNonUtf8Char(f),o+=8}r=n}else{let c=r===Ze.DIGIT?4:5;if(t-o<c)break;let u=be.readCode(e,o,c);o+=c;let f=be.getCharacter(r,u);f.startsWith("CTRL_")?(n=r,r=be.getTable(f.charAt(5)),f.charAt(6)==="L"&&(n=r)):(i+=f,r=n)}return i}static getTable(e){switch(e){case"L":return Ze.LOWER;case"P":return Ze.PUNCT;case"M":return Ze.MIXED;case"D":return Ze.DIGIT;case"B":return Ze.BINARY;case"U":default:return Ze.UPPER}}static getCharacter(e,t){switch(e){case Ze.UPPER:return be.UPPER_TABLE[t];case Ze.LOWER:return be.LOWER_TABLE[t];case Ze.MIXED:return be.MIXED_TABLE[t];case Ze.PUNCT:return be.PUNCT_TABLE[t];case Ze.DIGIT:return be.DIGIT_TABLE[t];default:throw new Nt("Bad table")}}correctBits(e){let t,n;this.ddata.getNbLayers()<=2?(n=6,t=ge.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(n=8,t=ge.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(n=10,t=ge.AZTEC_DATA_10):(n=12,t=ge.AZTEC_DATA_12);let r=this.ddata.getNbDatablocks(),i=e.length/n;if(i<r)throw new U;let o=e.length%n,c=new Int32Array(i);for(let E=0;E<i;E++,o+=n)c[E]=be.readCode(e,o,n);try{new Un(t).decode(c,i-r)}catch(E){throw new U(E)}let u=(1<<n)-1,f=0;for(let E=0;E<r;E++){let y=c[E];if(y===0||y===u)throw new U;(y===1||y===u-1)&&f++}let x=new Array(r*n-f),p=0;for(let E=0;E<r;E++){let y=c[E];if(y===1||y===u-1)x.fill(y>1,p,p+n-1),p+=n-1;else for(let b=n-1;b>=0;--b)x[p++]=(y&1<<b)!==0}return x}extractBits(e){let t=this.ddata.isCompact(),n=this.ddata.getNbLayers(),r=(t?11:14)+n*4,i=new Int32Array(r),o=new Array(this.totalBitsInLayer(n,t));if(t)for(let c=0;c<i.length;c++)i[c]=c;else{let c=r+1+2*W.truncDivision(W.truncDivision(r,2)-1,15),u=r/2,f=W.truncDivision(c,2);for(let x=0;x<u;x++){let p=x+W.truncDivision(x,15);i[u-x-1]=f-p-1,i[u+x]=f+p+1}}for(let c=0,u=0;c<n;c++){let f=(n-c)*4+(t?9:12),x=c*2,p=r-1-x;for(let E=0;E<f;E++){let y=E*2;for(let b=0;b<2;b++)o[u+y+b]=e.get(i[x+b],i[x+E]),o[u+2*f+y+b]=e.get(i[x+E],i[p-b]),o[u+4*f+y+b]=e.get(i[p-b],i[p-E]),o[u+6*f+y+b]=e.get(i[p-E],i[x+b])}u+=f*8}return o}static readCode(e,t,n){let r=0;for(let i=t;i<t+n;i++)r<<=1,e[i]&&(r|=1);return r}static readByte(e,t){let n=e.length-t;return n>=8?be.readCode(e,t,8):be.readCode(e,t,n)<<8-n}static convertBoolArrayToByteArray(e){let t=new Uint8Array((e.length+7)/8);for(let n=0;n<t.length;n++)t[n]=be.readByte(e,8*n);return t}totalBitsInLayer(e,t){return((t?88:112)+16*e)*e}}be.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],be.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],be.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],be.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],be.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class fe{constructor(){}static round(e){return e===NaN?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0}static distance(e,t,n,r){const i=e-n,o=t-r;return Math.sqrt(i*i+o*o)}static sum(e){let t=0;for(let n=0,r=e.length;n!==r;n++){const i=e[n];t+=i}return t}}class ar{static floatToIntBits(e){return e}}ar.MAX_VALUE=Number.MAX_SAFE_INTEGER;class X{constructor(e,t){this.x=e,this.y=t}getX(){return this.x}getY(){return this.y}equals(e){if(e instanceof X){const t=e;return this.x===t.x&&this.y===t.y}return!1}hashCode(){return 31*ar.floatToIntBits(this.x)+ar.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(e){const t=this.distance(e[0],e[1]),n=this.distance(e[1],e[2]),r=this.distance(e[0],e[2]);let i,o,c;if(n>=t&&n>=r?(o=e[0],i=e[1],c=e[2]):r>=n&&r>=t?(o=e[1],i=e[0],c=e[2]):(o=e[2],i=e[0],c=e[1]),this.crossProductZ(i,o,c)<0){const u=i;i=c,c=u}e[0]=i,e[1]=o,e[2]=c}static distance(e,t){return fe.distance(e.x,e.y,t.x,t.y)}static crossProductZ(e,t,n){const r=t.x,i=t.y;return(n.x-r)*(e.y-i)-(n.y-i)*(e.x-r)}}class cr{constructor(e,t){this.bits=e,this.points=t}getBits(){return this.bits}getPoints(){return this.points}}class rs extends cr{constructor(e,t,n,r,i){super(e,t),this.compact=n,this.nbDatablocks=r,this.nbLayers=i}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Ft{constructor(e,t,n,r){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),t==null&&(t=Ft.INIT_SIZE),n==null&&(n=e.getWidth()/2|0),r==null&&(r=e.getHeight()/2|0);const i=t/2|0;if(this.leftInit=n-i,this.rightInit=n+i,this.upInit=r-i,this.downInit=r+i,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new v}detect(){let e=this.leftInit,t=this.rightInit,n=this.upInit,r=this.downInit,i=!1,o=!0,c=!1,u=!1,f=!1,x=!1,p=!1;const E=this.width,y=this.height;for(;o;){o=!1;let b=!0;for(;(b||!u)&&t<E;)b=this.containsBlackPoint(n,r,t,!1),b?(t++,o=!0,u=!0):u||t++;if(t>=E){i=!0;break}let T=!0;for(;(T||!f)&&r<y;)T=this.containsBlackPoint(e,t,r,!0),T?(r++,o=!0,f=!0):f||r++;if(r>=y){i=!0;break}let M=!0;for(;(M||!x)&&e>=0;)M=this.containsBlackPoint(n,r,e,!1),M?(e--,o=!0,x=!0):x||e--;if(e<0){i=!0;break}let R=!0;for(;(R||!p)&&n>=0;)R=this.containsBlackPoint(e,t,n,!0),R?(n--,o=!0,p=!0):p||n--;if(n<0){i=!0;break}o&&(c=!0)}if(!i&&c){const b=t-e;let T=null;for(let F=1;T===null&&F<b;F++)T=this.getBlackPointOnSegment(e,r-F,e+F,r);if(T==null)throw new v;let M=null;for(let F=1;M===null&&F<b;F++)M=this.getBlackPointOnSegment(e,n+F,e+F,n);if(M==null)throw new v;let R=null;for(let F=1;R===null&&F<b;F++)R=this.getBlackPointOnSegment(t,n+F,t-F,n);if(R==null)throw new v;let P=null;for(let F=1;P===null&&F<b;F++)P=this.getBlackPointOnSegment(t,r-F,t-F,r);if(P==null)throw new v;return this.centerEdges(P,T,R,M)}else throw new v}getBlackPointOnSegment(e,t,n,r){const i=fe.round(fe.distance(e,t,n,r)),o=(n-e)/i,c=(r-t)/i,u=this.image;for(let f=0;f<i;f++){const x=fe.round(e+f*o),p=fe.round(t+f*c);if(u.get(x,p))return new X(x,p)}return null}centerEdges(e,t,n,r){const i=e.getX(),o=e.getY(),c=t.getX(),u=t.getY(),f=n.getX(),x=n.getY(),p=r.getX(),E=r.getY(),y=Ft.CORR;return i<this.width/2?[new X(p-y,E+y),new X(c+y,u+y),new X(f-y,x-y),new X(i+y,o-y)]:[new X(p+y,E+y),new X(c+y,u-y),new X(f-y,x+y),new X(i-y,o-y)]}containsBlackPoint(e,t,n,r){const i=this.image;if(r){for(let o=e;o<=t;o++)if(i.get(o,n))return!0}else for(let o=e;o<=t;o++)if(i.get(n,o))return!0;return!1}}Ft.INIT_SIZE=10,Ft.CORR=1;class jr{static checkAndNudgePoints(e,t){const n=e.getWidth(),r=e.getHeight();let i=!0;for(let o=0;o<t.length&&i;o+=2){const c=Math.floor(t[o]),u=Math.floor(t[o+1]);if(c<-1||c>n||u<-1||u>r)throw new v;i=!1,c===-1?(t[o]=0,i=!0):c===n&&(t[o]=n-1,i=!0),u===-1?(t[o+1]=0,i=!0):u===r&&(t[o+1]=r-1,i=!0)}i=!0;for(let o=t.length-2;o>=0&&i;o-=2){const c=Math.floor(t[o]),u=Math.floor(t[o+1]);if(c<-1||c>n||u<-1||u>r)throw new v;i=!1,c===-1?(t[o]=0,i=!0):c===n&&(t[o]=n-1,i=!0),u===-1?(t[o+1]=0,i=!0):u===r&&(t[o+1]=r-1,i=!0)}}}class It{constructor(e,t,n,r,i,o,c,u,f){this.a11=e,this.a21=t,this.a31=n,this.a12=r,this.a22=i,this.a32=o,this.a13=c,this.a23=u,this.a33=f}static quadrilateralToQuadrilateral(e,t,n,r,i,o,c,u,f,x,p,E,y,b,T,M){const R=It.quadrilateralToSquare(e,t,n,r,i,o,c,u);return It.squareToQuadrilateral(f,x,p,E,y,b,T,M).times(R)}transformPoints(e){const t=e.length,n=this.a11,r=this.a12,i=this.a13,o=this.a21,c=this.a22,u=this.a23,f=this.a31,x=this.a32,p=this.a33;for(let E=0;E<t;E+=2){const y=e[E],b=e[E+1],T=i*y+u*b+p;e[E]=(n*y+o*b+f)/T,e[E+1]=(r*y+c*b+x)/T}}transformPointsWithValues(e,t){const n=this.a11,r=this.a12,i=this.a13,o=this.a21,c=this.a22,u=this.a23,f=this.a31,x=this.a32,p=this.a33,E=e.length;for(let y=0;y<E;y++){const b=e[y],T=t[y],M=i*b+u*T+p;e[y]=(n*b+o*T+f)/M,t[y]=(r*b+c*T+x)/M}}static squareToQuadrilateral(e,t,n,r,i,o,c,u){const f=e-n+i-c,x=t-r+o-u;if(f===0&&x===0)return new It(n-e,i-n,e,r-t,o-r,t,0,0,1);{const p=n-i,E=c-i,y=r-o,b=u-o,T=p*b-E*y,M=(f*b-E*x)/T,R=(p*x-f*y)/T;return new It(n-e+M*n,c-e+R*c,e,r-t+M*r,u-t+R*u,t,M,R,1)}}static quadrilateralToSquare(e,t,n,r,i,o,c,u){return It.squareToQuadrilateral(e,t,n,r,i,o,c,u).buildAdjoint()}buildAdjoint(){return new It(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(e){return new It(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)}}class is extends jr{sampleGrid(e,t,n,r,i,o,c,u,f,x,p,E,y,b,T,M,R,P,F){const B=It.quadrilateralToQuadrilateral(r,i,o,c,u,f,x,p,E,y,b,T,M,R,P,F);return this.sampleGridWithTransform(e,t,n,B)}sampleGridWithTransform(e,t,n,r){if(t<=0||n<=0)throw new v;const i=new Ve(t,n),o=new Float32Array(2*t);for(let c=0;c<n;c++){const u=o.length,f=c+.5;for(let x=0;x<u;x+=2)o[x]=x/2+.5,o[x+1]=f;r.transformPoints(o),jr.checkAndNudgePoints(e,o);try{for(let x=0;x<u;x+=2)e.get(Math.floor(o[x]),Math.floor(o[x+1]))&&i.set(x/2,c)}catch{throw new v}}return i}}class Vt{static setGridSampler(e){Vt.gridSampler=e}static getInstance(){return Vt.gridSampler}}Vt.gridSampler=new is;class rt{constructor(e,t){this.x=e,this.y=t}toResultPoint(){return new X(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class ss{constructor(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}detect(){return this.detectMirror(!1)}detectMirror(e){let t=this.getMatrixCenter(),n=this.getBullsEyeCorners(t);if(e){let o=n[0];n[0]=n[2],n[2]=o}this.extractParameters(n);let r=this.sampleGrid(this.image,n[this.shift%4],n[(this.shift+1)%4],n[(this.shift+2)%4],n[(this.shift+3)%4]),i=this.getMatrixCornerPoints(n);return new rs(r,i,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new v;let t=2*this.nbCenterLayers,n=new Int32Array([this.sampleLine(e[0],e[1],t),this.sampleLine(e[1],e[2],t),this.sampleLine(e[2],e[3],t),this.sampleLine(e[3],e[0],t)]);this.shift=this.getRotation(n,t);let r=0;for(let o=0;o<4;o++){let c=n[(this.shift+o)%4];this.compact?(r<<=7,r+=c>>1&127):(r<<=10,r+=(c>>2&992)+(c>>1&31))}let i=this.getCorrectedParameterData(r,this.compact);this.compact?(this.nbLayers=(i>>6)+1,this.nbDataBlocks=(i&63)+1):(this.nbLayers=(i>>11)+1,this.nbDataBlocks=(i&2047)+1)}getRotation(e,t){let n=0;e.forEach((r,i,o)=>{let c=(r>>t-2<<1)+(r&1);n=(n<<3)+c}),n=((n&1)<<11)+(n>>1);for(let r=0;r<4;r++)if(W.bitCount(n^this.EXPECTED_CORNER_BITS[r])<=2)return r;throw new v}getCorrectedParameterData(e,t){let n,r;t?(n=7,r=2):(n=10,r=4);let i=n-r,o=new Int32Array(n);for(let u=n-1;u>=0;--u)o[u]=e&15,e>>=4;try{new Un(ge.AZTEC_PARAM).decode(o,i)}catch{throw new v}let c=0;for(let u=0;u<r;u++)c=(c<<4)+o[u];return c}getBullsEyeCorners(e){let t=e,n=e,r=e,i=e,o=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let p=this.getFirstDifferent(t,o,1,-1),E=this.getFirstDifferent(n,o,1,1),y=this.getFirstDifferent(r,o,-1,1),b=this.getFirstDifferent(i,o,-1,-1);if(this.nbCenterLayers>2){let T=this.distancePoint(b,p)*this.nbCenterLayers/(this.distancePoint(i,t)*(this.nbCenterLayers+2));if(T<.75||T>1.25||!this.isWhiteOrBlackRectangle(p,E,y,b))break}t=p,n=E,r=y,i=b,o=!o}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new v;this.compact=this.nbCenterLayers===5;let c=new X(t.getX()+.5,t.getY()-.5),u=new X(n.getX()+.5,n.getY()+.5),f=new X(r.getX()-.5,r.getY()+.5),x=new X(i.getX()-.5,i.getY()-.5);return this.expandSquare([c,u,f,x],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let e,t,n,r;try{let c=new Ft(this.image).detect();e=c[0],t=c[1],n=c[2],r=c[3]}catch{let u=this.image.getWidth()/2,f=this.image.getHeight()/2;e=this.getFirstDifferent(new rt(u+7,f-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new rt(u+7,f+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new rt(u-7,f+7),!1,-1,1).toResultPoint(),r=this.getFirstDifferent(new rt(u-7,f-7),!1,-1,-1).toResultPoint()}let i=fe.round((e.getX()+r.getX()+t.getX()+n.getX())/4),o=fe.round((e.getY()+r.getY()+t.getY()+n.getY())/4);try{let c=new Ft(this.image,15,i,o).detect();e=c[0],t=c[1],n=c[2],r=c[3]}catch{e=this.getFirstDifferent(new rt(i+7,o-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new rt(i+7,o+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new rt(i-7,o+7),!1,-1,1).toResultPoint(),r=this.getFirstDifferent(new rt(i-7,o-7),!1,-1,-1).toResultPoint()}return i=fe.round((e.getX()+r.getX()+t.getX()+n.getX())/4),o=fe.round((e.getY()+r.getY()+t.getY()+n.getY())/4),new rt(i,o)}getMatrixCornerPoints(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())}sampleGrid(e,t,n,r,i){let o=Vt.getInstance(),c=this.getDimension(),u=c/2-this.nbCenterLayers,f=c/2+this.nbCenterLayers;return o.sampleGrid(e,c,c,u,u,f,u,f,f,u,f,t.getX(),t.getY(),n.getX(),n.getY(),r.getX(),r.getY(),i.getX(),i.getY())}sampleLine(e,t,n){let r=0,i=this.distanceResultPoint(e,t),o=i/n,c=e.getX(),u=e.getY(),f=o*(t.getX()-e.getX())/i,x=o*(t.getY()-e.getY())/i;for(let p=0;p<n;p++)this.image.get(fe.round(c+p*f),fe.round(u+p*x))&&(r|=1<<n-p-1);return r}isWhiteOrBlackRectangle(e,t,n,r){let i=3;e=new rt(e.getX()-i,e.getY()+i),t=new rt(t.getX()-i,t.getY()-i),n=new rt(n.getX()+i,n.getY()-i),r=new rt(r.getX()+i,r.getY()+i);let o=this.getColor(r,e);if(o===0)return!1;let c=this.getColor(e,t);return c!==o||(c=this.getColor(t,n),c!==o)?!1:(c=this.getColor(n,r),c===o)}getColor(e,t){let n=this.distancePoint(e,t),r=(t.getX()-e.getX())/n,i=(t.getY()-e.getY())/n,o=0,c=e.getX(),u=e.getY(),f=this.image.get(e.getX(),e.getY()),x=Math.ceil(n);for(let E=0;E<x;E++)c+=r,u+=i,this.image.get(fe.round(c),fe.round(u))!==f&&o++;let p=o/n;return p>.1&&p<.9?0:p<=.1===f?1:-1}getFirstDifferent(e,t,n,r){let i=e.getX()+n,o=e.getY()+r;for(;this.isValid(i,o)&&this.image.get(i,o)===t;)i+=n,o+=r;for(i-=n,o-=r;this.isValid(i,o)&&this.image.get(i,o)===t;)i+=n;for(i-=n;this.isValid(i,o)&&this.image.get(i,o)===t;)o+=r;return o-=r,new rt(i,o)}expandSquare(e,t,n){let r=n/(2*t),i=e[0].getX()-e[2].getX(),o=e[0].getY()-e[2].getY(),c=(e[0].getX()+e[2].getX())/2,u=(e[0].getY()+e[2].getY())/2,f=new X(c+r*i,u+r*o),x=new X(c-r*i,u-r*o);i=e[1].getX()-e[3].getX(),o=e[1].getY()-e[3].getY(),c=(e[1].getX()+e[3].getX())/2,u=(e[1].getY()+e[3].getY())/2;let p=new X(c+r*i,u+r*o),E=new X(c-r*i,u-r*o);return[f,p,x,E]}isValid(e,t){return e>=0&&e<this.image.getWidth()&&t>0&&t<this.image.getHeight()}isValidPoint(e){let t=fe.round(e.getX()),n=fe.round(e.getY());return this.isValid(t,n)}distancePoint(e,t){return fe.distance(e.getX(),e.getY(),t.getX(),t.getY())}distanceResultPoint(e,t){return fe.distance(e.getX(),e.getY(),t.getX(),t.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(W.truncDivision(this.nbLayers-4,8)+1)+15}}class lr{decode(e,t=null){let n=null,r=new ss(e.getBlackMatrix()),i=null,o=null;try{let x=r.detectMirror(!1);i=x.getPoints(),this.reportFoundResultPoints(t,i),o=new be().decode(x)}catch(x){n=x}if(o==null)try{let x=r.detectMirror(!0);i=x.getPoints(),this.reportFoundResultPoints(t,i),o=new be().decode(x)}catch(x){throw n??x}let c=new nt(o.getText(),o.getRawBytes(),o.getNumBits(),i,J.AZTEC,q.currentTimeMillis()),u=o.getByteSegments();u!=null&&c.putMetadata(We.BYTE_SEGMENTS,u);let f=o.getECLevel();return f!=null&&c.putMetadata(We.ERROR_CORRECTION_LEVEL,f),c}reportFoundResultPoints(e,t){if(e!=null){let n=e.get(ue.NEED_RESULT_POINT_CALLBACK);n!=null&&t.forEach((r,i,o)=>{n.foundPossibleResultPoint(r)})}}reset(){}}class Ia extends nn{constructor(e=500){super(new lr,e)}}class ke{decode(e,t){try{return this.doDecode(e,t)}catch{if(t&&t.get(ue.TRY_HARDER)===!0&&e.isRotateSupported()){const i=e.rotateCounterClockwise(),o=this.doDecode(i,t),c=o.getResultMetadata();let u=270;c!==null&&c.get(We.ORIENTATION)===!0&&(u=u+c.get(We.ORIENTATION)%360),o.putMetadata(We.ORIENTATION,u);const f=o.getResultPoints();if(f!==null){const x=i.getHeight();for(let p=0;p<f.length;p++)f[p]=new X(x-f[p].getY()-1,f[p].getX())}return o}else throw new v}}reset(){}doDecode(e,t){const n=e.getWidth(),r=e.getHeight();let i=new ne(n);const o=t&&t.get(ue.TRY_HARDER)===!0,c=Math.max(1,r>>(o?8:5));let u;o?u=r:u=15;const f=Math.trunc(r/2);for(let x=0;x<u;x++){const p=Math.trunc((x+1)/2),E=(x&1)===0,y=f+c*(E?p:-p);if(y<0||y>=r)break;try{i=e.getBlackRow(y,i)}catch{continue}for(let b=0;b<2;b++){if(b===1&&(i.reverse(),t&&t.get(ue.NEED_RESULT_POINT_CALLBACK)===!0)){const T=new Map;t.forEach((M,R)=>T.set(R,M)),T.delete(ue.NEED_RESULT_POINT_CALLBACK),t=T}try{const T=this.decodeRow(y,i,t);if(b===1){T.putMetadata(We.ORIENTATION,180);const M=T.getResultPoints();M!==null&&(M[0]=new X(n-M[0].getX()-1,M[0].getY()),M[1]=new X(n-M[1].getX()-1,M[1].getY()))}return T}catch{}}}throw new v}static recordPattern(e,t,n){const r=n.length;for(let f=0;f<r;f++)n[f]=0;const i=e.getSize();if(t>=i)throw new v;let o=!e.get(t),c=0,u=t;for(;u<i;){if(e.get(u)!==o)n[c]++;else{if(++c===r)break;n[c]=1,o=!o}u++}if(!(c===r||c===r-1&&u===i))throw new v}static recordPatternInReverse(e,t,n){let r=n.length,i=e.get(t);for(;t>0&&r>=0;)e.get(--t)!==i&&(r--,i=!i);if(r>=0)throw new v;ke.recordPattern(e,t+1,n)}static patternMatchVariance(e,t,n){const r=e.length;let i=0,o=0;for(let f=0;f<r;f++)i+=e[f],o+=t[f];if(i<o)return Number.POSITIVE_INFINITY;const c=i/o;n*=c;let u=0;for(let f=0;f<r;f++){const x=e[f],p=t[f]*c,E=x>p?x-p:p-x;if(E>n)return Number.POSITIVE_INFINITY;u+=E}return u/i}}class H extends ke{static findStartPattern(e){const t=e.getSize(),n=e.getNextSet(0);let r=0,i=Int32Array.from([0,0,0,0,0,0]),o=n,c=!1;const u=6;for(let f=n;f<t;f++)if(e.get(f)!==c)i[r]++;else{if(r===u-1){let x=H.MAX_AVG_VARIANCE,p=-1;for(let E=H.CODE_START_A;E<=H.CODE_START_C;E++){const y=ke.patternMatchVariance(i,H.CODE_PATTERNS[E],H.MAX_INDIVIDUAL_VARIANCE);y<x&&(x=y,p=E)}if(p>=0&&e.isRange(Math.max(0,o-(f-o)/2),o,!1))return Int32Array.from([o,f,p]);o+=i[0]+i[1],i=i.slice(2,i.length-1),i[r-1]=0,i[r]=0,r--}else r++;i[r]=1,c=!c}throw new v}static decodeCode(e,t,n){ke.recordPattern(e,n,t);let r=H.MAX_AVG_VARIANCE,i=-1;for(let o=0;o<H.CODE_PATTERNS.length;o++){const c=H.CODE_PATTERNS[o],u=this.patternMatchVariance(t,c,H.MAX_INDIVIDUAL_VARIANCE);u<r&&(r=u,i=o)}if(i>=0)return i;throw new v}decodeRow(e,t,n){const r=n&&n.get(ue.ASSUME_GS1)===!0,i=H.findStartPattern(t),o=i[2];let c=0;const u=new Uint8Array(20);u[c++]=o;let f;switch(o){case H.CODE_START_A:f=H.CODE_CODE_A;break;case H.CODE_START_B:f=H.CODE_CODE_B;break;case H.CODE_START_C:f=H.CODE_CODE_C;break;default:throw new U}let x=!1,p=!1,E="",y=i[0],b=i[1];const T=Int32Array.from([0,0,0,0,0,0]);let M=0,R=0,P=o,F=0,B=!0,ce=!1,re=!1;for(;!x;){const _n=p;switch(p=!1,M=R,R=H.decodeCode(t,T,b),u[c++]=R,R!==H.CODE_STOP&&(B=!0),R!==H.CODE_STOP&&(F++,P+=F*R),y=b,b+=T.reduce((qa,Ja)=>qa+Ja,0),R){case H.CODE_START_A:case H.CODE_START_B:case H.CODE_START_C:throw new U}switch(f){case H.CODE_CODE_A:if(R<64)re===ce?E+=String.fromCharCode(32+R):E+=String.fromCharCode(32+R+128),re=!1;else if(R<96)re===ce?E+=String.fromCharCode(R-64):E+=String.fromCharCode(R+64),re=!1;else switch(R!==H.CODE_STOP&&(B=!1),R){case H.CODE_FNC_1:r&&(E.length===0?E+="]C1":E+="");break;case H.CODE_FNC_2:case H.CODE_FNC_3:break;case H.CODE_FNC_4_A:!ce&&re?(ce=!0,re=!1):ce&&re?(ce=!1,re=!1):re=!0;break;case H.CODE_SHIFT:p=!0,f=H.CODE_CODE_B;break;case H.CODE_CODE_B:f=H.CODE_CODE_B;break;case H.CODE_CODE_C:f=H.CODE_CODE_C;break;case H.CODE_STOP:x=!0;break}break;case H.CODE_CODE_B:if(R<96)re===ce?E+=String.fromCharCode(32+R):E+=String.fromCharCode(32+R+128),re=!1;else switch(R!==H.CODE_STOP&&(B=!1),R){case H.CODE_FNC_1:r&&(E.length===0?E+="]C1":E+="");break;case H.CODE_FNC_2:case H.CODE_FNC_3:break;case H.CODE_FNC_4_B:!ce&&re?(ce=!0,re=!1):ce&&re?(ce=!1,re=!1):re=!0;break;case H.CODE_SHIFT:p=!0,f=H.CODE_CODE_A;break;case H.CODE_CODE_A:f=H.CODE_CODE_A;break;case H.CODE_CODE_C:f=H.CODE_CODE_C;break;case H.CODE_STOP:x=!0;break}break;case H.CODE_CODE_C:if(R<100)R<10&&(E+="0"),E+=R;else switch(R!==H.CODE_STOP&&(B=!1),R){case H.CODE_FNC_1:r&&(E.length===0?E+="]C1":E+="");break;case H.CODE_CODE_A:f=H.CODE_CODE_A;break;case H.CODE_CODE_B:f=H.CODE_CODE_B;break;case H.CODE_STOP:x=!0;break}break}_n&&(f=f===H.CODE_CODE_A?H.CODE_CODE_B:H.CODE_CODE_A)}const ft=b-y;if(b=t.getNextUnset(b),!t.isRange(b,Math.min(t.getSize(),b+(b-y)/2),!1))throw new v;if(P-=F*M,P%103!==M)throw new Y;const St=E.length;if(St===0)throw new v;St>0&&B&&(f===H.CODE_CODE_C?E=E.substring(0,St-2):E=E.substring(0,St-1));const ht=(i[1]+i[0])/2,Se=y+ft/2,qe=u.length,dt=new Uint8Array(qe);for(let _n=0;_n<qe;_n++)dt[_n]=u[_n];const Tn=[new X(ht,e),new X(Se,e)];return new nt(E,dt,0,Tn,J.CODE_128,new Date().getTime())}}H.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],H.MAX_AVG_VARIANCE=.25,H.MAX_INDIVIDUAL_VARIANCE=.7,H.CODE_SHIFT=98,H.CODE_CODE_C=99,H.CODE_CODE_B=100,H.CODE_CODE_A=101,H.CODE_FNC_1=102,H.CODE_FNC_2=97,H.CODE_FNC_3=96,H.CODE_FNC_4_A=101,H.CODE_FNC_4_B=100,H.CODE_START_A=103,H.CODE_START_B=104,H.CODE_START_C=105,H.CODE_STOP=106;class He extends ke{constructor(e=!1,t=!1){super(),this.usingCheckDigit=e,this.extendedMode=t,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(e,t,n){let r=this.counters;r.fill(0),this.decodeRowResult="";let i=He.findAsteriskPattern(t,r),o=t.getNextSet(i[1]),c=t.getSize(),u,f;do{He.recordPattern(t,o,r);let T=He.toNarrowWidePattern(r);if(T<0)throw new v;u=He.patternToChar(T),this.decodeRowResult+=u,f=o;for(let M of r)o+=M;o=t.getNextSet(o)}while(u!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let x=0;for(let T of r)x+=T;let p=o-f-x;if(o!==c&&p*2<x)throw new v;if(this.usingCheckDigit){let T=this.decodeRowResult.length-1,M=0;for(let R=0;R<T;R++)M+=He.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(R));if(this.decodeRowResult.charAt(T)!==He.ALPHABET_STRING.charAt(M%43))throw new Y;this.decodeRowResult=this.decodeRowResult.substring(0,T)}if(this.decodeRowResult.length===0)throw new v;let E;this.extendedMode?E=He.decodeExtended(this.decodeRowResult):E=this.decodeRowResult;let y=(i[1]+i[0])/2,b=f+x/2;return new nt(E,null,0,[new X(y,e),new X(b,e)],J.CODE_39,new Date().getTime())}static findAsteriskPattern(e,t){let n=e.getSize(),r=e.getNextSet(0),i=0,o=r,c=!1,u=t.length;for(let f=r;f<n;f++)if(e.get(f)!==c)t[i]++;else{if(i===u-1){if(this.toNarrowWidePattern(t)===He.ASTERISK_ENCODING&&e.isRange(Math.max(0,o-Math.floor((f-o)/2)),o,!1))return[o,f];o+=t[0]+t[1],t.copyWithin(0,2,2+i-1),t[i-1]=0,t[i]=0,i--}else i++;t[i]=1,c=!c}throw new v}static toNarrowWidePattern(e){let t=e.length,n=0,r;do{let i=2147483647;for(let u of e)u<i&&u>n&&(i=u);n=i,r=0;let o=0,c=0;for(let u=0;u<t;u++){let f=e[u];f>n&&(c|=1<<t-1-u,r++,o+=f)}if(r===3){for(let u=0;u<t&&r>0;u++){let f=e[u];if(f>n&&(r--,f*2>=o))return-1}return c}}while(r>3);return-1}static patternToChar(e){for(let t=0;t<He.CHARACTER_ENCODINGS.length;t++)if(He.CHARACTER_ENCODINGS[t]===e)return He.ALPHABET_STRING.charAt(t);if(e===He.ASTERISK_ENCODING)return"*";throw new v}static decodeExtended(e){let t=e.length,n="";for(let r=0;r<t;r++){let i=e.charAt(r);if(i==="+"||i==="$"||i==="%"||i==="/"){let o=e.charAt(r+1),c="\0";switch(i){case"+":if(o>="A"&&o<="Z")c=String.fromCharCode(o.charCodeAt(0)+32);else throw new U;break;case"$":if(o>="A"&&o<="Z")c=String.fromCharCode(o.charCodeAt(0)-64);else throw new U;break;case"%":if(o>="A"&&o<="E")c=String.fromCharCode(o.charCodeAt(0)-38);else if(o>="F"&&o<="J")c=String.fromCharCode(o.charCodeAt(0)-11);else if(o>="K"&&o<="O")c=String.fromCharCode(o.charCodeAt(0)+16);else if(o>="P"&&o<="T")c=String.fromCharCode(o.charCodeAt(0)+43);else if(o==="U")c="\0";else if(o==="V")c="@";else if(o==="W")c="`";else if(o==="X"||o==="Y"||o==="Z")c="";else throw new U;break;case"/":if(o>="A"&&o<="O")c=String.fromCharCode(o.charCodeAt(0)-32);else if(o==="Z")c=":";else throw new U;break}n+=c,r++}else n+=i}return n}}He.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",He.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],He.ASTERISK_ENCODING=148;class Ie extends ke{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(e,t,n){let r=this.decodeStart(t),i=this.decodeEnd(t),o=new Ee;Ie.decodeMiddle(t,r[1],i[0],o);let c=o.toString(),u=null;n!=null&&(u=n.get(ue.ALLOWED_LENGTHS)),u==null&&(u=Ie.DEFAULT_ALLOWED_LENGTHS);let f=c.length,x=!1,p=0;for(let b of u){if(f===b){x=!0;break}b>p&&(p=b)}if(!x&&f>p&&(x=!0),!x)throw new U;const E=[new X(r[1],e),new X(i[0],e)];return new nt(c,null,0,E,J.ITF,new Date().getTime())}static decodeMiddle(e,t,n,r){let i=new Int32Array(10),o=new Int32Array(5),c=new Int32Array(5);for(i.fill(0),o.fill(0),c.fill(0);t<n;){ke.recordPattern(e,t,i);for(let f=0;f<5;f++){let x=2*f;o[f]=i[x],c[f]=i[x+1]}let u=Ie.decodeDigit(o);r.append(u.toString()),u=this.decodeDigit(c),r.append(u.toString()),i.forEach(function(f){t+=f})}}decodeStart(e){let t=Ie.skipWhiteSpace(e),n=Ie.findGuardPattern(e,t,Ie.START_PATTERN);return this.narrowLineWidth=(n[1]-n[0])/4,this.validateQuietZone(e,n[0]),n}validateQuietZone(e,t){let n=this.narrowLineWidth*10;n=n<t?n:t;for(let r=t-1;n>0&&r>=0&&!e.get(r);r--)n--;if(n!==0)throw new v}static skipWhiteSpace(e){const t=e.getSize(),n=e.getNextSet(0);if(n===t)throw new v;return n}decodeEnd(e){e.reverse();try{let t=Ie.skipWhiteSpace(e),n;try{n=Ie.findGuardPattern(e,t,Ie.END_PATTERN_REVERSED[0])}catch(i){i instanceof v&&(n=Ie.findGuardPattern(e,t,Ie.END_PATTERN_REVERSED[1]))}this.validateQuietZone(e,n[0]);let r=n[0];return n[0]=e.getSize()-n[1],n[1]=e.getSize()-r,n}finally{e.reverse()}}static findGuardPattern(e,t,n){let r=n.length,i=new Int32Array(r),o=e.getSize(),c=!1,u=0,f=t;i.fill(0);for(let x=t;x<o;x++)if(e.get(x)!==c)i[u]++;else{if(u===r-1){if(ke.patternMatchVariance(i,n,Ie.MAX_INDIVIDUAL_VARIANCE)<Ie.MAX_AVG_VARIANCE)return[f,x];f+=i[0]+i[1],q.arraycopy(i,2,i,0,u-1),i[u-1]=0,i[u]=0,u--}else u++;i[u]=1,c=!c}throw new v}static decodeDigit(e){let t=Ie.MAX_AVG_VARIANCE,n=-1,r=Ie.PATTERNS.length;for(let i=0;i<r;i++){let o=Ie.PATTERNS[i],c=ke.patternMatchVariance(e,o,Ie.MAX_INDIVIDUAL_VARIANCE);c<t?(t=c,n=i):c===t&&(n=-1)}if(n>=0)return n%10;throw new v}}Ie.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Ie.MAX_AVG_VARIANCE=.38,Ie.MAX_INDIVIDUAL_VARIANCE=.5,Ie.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Ie.START_PATTERN=Int32Array.from([1,1,1,1]),Ie.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class ve extends ke{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(e){let t=!1,n,r=0,i=Int32Array.from([0,0,0]);for(;!t;){i=Int32Array.from([0,0,0]),n=ve.findGuardPattern(e,r,!1,this.START_END_PATTERN,i);let o=n[0];r=n[1];let c=o-(r-o);c>=0&&(t=e.isRange(c,o,!1))}return n}static checkChecksum(e){return ve.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let t=e.length;if(t===0)return!1;let n=parseInt(e.charAt(t-1),10);return ve.getStandardUPCEANChecksum(e.substring(0,t-1))===n}static getStandardUPCEANChecksum(e){let t=e.length,n=0;for(let r=t-1;r>=0;r-=2){let i=e.charAt(r).charCodeAt(0)-48;if(i<0||i>9)throw new U;n+=i}n*=3;for(let r=t-2;r>=0;r-=2){let i=e.charAt(r).charCodeAt(0)-48;if(i<0||i>9)throw new U;n+=i}return(1e3-n)%10}static decodeEnd(e,t){return ve.findGuardPattern(e,t,!1,ve.START_END_PATTERN,new Int32Array(ve.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(e,t,n,r){return this.findGuardPattern(e,t,n,r,new Int32Array(r.length))}static findGuardPattern(e,t,n,r,i){let o=e.getSize();t=n?e.getNextUnset(t):e.getNextSet(t);let c=0,u=t,f=r.length,x=n;for(let p=t;p<o;p++)if(e.get(p)!==x)i[c]++;else{if(c===f-1){if(ke.patternMatchVariance(i,r,ve.MAX_INDIVIDUAL_VARIANCE)<ve.MAX_AVG_VARIANCE)return Int32Array.from([u,p]);u+=i[0]+i[1];let E=i.slice(2,i.length-1);for(let y=0;y<c-1;y++)i[y]=E[y];i[c-1]=0,i[c]=0,c--}else c++;i[c]=1,x=!x}throw new v}static decodeDigit(e,t,n,r){this.recordPattern(e,n,t);let i=this.MAX_AVG_VARIANCE,o=-1,c=r.length;for(let u=0;u<c;u++){let f=r[u],x=ke.patternMatchVariance(t,f,ve.MAX_INDIVIDUAL_VARIANCE);x<i&&(i=x,o=u)}if(o>=0)return o;throw new v}}ve.MAX_AVG_VARIANCE=.48,ve.MAX_INDIVIDUAL_VARIANCE=.7,ve.START_END_PATTERN=Int32Array.from([1,1,1]),ve.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),ve.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),ve.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Hn{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,t,n){let r=this.decodeRowStringBuffer,i=this.decodeMiddle(t,n,r),o=r.toString(),c=Hn.parseExtensionString(o),u=[new X((n[0]+n[1])/2,e),new X(i,e)],f=new nt(o,null,0,u,J.UPC_EAN_EXTENSION,new Date().getTime());return c!=null&&f.putAllMetadata(c),f}decodeMiddle(e,t,n){let r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;let i=e.getSize(),o=t[1],c=0;for(let f=0;f<5&&o<i;f++){let x=ve.decodeDigit(e,r,o,ve.L_AND_G_PATTERNS);n+=String.fromCharCode(48+x%10);for(let p of r)o+=p;x>=10&&(c|=1<<4-f),f!==4&&(o=e.getNextSet(o),o=e.getNextUnset(o))}if(n.length!==5)throw new v;let u=this.determineCheckDigit(c);if(Hn.extensionChecksum(n.toString())!==u)throw new v;return o}static extensionChecksum(e){let t=e.length,n=0;for(let r=t-2;r>=0;r-=2)n+=e.charAt(r).charCodeAt(0)-48;n*=3;for(let r=t-1;r>=0;r-=2)n+=e.charAt(r).charCodeAt(0)-48;return n*=3,n%10}determineCheckDigit(e){for(let t=0;t<10;t++)if(e===this.CHECK_DIGIT_ENCODINGS[t])return t;throw new v}static parseExtensionString(e){if(e.length!==5)return null;let t=Hn.parseExtension5String(e);return t==null?null:new Map([[We.SUGGESTED_PRICE,t]])}static parseExtension5String(e){let t;switch(e.charAt(0)){case"0":t="£";break;case"5":t="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}t="";break;default:t="";break}let n=parseInt(e.substring(1)),r=(n/100).toString(),i=n%100,o=i<10?"0"+i:i.toString();return t+r+"."+o}}class Vr{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,t,n){let r=this.decodeRowStringBuffer,i=this.decodeMiddle(t,n,r),o=r.toString(),c=Vr.parseExtensionString(o),u=[new X((n[0]+n[1])/2,e),new X(i,e)],f=new nt(o,null,0,u,J.UPC_EAN_EXTENSION,new Date().getTime());return c!=null&&f.putAllMetadata(c),f}decodeMiddle(e,t,n){let r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;let i=e.getSize(),o=t[1],c=0;for(let u=0;u<2&&o<i;u++){let f=ve.decodeDigit(e,r,o,ve.L_AND_G_PATTERNS);n+=String.fromCharCode(48+f%10);for(let x of r)o+=x;f>=10&&(c|=1<<1-u),u!==1&&(o=e.getNextSet(o),o=e.getNextUnset(o))}if(n.length!==2)throw new v;if(parseInt(n.toString())%4!==c)throw new v;return o}static parseExtensionString(e){return e.length!==2?null:new Map([[We.ISSUE_NUMBER,parseInt(e)]])}}class os{static decodeRow(e,t,n){let r=ve.findGuardPattern(t,n,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Hn().decodeRow(e,t,r)}catch{return new Vr().decodeRow(e,t,r)}}}os.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class xe extends ve{constructor(){super(),this.decodeRowStringBuffer="",xe.L_AND_G_PATTERNS=xe.L_PATTERNS.map(e=>Int32Array.from(e));for(let e=10;e<20;e++){let t=xe.L_PATTERNS[e-10],n=new Int32Array(t.length);for(let r=0;r<t.length;r++)n[r]=t[t.length-r-1];xe.L_AND_G_PATTERNS[e]=n}}decodeRow(e,t,n){let r=xe.findStartGuardPattern(t),i=n==null?null:n.get(ue.NEED_RESULT_POINT_CALLBACK);if(i!=null){const B=new X((r[0]+r[1])/2,e);i.foundPossibleResultPoint(B)}let o=this.decodeMiddle(t,r,this.decodeRowStringBuffer),c=o.rowOffset,u=o.resultString;if(i!=null){const B=new X(c,e);i.foundPossibleResultPoint(B)}let f=this.decodeEnd(t,c);if(i!=null){const B=new X((f[0]+f[1])/2,e);i.foundPossibleResultPoint(B)}let x=f[1],p=x+(x-f[0]);if(p>=t.getSize()||!t.isRange(x,p,!1))throw new v;let E=u.toString();if(E.length<8)throw new U;if(!xe.checkChecksum(E))throw new Y;let y=(r[1]+r[0])/2,b=(f[1]+f[0])/2,T=this.getBarcodeFormat(),M=[new X(y,e),new X(b,e)],R=new nt(E,null,0,M,T,new Date().getTime()),P=0;try{let B=os.decodeRow(e,t,f[1]);R.putMetadata(We.UPC_EAN_EXTENSION,B.getText()),R.putAllMetadata(B.getResultMetadata()),R.addResultPoints(B.getResultPoints()),P=B.getText().length}catch{}let F=n==null?null:n.get(ue.ALLOWED_EAN_EXTENSIONS);if(F!=null){let B=!1;for(let ce in F)if(P.toString()===ce){B=!0;break}if(!B)throw new v}return R}decodeEnd(e,t){return xe.findGuardPattern(e,t,!1,xe.START_END_PATTERN,new Int32Array(xe.START_END_PATTERN.length).fill(0))}static checkChecksum(e){return xe.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let t=e.length;if(t===0)return!1;let n=parseInt(e.charAt(t-1),10);return xe.getStandardUPCEANChecksum(e.substring(0,t-1))===n}static getStandardUPCEANChecksum(e){let t=e.length,n=0;for(let r=t-1;r>=0;r-=2){let i=e.charAt(r).charCodeAt(0)-48;if(i<0||i>9)throw new U;n+=i}n*=3;for(let r=t-2;r>=0;r-=2){let i=e.charAt(r).charCodeAt(0)-48;if(i<0||i>9)throw new U;n+=i}return(1e3-n)%10}}class rn extends xe{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,t,n){let r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;let i=e.getSize(),o=t[1],c=0;for(let f=0;f<6&&o<i;f++){let x=xe.decodeDigit(e,r,o,xe.L_AND_G_PATTERNS);n+=String.fromCharCode(48+x%10);for(let p of r)o+=p;x>=10&&(c|=1<<5-f)}n=rn.determineFirstDigit(n,c),o=xe.findGuardPattern(e,o,!0,xe.MIDDLE_PATTERN,new Int32Array(xe.MIDDLE_PATTERN.length).fill(0))[1];for(let f=0;f<6&&o<i;f++){let x=xe.decodeDigit(e,r,o,xe.L_PATTERNS);n+=String.fromCharCode(48+x);for(let p of r)o+=p}return{rowOffset:o,resultString:n}}getBarcodeFormat(){return J.EAN_13}static determineFirstDigit(e,t){for(let n=0;n<10;n++)if(t===this.FIRST_DIGIT_ENCODINGS[n])return e=String.fromCharCode(48+n)+e,e;throw new v}}rn.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class as extends xe{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,t,n){const r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;let i=e.getSize(),o=t[1];for(let u=0;u<4&&o<i;u++){let f=xe.decodeDigit(e,r,o,xe.L_PATTERNS);n+=String.fromCharCode(48+f);for(let x of r)o+=x}o=xe.findGuardPattern(e,o,!0,xe.MIDDLE_PATTERN,new Int32Array(xe.MIDDLE_PATTERN.length).fill(0))[1];for(let u=0;u<4&&o<i;u++){let f=xe.decodeDigit(e,r,o,xe.L_PATTERNS);n+=String.fromCharCode(48+f);for(let x of r)o+=x}return{rowOffset:o,resultString:n}}getBarcodeFormat(){return J.EAN_8}}class cs extends xe{constructor(){super(...arguments),this.ean13Reader=new rn}getBarcodeFormat(){return J.UPC_A}decode(e,t){return this.maybeReturnResult(this.ean13Reader.decode(e))}decodeRow(e,t,n){return this.maybeReturnResult(this.ean13Reader.decodeRow(e,t,n))}decodeMiddle(e,t,n){return this.ean13Reader.decodeMiddle(e,t,n)}maybeReturnResult(e){let t=e.getText();if(t.charAt(0)==="0"){let n=new nt(t.substring(1),null,null,e.getResultPoints(),J.UPC_A);return e.getResultMetadata()!=null&&n.putAllMetadata(e.getResultMetadata()),n}else throw new v}reset(){this.ean13Reader.reset()}}class yt extends xe{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(e,t,n){const r=this.decodeMiddleCounters.map(f=>f);r[0]=0,r[1]=0,r[2]=0,r[3]=0;const i=e.getSize();let o=t[1],c=0;for(let f=0;f<6&&o<i;f++){const x=yt.decodeDigit(e,r,o,yt.L_AND_G_PATTERNS);n+=String.fromCharCode(48+x%10);for(let p of r)o+=p;x>=10&&(c|=1<<5-f)}let u=yt.determineNumSysAndCheckDigit(n,c);return{rowOffset:o,resultString:u}}decodeEnd(e,t){return yt.findGuardPatternWithoutCounters(e,t,!0,yt.MIDDLE_END_PATTERN)}checkChecksum(e){return xe.checkChecksum(yt.convertUPCEtoUPCA(e))}static determineNumSysAndCheckDigit(e,t){for(let n=0;n<=1;n++)for(let r=0;r<10;r++)if(t===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[n][r]){let i=String.fromCharCode(48+n),o=String.fromCharCode(48+r);return i+e+o}throw v.getNotFoundInstance()}getBarcodeFormat(){return J.UPC_E}static convertUPCEtoUPCA(e){const t=e.slice(1,7).split("").map(i=>i.charCodeAt(0)),n=new Ee;n.append(e.charAt(0));let r=t[5];switch(r){case 0:case 1:case 2:n.appendChars(t,0,2),n.append(r),n.append("0000"),n.appendChars(t,2,3);break;case 3:n.appendChars(t,0,3),n.append("00000"),n.appendChars(t,3,2);break;case 4:n.appendChars(t,0,4),n.append("00000"),n.append(t[4]);break;default:n.appendChars(t,0,5),n.append("0000"),n.append(r);break}return e.length>=8&&n.append(e.charAt(7)),n.toString()}}yt.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),yt.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Gr extends ke{constructor(e){super();let t=e==null?null:e.get(ue.POSSIBLE_FORMATS),n=[];h(t)?(n.push(new rn),n.push(new cs),n.push(new as),n.push(new yt)):(t.indexOf(J.EAN_13)>-1&&n.push(new rn),t.indexOf(J.UPC_A)>-1&&n.push(new cs),t.indexOf(J.EAN_8)>-1&&n.push(new as),t.indexOf(J.UPC_E)>-1&&n.push(new yt)),this.readers=n}decodeRow(e,t,n){for(let r of this.readers)try{const i=r.decodeRow(e,t,n),o=i.getBarcodeFormat()===J.EAN_13&&i.getText().charAt(0)==="0",c=n==null?null:n.get(ue.POSSIBLE_FORMATS),u=c==null||c.includes(J.UPC_A);if(o&&u){const f=i.getRawBytes(),x=new nt(i.getText().substring(1),f,f?f.length:null,i.getResultPoints(),J.UPC_A);return x.putAllMetadata(i.getResultMetadata()),x}return i}catch{}throw new v}reset(){for(let e of this.readers)e.reset()}}class Je extends ke{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(e,t){for(let n=0;n<t.length;n++)if(ke.patternMatchVariance(e,t[n],Je.MAX_INDIVIDUAL_VARIANCE)<Je.MAX_AVG_VARIANCE)return n;throw new v}static count(e){return fe.sum(new Int32Array(e))}static increment(e,t){let n=0,r=t[0];for(let i=1;i<e.length;i++)t[i]>r&&(r=t[i],n=i);e[n]++}static decrement(e,t){let n=0,r=t[0];for(let i=1;i<e.length;i++)t[i]<r&&(r=t[i],n=i);e[n]--}static isFinderPattern(e){let t=e[0]+e[1],n=t+e[2]+e[3],r=t/n;if(r>=Je.MIN_FINDER_PATTERN_RATIO&&r<=Je.MAX_FINDER_PATTERN_RATIO){let i=Number.MAX_SAFE_INTEGER,o=Number.MIN_SAFE_INTEGER;for(let c of e)c>o&&(o=c),c<i&&(i=c);return o<10*i}return!1}}Je.MAX_AVG_VARIANCE=.2,Je.MAX_INDIVIDUAL_VARIANCE=.45,Je.MIN_FINDER_PATTERN_RATIO=9.5/12,Je.MAX_FINDER_PATTERN_RATIO=12.5/14;class Cn{constructor(e,t){this.value=e,this.checksumPortion=t}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(e){if(!(e instanceof Cn))return!1;const t=e;return this.value===t.value&&this.checksumPortion===t.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class ur{constructor(e,t,n,r,i){this.value=e,this.startEnd=t,this.value=e,this.startEnd=t,this.resultPoints=new Array,this.resultPoints.push(new X(n,i)),this.resultPoints.push(new X(r,i))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(e){if(!(e instanceof ur))return!1;const t=e;return this.value===t.value}hashCode(){return this.value}}class Mt{constructor(){}static getRSSvalue(e,t,n){let r=0;for(let u of e)r+=u;let i=0,o=0,c=e.length;for(let u=0;u<c-1;u++){let f;for(f=1,o|=1<<u;f<e[u];f++,o&=~(1<<u)){let x=Mt.combins(r-f-1,c-u-2);if(n&&o===0&&r-f-(c-u-1)>=c-u-1&&(x-=Mt.combins(r-f-(c-u),c-u-2)),c-u-1>1){let p=0;for(let E=r-f-(c-u-2);E>t;E--)p+=Mt.combins(r-f-E-1,c-u-3);x-=p*(c-1-u)}else r-f>t&&x--;i+=x}r-=f}return i}static combins(e,t){let n,r;e-t>t?(r=t,n=e-t):(r=e-t,n=t);let i=1,o=1;for(let c=e;c>n;c--)i*=c,o<=r&&(i/=o,o++);for(;o<=r;)i/=o,o++;return i}}class ya{static buildBitArray(e){let t=e.length*2-1;e[e.length-1].getRightChar()==null&&(t-=1);let n=12*t,r=new ne(n),i=0,c=e[0].getRightChar().getValue();for(let u=11;u>=0;--u)(c&1<<u)!=0&&r.set(i),i++;for(let u=1;u<e.length;++u){let f=e[u],x=f.getLeftChar().getValue();for(let p=11;p>=0;--p)(x&1<<p)!=0&&r.set(i),i++;if(f.getRightChar()!=null){let p=f.getRightChar().getValue();for(let E=11;E>=0;--E)(p&1<<E)!=0&&r.set(i),i++}}return r}}class sn{constructor(e,t){t?this.decodedInformation=null:(this.finished=e,this.decodedInformation=t)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Wr{constructor(e){this.newPosition=e}getNewPosition(){return this.newPosition}}class ct extends Wr{constructor(e,t){super(e),this.value=t}getValue(){return this.value}isFNC1(){return this.value===ct.FNC1}}ct.FNC1="$";class on extends Wr{constructor(e,t,n){super(e),n?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=t}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class pt extends Wr{constructor(e,t,n){if(super(e),t<0||t>10||n<0||n>10)throw new U;this.firstDigit=t,this.secondDigit=n}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===pt.FNC1}isSecondDigitFNC1(){return this.secondDigit===pt.FNC1}isAnyFNC1(){return this.firstDigit===pt.FNC1||this.secondDigit===pt.FNC1}}pt.FNC1=10;class V{constructor(){}static parseFieldsInGeneralPurpose(e){if(!e)return null;if(e.length<2)throw new v;let t=e.substring(0,2);for(let i of V.TWO_DIGIT_DATA_LENGTH)if(i[0]===t)return i[1]===V.VARIABLE_LENGTH?V.processVariableAI(2,i[2],e):V.processFixedAI(2,i[1],e);if(e.length<3)throw new v;let n=e.substring(0,3);for(let i of V.THREE_DIGIT_DATA_LENGTH)if(i[0]===n)return i[1]===V.VARIABLE_LENGTH?V.processVariableAI(3,i[2],e):V.processFixedAI(3,i[1],e);for(let i of V.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(i[0]===n)return i[1]===V.VARIABLE_LENGTH?V.processVariableAI(4,i[2],e):V.processFixedAI(4,i[1],e);if(e.length<4)throw new v;let r=e.substring(0,4);for(let i of V.FOUR_DIGIT_DATA_LENGTH)if(i[0]===r)return i[1]===V.VARIABLE_LENGTH?V.processVariableAI(4,i[2],e):V.processFixedAI(4,i[1],e);throw new v}static processFixedAI(e,t,n){if(n.length<e)throw new v;let r=n.substring(0,e);if(n.length<e+t)throw new v;let i=n.substring(e,e+t),o=n.substring(e+t),c="("+r+")"+i,u=V.parseFieldsInGeneralPurpose(o);return u==null?c:c+u}static processVariableAI(e,t,n){let r=n.substring(0,e),i;n.length<e+t?i=n.length:i=e+t;let o=n.substring(e,i),c=n.substring(i),u="("+r+")"+o,f=V.parseFieldsInGeneralPurpose(c);return f==null?u:u+f}}V.VARIABLE_LENGTH=[],V.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",V.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",V.VARIABLE_LENGTH,20],["22",V.VARIABLE_LENGTH,29],["30",V.VARIABLE_LENGTH,8],["37",V.VARIABLE_LENGTH,8],["90",V.VARIABLE_LENGTH,30],["91",V.VARIABLE_LENGTH,30],["92",V.VARIABLE_LENGTH,30],["93",V.VARIABLE_LENGTH,30],["94",V.VARIABLE_LENGTH,30],["95",V.VARIABLE_LENGTH,30],["96",V.VARIABLE_LENGTH,30],["97",V.VARIABLE_LENGTH,3],["98",V.VARIABLE_LENGTH,30],["99",V.VARIABLE_LENGTH,30]],V.THREE_DIGIT_DATA_LENGTH=[["240",V.VARIABLE_LENGTH,30],["241",V.VARIABLE_LENGTH,30],["242",V.VARIABLE_LENGTH,6],["250",V.VARIABLE_LENGTH,30],["251",V.VARIABLE_LENGTH,30],["253",V.VARIABLE_LENGTH,17],["254",V.VARIABLE_LENGTH,20],["400",V.VARIABLE_LENGTH,30],["401",V.VARIABLE_LENGTH,30],["402",17],["403",V.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",V.VARIABLE_LENGTH,20],["421",V.VARIABLE_LENGTH,15],["422",3],["423",V.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],V.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",V.VARIABLE_LENGTH,15],["391",V.VARIABLE_LENGTH,18],["392",V.VARIABLE_LENGTH,15],["393",V.VARIABLE_LENGTH,18],["703",V.VARIABLE_LENGTH,30]],V.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",V.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",V.VARIABLE_LENGTH,20],["8003",V.VARIABLE_LENGTH,30],["8004",V.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",V.VARIABLE_LENGTH,30],["8008",V.VARIABLE_LENGTH,12],["8018",18],["8020",V.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",V.VARIABLE_LENGTH,70],["8200",V.VARIABLE_LENGTH,70]];class En{constructor(e){this.buffer=new Ee,this.information=e}decodeAllCodes(e,t){let n=t,r=null;do{let i=this.decodeGeneralPurposeField(n,r),o=V.parseFieldsInGeneralPurpose(i.getNewString());if(o!=null&&e.append(o),i.isRemaining()?r=""+i.getRemainingValue():r=null,n===i.getNewPosition())break;n=i.getNewPosition()}while(!0);return e.toString()}isStillNumeric(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(let t=e;t<e+3;++t)if(this.information.get(t))return!0;return this.information.get(e+3)}decodeNumeric(e){if(e+7>this.information.getSize()){let i=this.extractNumericValueFromBitArray(e,4);return i===0?new pt(this.information.getSize(),pt.FNC1,pt.FNC1):new pt(this.information.getSize(),i-1,pt.FNC1)}let t=this.extractNumericValueFromBitArray(e,7),n=(t-8)/11,r=(t-8)%11;return new pt(e+7,n,r)}extractNumericValueFromBitArray(e,t){return En.extractNumericValueFromBitArray(this.information,e,t)}static extractNumericValueFromBitArray(e,t,n){let r=0;for(let i=0;i<n;++i)e.get(t+i)&&(r|=1<<n-i-1);return r}decodeGeneralPurposeField(e,t){this.buffer.setLengthToZero(),t!=null&&this.buffer.append(t),this.current.setPosition(e);let n=this.parseBlocks();return n!=null&&n.isRemaining()?new on(this.current.getPosition(),this.buffer.toString(),n.getRemainingValue()):new on(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let e,t;do{let n=this.current.getPosition();if(this.current.isAlpha()?(t=this.parseAlphaBlock(),e=t.isFinished()):this.current.isIsoIec646()?(t=this.parseIsoIec646Block(),e=t.isFinished()):(t=this.parseNumericBlock(),e=t.isFinished()),!(n!==this.current.getPosition())&&!e)break}while(!e);return t.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){let t;return e.isSecondDigitFNC1()?t=new on(this.current.getPosition(),this.buffer.toString()):t=new on(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new sn(!0,t)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){let t=new on(this.current.getPosition(),this.buffer.toString());return new sn(!0,t)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new sn(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let t=new on(this.current.getPosition(),this.buffer.toString());return new sn(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new sn(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let t=new on(this.current.getPosition(),this.buffer.toString());return new sn(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new sn(!1)}isStillIsoIec646(e){if(e+5>this.information.getSize())return!1;let t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+7>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<116)return!0;if(e+8>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(e,8);return r>=232&&r<253}decodeIsoIec646(e){let t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new ct(e+5,ct.FNC1);if(t>=5&&t<15)return new ct(e+5,"0"+(t-5));let n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<90)return new ct(e+7,""+(n+1));if(n>=90&&n<116)return new ct(e+7,""+(n+7));let r=this.extractNumericValueFromBitArray(e,8),i;switch(r){case 232:i="!";break;case 233:i='"';break;case 234:i="%";break;case 235:i="&";break;case 236:i="'";break;case 237:i="(";break;case 238:i=")";break;case 239:i="*";break;case 240:i="+";break;case 241:i=",";break;case 242:i="-";break;case 243:i=".";break;case 244:i="/";break;case 245:i=":";break;case 246:i=";";break;case 247:i="<";break;case 248:i="=";break;case 249:i=">";break;case 250:i="?";break;case 251:i="_";break;case 252:i=" ";break;default:throw new U}return new ct(e+8,i)}isStillAlpha(e){if(e+5>this.information.getSize())return!1;let t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+6>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(e,6);return n>=16&&n<63}decodeAlphanumeric(e){let t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new ct(e+5,ct.FNC1);if(t>=5&&t<15)return new ct(e+5,"0"+(t-5));let n=this.extractNumericValueFromBitArray(e,6);if(n>=32&&n<58)return new ct(e+6,""+(n+33));let r;switch(n){case 58:r="*";break;case 59:r=",";break;case 60:r="-";break;case 61:r=".";break;case 62:r="/";break;default:throw new Nt("Decoding invalid alphanumeric value: "+n)}return new ct(e+6,r)}isAlphaTo646ToAlphaLatch(e){if(e+1>this.information.getSize())return!1;for(let t=0;t<5&&t+e<this.information.getSize();++t)if(t===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+t))return!1;return!0}isAlphaOr646ToNumericLatch(e){if(e+3>this.information.getSize())return!1;for(let t=e;t<e+3;++t)if(this.information.get(t))return!1;return!0}isNumericToAlphaNumericLatch(e){if(e+1>this.information.getSize())return!1;for(let t=0;t<4&&t+e<this.information.getSize();++t)if(this.information.get(e+t))return!1;return!0}}class Yr{constructor(e){this.information=e,this.generalDecoder=new En(e)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class lt extends Yr{constructor(e){super(e)}encodeCompressedGtin(e,t){e.append("(01)");let n=e.length();e.append("9"),this.encodeCompressedGtinWithoutAI(e,t,n)}encodeCompressedGtinWithoutAI(e,t,n){for(let r=0;r<4;++r){let i=this.getGeneralDecoder().extractNumericValueFromBitArray(t+10*r,10);i/100===0&&e.append("0"),i/10===0&&e.append("0"),e.append(i)}lt.appendCheckDigit(e,n)}static appendCheckDigit(e,t){let n=0;for(let r=0;r<13;r++){let i=e.charAt(r+t).charCodeAt(0)-48;n+=(r&1)===0?3*i:i}n=10-n%10,n===10&&(n=0),e.append(n)}}lt.GTIN_SIZE=40;class mn extends lt{constructor(e){super(e)}parseInformation(){let e=new Ee;e.append("(01)");let t=e.length(),n=this.getGeneralDecoder().extractNumericValueFromBitArray(mn.HEADER_SIZE,4);return e.append(n),this.encodeCompressedGtinWithoutAI(e,mn.HEADER_SIZE+4,t),this.getGeneralDecoder().decodeAllCodes(e,mn.HEADER_SIZE+44)}}mn.HEADER_SIZE=4;class fr extends Yr{constructor(e){super(e)}parseInformation(){let e=new Ee;return this.getGeneralDecoder().decodeAllCodes(e,fr.HEADER_SIZE)}}fr.HEADER_SIZE=5;class hr extends lt{constructor(e){super(e)}encodeCompressedWeight(e,t,n){let r=this.getGeneralDecoder().extractNumericValueFromBitArray(t,n);this.addWeightCode(e,r);let i=this.checkWeight(r),o=1e5;for(let c=0;c<5;++c)i/o===0&&e.append("0"),o/=10;e.append(i)}}class Ot extends hr{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()!=Ot.HEADER_SIZE+hr.GTIN_SIZE+Ot.WEIGHT_SIZE)throw new v;let e=new Ee;return this.encodeCompressedGtin(e,Ot.HEADER_SIZE),this.encodeCompressedWeight(e,Ot.HEADER_SIZE+hr.GTIN_SIZE,Ot.WEIGHT_SIZE),e.toString()}}Ot.HEADER_SIZE=5,Ot.WEIGHT_SIZE=15;class Sa extends Ot{constructor(e){super(e)}addWeightCode(e,t){e.append("(3103)")}checkWeight(e){return e}}class ba extends Ot{constructor(e){super(e)}addWeightCode(e,t){t<1e4?e.append("(3202)"):e.append("(3203)")}checkWeight(e){return e<1e4?e:e-1e4}}class Dt extends lt{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<Dt.HEADER_SIZE+lt.GTIN_SIZE)throw new v;let e=new Ee;this.encodeCompressedGtin(e,Dt.HEADER_SIZE);let t=this.getGeneralDecoder().extractNumericValueFromBitArray(Dt.HEADER_SIZE+lt.GTIN_SIZE,Dt.LAST_DIGIT_SIZE);e.append("(392"),e.append(t),e.append(")");let n=this.getGeneralDecoder().decodeGeneralPurposeField(Dt.HEADER_SIZE+lt.GTIN_SIZE+Dt.LAST_DIGIT_SIZE,null);return e.append(n.getNewString()),e.toString()}}Dt.HEADER_SIZE=8,Dt.LAST_DIGIT_SIZE=2;class it extends lt{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<it.HEADER_SIZE+lt.GTIN_SIZE)throw new v;let e=new Ee;this.encodeCompressedGtin(e,it.HEADER_SIZE);let t=this.getGeneralDecoder().extractNumericValueFromBitArray(it.HEADER_SIZE+lt.GTIN_SIZE,it.LAST_DIGIT_SIZE);e.append("(393"),e.append(t),e.append(")");let n=this.getGeneralDecoder().extractNumericValueFromBitArray(it.HEADER_SIZE+lt.GTIN_SIZE+it.LAST_DIGIT_SIZE,it.FIRST_THREE_DIGITS_SIZE);n/100==0&&e.append("0"),n/10==0&&e.append("0"),e.append(n);let r=this.getGeneralDecoder().decodeGeneralPurposeField(it.HEADER_SIZE+lt.GTIN_SIZE+it.LAST_DIGIT_SIZE+it.FIRST_THREE_DIGITS_SIZE,null);return e.append(r.getNewString()),e.toString()}}it.HEADER_SIZE=8,it.LAST_DIGIT_SIZE=2,it.FIRST_THREE_DIGITS_SIZE=10;class Oe extends hr{constructor(e,t,n){super(e),this.dateCode=n,this.firstAIdigits=t}parseInformation(){if(this.getInformation().getSize()!=Oe.HEADER_SIZE+Oe.GTIN_SIZE+Oe.WEIGHT_SIZE+Oe.DATE_SIZE)throw new v;let e=new Ee;return this.encodeCompressedGtin(e,Oe.HEADER_SIZE),this.encodeCompressedWeight(e,Oe.HEADER_SIZE+Oe.GTIN_SIZE,Oe.WEIGHT_SIZE),this.encodeCompressedDate(e,Oe.HEADER_SIZE+Oe.GTIN_SIZE+Oe.WEIGHT_SIZE),e.toString()}encodeCompressedDate(e,t){let n=this.getGeneralDecoder().extractNumericValueFromBitArray(t,Oe.DATE_SIZE);if(n==38400)return;e.append("("),e.append(this.dateCode),e.append(")");let r=n%32;n/=32;let i=n%12+1;n/=12;let o=n;o/10==0&&e.append("0"),e.append(o),i/10==0&&e.append("0"),e.append(i),r/10==0&&e.append("0"),e.append(r)}addWeightCode(e,t){e.append("("),e.append(this.firstAIdigits),e.append(t/1e5),e.append(")")}checkWeight(e){return e%1e5}}Oe.HEADER_SIZE=8,Oe.WEIGHT_SIZE=20,Oe.DATE_SIZE=16;function ls(w){try{if(w.get(1))return new mn(w);if(!w.get(2))return new fr(w);switch(En.extractNumericValueFromBitArray(w,1,4)){case 4:return new Sa(w);case 5:return new ba(w)}switch(En.extractNumericValueFromBitArray(w,1,5)){case 12:return new Dt(w);case 13:return new it(w)}switch(En.extractNumericValueFromBitArray(w,1,7)){case 56:return new Oe(w,"310","11");case 57:return new Oe(w,"320","11");case 58:return new Oe(w,"310","13");case 59:return new Oe(w,"320","13");case 60:return new Oe(w,"310","15");case 61:return new Oe(w,"320","15");case 62:return new Oe(w,"310","17");case 63:return new Oe(w,"320","17")}}catch(e){throw console.log(e),new Nt("unknown decoder: "+w)}}class Gt{constructor(e,t,n,r){this.leftchar=e,this.rightchar=t,this.finderpattern=n,this.maybeLast=r}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(e,t){return e instanceof Gt?Gt.equalsOrNull(e.leftchar,t.leftchar)&&Gt.equalsOrNull(e.rightchar,t.rightchar)&&Gt.equalsOrNull(e.finderpattern,t.finderpattern):!1}static equalsOrNull(e,t){return e===null?t===null:Gt.equals(e,t)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Xr{constructor(e,t,n){this.pairs=e,this.rowNumber=t,this.wasReversed=n}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(e){return this.checkEqualitity(this,e)}toString(){return"{ "+this.pairs+" }"}equals(e,t){return e instanceof Xr?this.checkEqualitity(e,t)&&e.wasReversed===t.wasReversed:!1}checkEqualitity(e,t){if(!e||!t)return;let n;return e.forEach((r,i)=>{t.forEach(o=>{r.getLeftChar().getValue()===o.getLeftChar().getValue()&&r.getRightChar().getValue()===o.getRightChar().getValue()&&r.getFinderPatter().getValue()===o.getFinderPatter().getValue()&&(n=!0)})}),n}}class L extends Je{constructor(e){super(...arguments),this.pairs=new Array(L.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=e===!0}decodeRow(e,t,n){this.pairs.length=0,this.startFromEven=!1;try{return L.constructResult(this.decodeRow2pairs(e,t))}catch(r){this.verbose&&console.log(r)}return this.pairs.length=0,this.startFromEven=!0,L.constructResult(this.decodeRow2pairs(e,t))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(e,t){let n=!1;for(;!n;)try{this.pairs.push(this.retrieveNextPair(t,this.pairs,e))}catch(i){if(i instanceof v){if(!this.pairs.length)throw new v;n=!0}}if(this.checkChecksum())return this.pairs;let r;if(this.rows.length?r=!0:r=!1,this.storeRow(e,!1),r){let i=this.checkRowsBoolean(!1);if(i!=null||(i=this.checkRowsBoolean(!0),i!=null))return i}throw new v}checkRowsBoolean(e){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,e&&(this.rows=this.rows.reverse());let t=null;try{t=this.checkRows(new Array,0)}catch(n){this.verbose&&console.log(n)}return e&&(this.rows=this.rows.reverse()),t}checkRows(e,t){for(let n=t;n<this.rows.length;n++){let r=this.rows[n];this.pairs.length=0;for(let o of e)this.pairs.push(o.getPairs());if(this.pairs.push(r.getPairs()),!L.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let i=new Array(e);i.push(r);try{return this.checkRows(i,n+1)}catch(o){this.verbose&&console.log(o)}}throw new v}static isValidSequence(e){for(let t of L.FINDER_PATTERN_SEQUENCES){if(e.length>t.length)continue;let n=!0;for(let r=0;r<e.length;r++)if(e[r].getFinderPattern().getValue()!=t[r]){n=!1;break}if(n)return!0}return!1}storeRow(e,t){let n=0,r=!1,i=!1;for(;n<this.rows.length;){let o=this.rows[n];if(o.getRowNumber()>e){i=o.isEquivalent(this.pairs);break}r=o.isEquivalent(this.pairs),n++}i||r||L.isPartialRow(this.pairs,this.rows)||(this.rows.push(n,new Xr(this.pairs,e,t)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(e,t){for(let n of t)if(n.getPairs().length!==e.length){for(let r of n.getPairs())for(let i of e)if(Gt.equals(r,i))break}}static isPartialRow(e,t){for(let n of t){let r=!0;for(let i of e){let o=!1;for(let c of n.getPairs())if(i.equals(c)){o=!0;break}if(!o){r=!1;break}}if(r)return!0}return!1}getRows(){return this.rows}static constructResult(e){let t=ya.buildBitArray(e),r=ls(t).parseInformation(),i=e[0].getFinderPattern().getResultPoints(),o=e[e.length-1].getFinderPattern().getResultPoints(),c=[i[0],i[1],o[0],o[1]];return new nt(r,null,null,c,J.RSS_EXPANDED,null)}checkChecksum(){let e=this.pairs.get(0),t=e.getLeftChar(),n=e.getRightChar();if(n==null)return!1;let r=n.getChecksumPortion(),i=2;for(let c=1;c<this.pairs.size();++c){let u=this.pairs.get(c);r+=u.getLeftChar().getChecksumPortion(),i++;let f=u.getRightChar();f!=null&&(r+=f.getChecksumPortion(),i++)}return r%=211,211*(i-4)+r==t.getValue()}static getNextSecondBar(e,t){let n;return e.get(t)?(n=e.getNextUnset(t),n=e.getNextSet(n)):(n=e.getNextSet(t),n=e.getNextUnset(n)),n}retrieveNextPair(e,t,n){let r=t.length%2==0;this.startFromEven&&(r=!r);let i,o=!0,c=-1;do this.findNextPair(e,t,c),i=this.parseFoundFinderPattern(e,n,r),i==null?c=L.getNextSecondBar(e,this.startEnd[0]):o=!1;while(o);let u=this.decodeDataCharacter(e,i,r,!0);if(!this.isEmptyPair(t)&&t[t.length-1].mustBeLast())throw new v;let f;try{f=this.decodeDataCharacter(e,i,r,!1)}catch(x){f=null,this.verbose&&console.log(x)}return new Gt(u,f,i,!0)}isEmptyPair(e){return e.length===0}findNextPair(e,t,n){let r=this.getDecodeFinderCounters();r[0]=0,r[1]=0,r[2]=0,r[3]=0;let i=e.getSize(),o;n>=0?o=n:this.isEmptyPair(t)?o=0:o=t[t.length-1].getFinderPattern().getStartEnd()[1];let c=t.length%2!=0;this.startFromEven&&(c=!c);let u=!1;for(;o<i&&(u=!e.get(o),!!u);)o++;let f=0,x=o;for(let p=o;p<i;p++)if(e.get(p)!=u)r[f]++;else{if(f==3){if(c&&L.reverseCounters(r),L.isFinderPattern(r)){this.startEnd[0]=x,this.startEnd[1]=p;return}c&&L.reverseCounters(r),x+=r[0]+r[1],r[0]=r[2],r[1]=r[3],r[2]=0,r[3]=0,f--}else f++;r[f]=1,u=!u}throw new v}static reverseCounters(e){let t=e.length;for(let n=0;n<t/2;++n){let r=e[n];e[n]=e[t-n-1],e[t-n-1]=r}}parseFoundFinderPattern(e,t,n){let r,i,o;if(n){let f=this.startEnd[0]-1;for(;f>=0&&!e.get(f);)f--;f++,r=this.startEnd[0]-f,i=f,o=this.startEnd[1]}else i=this.startEnd[0],o=e.getNextUnset(this.startEnd[1]+1),r=o-this.startEnd[1];let c=this.getDecodeFinderCounters();q.arraycopy(c,0,c,1,c.length-1),c[0]=r;let u;try{u=this.parseFinderValue(c,L.FINDER_PATTERNS)}catch{return null}return new ur(u,[i,o],i,o,t)}decodeDataCharacter(e,t,n,r){let i=this.getDataCharacterCounters();for(let Se=0;Se<i.length;Se++)i[Se]=0;if(r)L.recordPatternInReverse(e,t.getStartEnd()[0],i);else{L.recordPattern(e,t.getStartEnd()[1],i);for(let Se=0,qe=i.length-1;Se<qe;Se++,qe--){let dt=i[Se];i[Se]=i[qe],i[qe]=dt}}let o=17,c=fe.sum(new Int32Array(i))/o,u=(t.getStartEnd()[1]-t.getStartEnd()[0])/15;if(Math.abs(c-u)/u>.3)throw new v;let f=this.getOddCounts(),x=this.getEvenCounts(),p=this.getOddRoundingErrors(),E=this.getEvenRoundingErrors();for(let Se=0;Se<i.length;Se++){let qe=1*i[Se]/c,dt=qe+.5;if(dt<1){if(qe<.3)throw new v;dt=1}else if(dt>8){if(qe>8.7)throw new v;dt=8}let Tn=Se/2;(Se&1)==0?(f[Tn]=dt,p[Tn]=qe-dt):(x[Tn]=dt,E[Tn]=qe-dt)}this.adjustOddEvenCounts(o);let y=4*t.getValue()+(n?0:2)+(r?0:1)-1,b=0,T=0;for(let Se=f.length-1;Se>=0;Se--){if(L.isNotA1left(t,n,r)){let qe=L.WEIGHTS[y][2*Se];T+=f[Se]*qe}b+=f[Se]}let M=0;for(let Se=x.length-1;Se>=0;Se--)if(L.isNotA1left(t,n,r)){let qe=L.WEIGHTS[y][2*Se+1];M+=x[Se]*qe}let R=T+M;if((b&1)!=0||b>13||b<4)throw new v;let P=(13-b)/2,F=L.SYMBOL_WIDEST[P],B=9-F,ce=Mt.getRSSvalue(f,F,!0),re=Mt.getRSSvalue(x,B,!1),ft=L.EVEN_TOTAL_SUBSET[P],St=L.GSUM[P],ht=ce*ft+re+St;return new Cn(ht,R)}static isNotA1left(e,t,n){return!(e.getValue()==0&&t&&n)}adjustOddEvenCounts(e){let t=fe.sum(new Int32Array(this.getOddCounts())),n=fe.sum(new Int32Array(this.getEvenCounts())),r=!1,i=!1;t>13?i=!0:t<4&&(r=!0);let o=!1,c=!1;n>13?c=!0:n<4&&(o=!0);let u=t+n-e,f=(t&1)==1,x=(n&1)==0;if(u==1)if(f){if(x)throw new v;i=!0}else{if(!x)throw new v;c=!0}else if(u==-1)if(f){if(x)throw new v;r=!0}else{if(!x)throw new v;o=!0}else if(u==0){if(f){if(!x)throw new v;t<n?(r=!0,c=!0):(i=!0,o=!0)}else if(x)throw new v}else throw new v;if(r){if(i)throw new v;L.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(i&&L.decrement(this.getOddCounts(),this.getOddRoundingErrors()),o){if(c)throw new v;L.increment(this.getEvenCounts(),this.getOddRoundingErrors())}c&&L.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}L.SYMBOL_WIDEST=[7,5,4,3,1],L.EVEN_TOTAL_SUBSET=[4,20,52,104,204],L.GSUM=[0,348,1388,2948,3988],L.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],L.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],L.FINDER_PAT_A=0,L.FINDER_PAT_B=1,L.FINDER_PAT_C=2,L.FINDER_PAT_D=3,L.FINDER_PAT_E=4,L.FINDER_PAT_F=5,L.FINDER_PATTERN_SEQUENCES=[[L.FINDER_PAT_A,L.FINDER_PAT_A],[L.FINDER_PAT_A,L.FINDER_PAT_B,L.FINDER_PAT_B],[L.FINDER_PAT_A,L.FINDER_PAT_C,L.FINDER_PAT_B,L.FINDER_PAT_D],[L.FINDER_PAT_A,L.FINDER_PAT_E,L.FINDER_PAT_B,L.FINDER_PAT_D,L.FINDER_PAT_C],[L.FINDER_PAT_A,L.FINDER_PAT_E,L.FINDER_PAT_B,L.FINDER_PAT_D,L.FINDER_PAT_D,L.FINDER_PAT_F],[L.FINDER_PAT_A,L.FINDER_PAT_E,L.FINDER_PAT_B,L.FINDER_PAT_D,L.FINDER_PAT_E,L.FINDER_PAT_F,L.FINDER_PAT_F],[L.FINDER_PAT_A,L.FINDER_PAT_A,L.FINDER_PAT_B,L.FINDER_PAT_B,L.FINDER_PAT_C,L.FINDER_PAT_C,L.FINDER_PAT_D,L.FINDER_PAT_D],[L.FINDER_PAT_A,L.FINDER_PAT_A,L.FINDER_PAT_B,L.FINDER_PAT_B,L.FINDER_PAT_C,L.FINDER_PAT_C,L.FINDER_PAT_D,L.FINDER_PAT_E,L.FINDER_PAT_E],[L.FINDER_PAT_A,L.FINDER_PAT_A,L.FINDER_PAT_B,L.FINDER_PAT_B,L.FINDER_PAT_C,L.FINDER_PAT_C,L.FINDER_PAT_D,L.FINDER_PAT_E,L.FINDER_PAT_F,L.FINDER_PAT_F],[L.FINDER_PAT_A,L.FINDER_PAT_A,L.FINDER_PAT_B,L.FINDER_PAT_B,L.FINDER_PAT_C,L.FINDER_PAT_D,L.FINDER_PAT_D,L.FINDER_PAT_E,L.FINDER_PAT_E,L.FINDER_PAT_F,L.FINDER_PAT_F]],L.MAX_PAIRS=11;class Ta extends Cn{constructor(e,t,n){super(e,t),this.count=0,this.finderPattern=n}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Le extends Je{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(e,t,n){const r=this.decodePair(t,!1,e,n);Le.addOrTally(this.possibleLeftPairs,r),t.reverse();let i=this.decodePair(t,!0,e,n);Le.addOrTally(this.possibleRightPairs,i),t.reverse();for(let o of this.possibleLeftPairs)if(o.getCount()>1){for(let c of this.possibleRightPairs)if(c.getCount()>1&&Le.checkChecksum(o,c))return Le.constructResult(o,c)}throw new v}static addOrTally(e,t){if(t==null)return;let n=!1;for(let r of e)if(r.getValue()===t.getValue()){r.incrementCount(),n=!0;break}n||e.push(t)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(e,t){let n=4537077*e.getValue()+t.getValue(),r=new String(n).toString(),i=new Ee;for(let f=13-r.length;f>0;f--)i.append("0");i.append(r);let o=0;for(let f=0;f<13;f++){let x=i.charAt(f).charCodeAt(0)-48;o+=(f&1)===0?3*x:x}o=10-o%10,o===10&&(o=0),i.append(o.toString());let c=e.getFinderPattern().getResultPoints(),u=t.getFinderPattern().getResultPoints();return new nt(i.toString(),null,0,[c[0],c[1],u[0],u[1]],J.RSS_14,new Date().getTime())}static checkChecksum(e,t){let n=(e.getChecksumPortion()+16*t.getChecksumPortion())%79,r=9*e.getFinderPattern().getValue()+t.getFinderPattern().getValue();return r>72&&r--,r>8&&r--,n===r}decodePair(e,t,n,r){try{let i=this.findFinderPattern(e,t),o=this.parseFoundFinderPattern(e,n,t,i),c=r==null?null:r.get(ue.NEED_RESULT_POINT_CALLBACK);if(c!=null){let x=(i[0]+i[1])/2;t&&(x=e.getSize()-1-x),c.foundPossibleResultPoint(new X(x,n))}let u=this.decodeDataCharacter(e,o,!0),f=this.decodeDataCharacter(e,o,!1);return new Ta(1597*u.getValue()+f.getValue(),u.getChecksumPortion()+4*f.getChecksumPortion(),o)}catch{return null}}decodeDataCharacter(e,t,n){let r=this.getDataCharacterCounters();for(let M=0;M<r.length;M++)r[M]=0;if(n)ke.recordPatternInReverse(e,t.getStartEnd()[0],r);else{ke.recordPattern(e,t.getStartEnd()[1]+1,r);for(let M=0,R=r.length-1;M<R;M++,R--){let P=r[M];r[M]=r[R],r[R]=P}}let i=n?16:15,o=fe.sum(new Int32Array(r))/i,c=this.getOddCounts(),u=this.getEvenCounts(),f=this.getOddRoundingErrors(),x=this.getEvenRoundingErrors();for(let M=0;M<r.length;M++){let R=r[M]/o,P=Math.floor(R+.5);P<1?P=1:P>8&&(P=8);let F=Math.floor(M/2);(M&1)===0?(c[F]=P,f[F]=R-P):(u[F]=P,x[F]=R-P)}this.adjustOddEvenCounts(n,i);let p=0,E=0;for(let M=c.length-1;M>=0;M--)E*=9,E+=c[M],p+=c[M];let y=0,b=0;for(let M=u.length-1;M>=0;M--)y*=9,y+=u[M],b+=u[M];let T=E+3*y;if(n){if((p&1)!==0||p>12||p<4)throw new v;let M=(12-p)/2,R=Le.OUTSIDE_ODD_WIDEST[M],P=9-R,F=Mt.getRSSvalue(c,R,!1),B=Mt.getRSSvalue(u,P,!0),ce=Le.OUTSIDE_EVEN_TOTAL_SUBSET[M],re=Le.OUTSIDE_GSUM[M];return new Cn(F*ce+B+re,T)}else{if((b&1)!==0||b>10||b<4)throw new v;let M=(10-b)/2,R=Le.INSIDE_ODD_WIDEST[M],P=9-R,F=Mt.getRSSvalue(c,R,!0),B=Mt.getRSSvalue(u,P,!1),ce=Le.INSIDE_ODD_TOTAL_SUBSET[M],re=Le.INSIDE_GSUM[M];return new Cn(B*ce+F+re,T)}}findFinderPattern(e,t){let n=this.getDecodeFinderCounters();n[0]=0,n[1]=0,n[2]=0,n[3]=0;let r=e.getSize(),i=!1,o=0;for(;o<r&&(i=!e.get(o),t!==i);)o++;let c=0,u=o;for(let f=o;f<r;f++)if(e.get(f)!==i)n[c]++;else{if(c===3){if(Je.isFinderPattern(n))return[u,f];u+=n[0]+n[1],n[0]=n[2],n[1]=n[3],n[2]=0,n[3]=0,c--}else c++;n[c]=1,i=!i}throw new v}parseFoundFinderPattern(e,t,n,r){let i=e.get(r[0]),o=r[0]-1;for(;o>=0&&i!==e.get(o);)o--;o++;const c=r[0]-o,u=this.getDecodeFinderCounters(),f=new Int32Array(u.length);q.arraycopy(u,0,f,1,u.length-1),f[0]=c;const x=this.parseFinderValue(f,Le.FINDER_PATTERNS);let p=o,E=r[1];return n&&(p=e.getSize()-1-p,E=e.getSize()-1-E),new ur(x,[o,r[1]],p,E,t)}adjustOddEvenCounts(e,t){let n=fe.sum(new Int32Array(this.getOddCounts())),r=fe.sum(new Int32Array(this.getEvenCounts())),i=!1,o=!1,c=!1,u=!1;e?(n>12?o=!0:n<4&&(i=!0),r>12?u=!0:r<4&&(c=!0)):(n>11?o=!0:n<5&&(i=!0),r>10?u=!0:r<4&&(c=!0));let f=n+r-t,x=(n&1)===(e?1:0),p=(r&1)===1;if(f===1)if(x){if(p)throw new v;o=!0}else{if(!p)throw new v;u=!0}else if(f===-1)if(x){if(p)throw new v;i=!0}else{if(!p)throw new v;c=!0}else if(f===0){if(x){if(!p)throw new v;n<r?(i=!0,u=!0):(o=!0,c=!0)}else if(p)throw new v}else throw new v;if(i){if(o)throw new v;Je.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(o&&Je.decrement(this.getOddCounts(),this.getOddRoundingErrors()),c){if(u)throw new v;Je.increment(this.getEvenCounts(),this.getOddRoundingErrors())}u&&Je.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Le.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Le.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Le.OUTSIDE_GSUM=[0,161,961,2015,2715],Le.INSIDE_GSUM=[0,336,1036,1516],Le.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Le.INSIDE_ODD_WIDEST=[2,4,6,8],Le.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class In extends ke{constructor(e,t){super(),this.readers=[],this.verbose=t===!0;const n=e?e.get(ue.POSSIBLE_FORMATS):null,r=e&&e.get(ue.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;n?((n.includes(J.EAN_13)||n.includes(J.UPC_A)||n.includes(J.EAN_8)||n.includes(J.UPC_E))&&this.readers.push(new Gr(e)),n.includes(J.CODE_39)&&this.readers.push(new He(r)),n.includes(J.CODE_128)&&this.readers.push(new H),n.includes(J.ITF)&&this.readers.push(new Ie),n.includes(J.RSS_14)&&this.readers.push(new Le),n.includes(J.RSS_EXPANDED)&&this.readers.push(new L(this.verbose))):(this.readers.push(new Gr(e)),this.readers.push(new He),this.readers.push(new Gr(e)),this.readers.push(new H),this.readers.push(new Ie),this.readers.push(new Le),this.readers.push(new L(this.verbose)))}decodeRow(e,t,n){for(let r=0;r<this.readers.length;r++)try{return this.readers[r].decodeRow(e,t,n)}catch{}throw new v}reset(){this.readers.forEach(e=>e.reset())}}class _a extends nn{constructor(e=500,t){super(new In(t),e,t)}}class pe{constructor(e,t,n){this.ecCodewords=e,this.ecBlocks=[t],n&&this.ecBlocks.push(n)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class we{constructor(e,t){this.count=e,this.dataCodewords=t}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class le{constructor(e,t,n,r,i,o){this.versionNumber=e,this.symbolSizeRows=t,this.symbolSizeColumns=n,this.dataRegionSizeRows=r,this.dataRegionSizeColumns=i,this.ecBlocks=o;let c=0;const u=o.getECCodewords(),f=o.getECBlocks();for(let x of f)c+=x.getCount()*(x.getDataCodewords()+u);this.totalCodewords=c}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(e,t){if((e&1)!==0||(t&1)!==0)throw new U;for(let n of le.VERSIONS)if(n.symbolSizeRows===e&&n.symbolSizeColumns===t)return n;throw new U}toString(){return""+this.versionNumber}static buildVersions(){return[new le(1,10,10,8,8,new pe(5,new we(1,3))),new le(2,12,12,10,10,new pe(7,new we(1,5))),new le(3,14,14,12,12,new pe(10,new we(1,8))),new le(4,16,16,14,14,new pe(12,new we(1,12))),new le(5,18,18,16,16,new pe(14,new we(1,18))),new le(6,20,20,18,18,new pe(18,new we(1,22))),new le(7,22,22,20,20,new pe(20,new we(1,30))),new le(8,24,24,22,22,new pe(24,new we(1,36))),new le(9,26,26,24,24,new pe(28,new we(1,44))),new le(10,32,32,14,14,new pe(36,new we(1,62))),new le(11,36,36,16,16,new pe(42,new we(1,86))),new le(12,40,40,18,18,new pe(48,new we(1,114))),new le(13,44,44,20,20,new pe(56,new we(1,144))),new le(14,48,48,22,22,new pe(68,new we(1,174))),new le(15,52,52,24,24,new pe(42,new we(2,102))),new le(16,64,64,14,14,new pe(56,new we(2,140))),new le(17,72,72,16,16,new pe(36,new we(4,92))),new le(18,80,80,18,18,new pe(48,new we(4,114))),new le(19,88,88,20,20,new pe(56,new we(4,144))),new le(20,96,96,22,22,new pe(68,new we(4,174))),new le(21,104,104,24,24,new pe(56,new we(6,136))),new le(22,120,120,18,18,new pe(68,new we(6,175))),new le(23,132,132,20,20,new pe(62,new we(8,163))),new le(24,144,144,22,22,new pe(62,new we(8,156),new we(2,155))),new le(25,8,18,6,16,new pe(7,new we(1,5))),new le(26,8,32,6,14,new pe(11,new we(1,10))),new le(27,12,26,10,24,new pe(14,new we(1,16))),new le(28,12,36,10,16,new pe(18,new we(1,22))),new le(29,16,36,14,16,new pe(24,new we(1,32))),new le(30,16,48,14,22,new pe(28,new we(1,49)))]}}le.VERSIONS=le.buildVersions();class Zr{constructor(e){const t=e.getHeight();if(t<8||t>144||(t&1)!==0)throw new U;this.version=Zr.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new Ve(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(e){const t=e.getHeight(),n=e.getWidth();return le.getVersionForDimensions(t,n)}readCodewords(){const e=new Int8Array(this.version.getTotalCodewords());let t=0,n=4,r=0;const i=this.mappingBitMatrix.getHeight(),o=this.mappingBitMatrix.getWidth();let c=!1,u=!1,f=!1,x=!1;do if(n===i&&r===0&&!c)e[t++]=this.readCorner1(i,o)&255,n-=2,r+=2,c=!0;else if(n===i-2&&r===0&&(o&3)!==0&&!u)e[t++]=this.readCorner2(i,o)&255,n-=2,r+=2,u=!0;else if(n===i+4&&r===2&&(o&7)===0&&!f)e[t++]=this.readCorner3(i,o)&255,n-=2,r+=2,f=!0;else if(n===i-2&&r===0&&(o&7)===4&&!x)e[t++]=this.readCorner4(i,o)&255,n-=2,r+=2,x=!0;else{do n<i&&r>=0&&!this.readMappingMatrix.get(r,n)&&(e[t++]=this.readUtah(n,r,i,o)&255),n-=2,r+=2;while(n>=0&&r<o);n+=1,r+=3;do n>=0&&r<o&&!this.readMappingMatrix.get(r,n)&&(e[t++]=this.readUtah(n,r,i,o)&255),n+=2,r-=2;while(n<i&&r>=0);n+=3,r+=1}while(n<i||r<o);if(t!==this.version.getTotalCodewords())throw new U;return e}readModule(e,t,n,r){return e<0&&(e+=n,t+=4-(n+4&7)),t<0&&(t+=r,e+=4-(r+4&7)),this.readMappingMatrix.set(t,e),this.mappingBitMatrix.get(t,e)}readUtah(e,t,n,r){let i=0;return this.readModule(e-2,t-2,n,r)&&(i|=1),i<<=1,this.readModule(e-2,t-1,n,r)&&(i|=1),i<<=1,this.readModule(e-1,t-2,n,r)&&(i|=1),i<<=1,this.readModule(e-1,t-1,n,r)&&(i|=1),i<<=1,this.readModule(e-1,t,n,r)&&(i|=1),i<<=1,this.readModule(e,t-2,n,r)&&(i|=1),i<<=1,this.readModule(e,t-1,n,r)&&(i|=1),i<<=1,this.readModule(e,t,n,r)&&(i|=1),i}readCorner1(e,t){let n=0;return this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,1,e,t)&&(n|=1),n<<=1,this.readModule(e-1,2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(2,t-1,e,t)&&(n|=1),n<<=1,this.readModule(3,t-1,e,t)&&(n|=1),n}readCorner2(e,t){let n=0;return this.readModule(e-3,0,e,t)&&(n|=1),n<<=1,this.readModule(e-2,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(0,t-4,e,t)&&(n|=1),n<<=1,this.readModule(0,t-3,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n}readCorner3(e,t){let n=0;return this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(0,t-3,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-3,e,t)&&(n|=1),n<<=1,this.readModule(1,t-2,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n}readCorner4(e,t){let n=0;return this.readModule(e-3,0,e,t)&&(n|=1),n<<=1,this.readModule(e-2,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(2,t-1,e,t)&&(n|=1),n<<=1,this.readModule(3,t-1,e,t)&&(n|=1),n}extractDataRegion(e){const t=this.version.getSymbolSizeRows(),n=this.version.getSymbolSizeColumns();if(e.getHeight()!==t)throw new N("Dimension of bitMatrix must match the version size");const r=this.version.getDataRegionSizeRows(),i=this.version.getDataRegionSizeColumns(),o=t/r|0,c=n/i|0,u=o*r,f=c*i,x=new Ve(f,u);for(let p=0;p<o;++p){const E=p*r;for(let y=0;y<c;++y){const b=y*i;for(let T=0;T<r;++T){const M=p*(r+2)+1+T,R=E+T;for(let P=0;P<i;++P){const F=y*(i+2)+1+P;if(e.get(F,M)){const B=b+P;x.set(B,R)}}}}}return x}}class Qr{constructor(e,t){this.numDataCodewords=e,this.codewords=t}static getDataBlocks(e,t){const n=t.getECBlocks();let r=0;const i=n.getECBlocks();for(let T of i)r+=T.getCount();const o=new Array(r);let c=0;for(let T of i)for(let M=0;M<T.getCount();M++){const R=T.getDataCodewords(),P=n.getECCodewords()+R;o[c++]=new Qr(R,new Uint8Array(P))}const f=o[0].codewords.length-n.getECCodewords(),x=f-1;let p=0;for(let T=0;T<x;T++)for(let M=0;M<c;M++)o[M].codewords[T]=e[p++];const E=t.getVersionNumber()===24,y=E?8:c;for(let T=0;T<y;T++)o[T].codewords[f-1]=e[p++];const b=o[0].codewords.length;for(let T=f;T<b;T++)for(let M=0;M<c;M++){const R=E?(M+8)%c:M,P=E&&R>7?T-1:T;o[R].codewords[P]=e[p++]}if(p!==e.length)throw new N;return o}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Kr{constructor(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(e){if(e<1||e>32||e>this.available())throw new N(""+e);let t=0,n=this.bitOffset,r=this.byteOffset;const i=this.bytes;if(n>0){const o=8-n,c=e<o?e:o,u=o-c,f=255>>8-c<<u;t=(i[r]&f)>>u,e-=c,n+=c,n===8&&(n=0,r++)}if(e>0){for(;e>=8;)t=t<<8|i[r]&255,r++,e-=8;if(e>0){const o=8-e,c=255>>o<<o;t=t<<e|(i[r]&c)>>o,n+=e}}return this.bitOffset=n,this.byteOffset=r,t}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var ze;(function(w){w[w.PAD_ENCODE=0]="PAD_ENCODE",w[w.ASCII_ENCODE=1]="ASCII_ENCODE",w[w.C40_ENCODE=2]="C40_ENCODE",w[w.TEXT_ENCODE=3]="TEXT_ENCODE",w[w.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",w[w.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",w[w.BASE256_ENCODE=6]="BASE256_ENCODE"})(ze||(ze={}));class Wt{static decode(e){const t=new Kr(e),n=new Ee,r=new Ee,i=new Array;let o=ze.ASCII_ENCODE;do if(o===ze.ASCII_ENCODE)o=this.decodeAsciiSegment(t,n,r);else{switch(o){case ze.C40_ENCODE:this.decodeC40Segment(t,n);break;case ze.TEXT_ENCODE:this.decodeTextSegment(t,n);break;case ze.ANSIX12_ENCODE:this.decodeAnsiX12Segment(t,n);break;case ze.EDIFACT_ENCODE:this.decodeEdifactSegment(t,n);break;case ze.BASE256_ENCODE:this.decodeBase256Segment(t,n,i);break;default:throw new U}o=ze.ASCII_ENCODE}while(o!==ze.PAD_ENCODE&&t.available()>0);return r.length()>0&&n.append(r.toString()),new Fn(e,n.toString(),i.length===0?null:i,null)}static decodeAsciiSegment(e,t,n){let r=!1;do{let i=e.readBits(8);if(i===0)throw new U;if(i<=128)return r&&(i+=128),t.append(String.fromCharCode(i-1)),ze.ASCII_ENCODE;if(i===129)return ze.PAD_ENCODE;if(i<=229){const o=i-130;o<10&&t.append("0"),t.append(""+o)}else switch(i){case 230:return ze.C40_ENCODE;case 231:return ze.BASE256_ENCODE;case 232:t.append("");break;case 233:case 234:break;case 235:r=!0;break;case 236:t.append("[)>05"),n.insert(0,"");break;case 237:t.append("[)>06"),n.insert(0,"");break;case 238:return ze.ANSIX12_ENCODE;case 239:return ze.TEXT_ENCODE;case 240:return ze.EDIFACT_ENCODE;case 241:break;default:if(i!==254||e.available()!==0)throw new U;break}}while(e.available()>0);return ze.ASCII_ENCODE}static decodeC40Segment(e,t){let n=!1;const r=[];let i=0;do{if(e.available()===8)return;const o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),r);for(let c=0;c<3;c++){const u=r[c];switch(i){case 0:if(u<3)i=u+1;else if(u<this.C40_BASIC_SET_CHARS.length){const f=this.C40_BASIC_SET_CHARS[u];n?(t.append(String.fromCharCode(f.charCodeAt(0)+128)),n=!1):t.append(f)}else throw new U;break;case 1:n?(t.append(String.fromCharCode(u+128)),n=!1):t.append(String.fromCharCode(u)),i=0;break;case 2:if(u<this.C40_SHIFT2_SET_CHARS.length){const f=this.C40_SHIFT2_SET_CHARS[u];n?(t.append(String.fromCharCode(f.charCodeAt(0)+128)),n=!1):t.append(f)}else switch(u){case 27:t.append("");break;case 30:n=!0;break;default:throw new U}i=0;break;case 3:n?(t.append(String.fromCharCode(u+224)),n=!1):t.append(String.fromCharCode(u+96)),i=0;break;default:throw new U}}}while(e.available()>0)}static decodeTextSegment(e,t){let n=!1,r=[],i=0;do{if(e.available()===8)return;const o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),r);for(let c=0;c<3;c++){const u=r[c];switch(i){case 0:if(u<3)i=u+1;else if(u<this.TEXT_BASIC_SET_CHARS.length){const f=this.TEXT_BASIC_SET_CHARS[u];n?(t.append(String.fromCharCode(f.charCodeAt(0)+128)),n=!1):t.append(f)}else throw new U;break;case 1:n?(t.append(String.fromCharCode(u+128)),n=!1):t.append(String.fromCharCode(u)),i=0;break;case 2:if(u<this.TEXT_SHIFT2_SET_CHARS.length){const f=this.TEXT_SHIFT2_SET_CHARS[u];n?(t.append(String.fromCharCode(f.charCodeAt(0)+128)),n=!1):t.append(f)}else switch(u){case 27:t.append("");break;case 30:n=!0;break;default:throw new U}i=0;break;case 3:if(u<this.TEXT_SHIFT3_SET_CHARS.length){const f=this.TEXT_SHIFT3_SET_CHARS[u];n?(t.append(String.fromCharCode(f.charCodeAt(0)+128)),n=!1):t.append(f),i=0}else throw new U;break;default:throw new U}}}while(e.available()>0)}static decodeAnsiX12Segment(e,t){const n=[];do{if(e.available()===8)return;const r=e.readBits(8);if(r===254)return;this.parseTwoBytes(r,e.readBits(8),n);for(let i=0;i<3;i++){const o=n[i];switch(o){case 0:t.append("\r");break;case 1:t.append("*");break;case 2:t.append(">");break;case 3:t.append(" ");break;default:if(o<14)t.append(String.fromCharCode(o+44));else if(o<40)t.append(String.fromCharCode(o+51));else throw new U;break}}}while(e.available()>0)}static parseTwoBytes(e,t,n){let r=(e<<8)+t-1,i=Math.floor(r/1600);n[0]=i,r-=i*1600,i=Math.floor(r/40),n[1]=i,n[2]=r-i*40}static decodeEdifactSegment(e,t){do{if(e.available()<=16)return;for(let n=0;n<4;n++){let r=e.readBits(6);if(r===31){const i=8-e.getBitOffset();i!==8&&e.readBits(i);return}(r&32)===0&&(r|=64),t.append(String.fromCharCode(r))}}while(e.available()>0)}static decodeBase256Segment(e,t,n){let r=1+e.getByteOffset();const i=this.unrandomize255State(e.readBits(8),r++);let o;if(i===0?o=e.available()/8|0:i<250?o=i:o=250*(i-249)+this.unrandomize255State(e.readBits(8),r++),o<0)throw new U;const c=new Uint8Array(o);for(let u=0;u<o;u++){if(e.available()<8)throw new U;c[u]=this.unrandomize255State(e.readBits(8),r++)}n.push(c);try{t.append(ot.decode(c,te.ISO88591))}catch(u){throw new Nt("Platform does not support required encoding: "+u.message)}}static unrandomize255State(e,t){const n=149*t%255+1,r=e-n;return r>=0?r:r+256}}Wt.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Wt.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Wt.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Wt.TEXT_SHIFT2_SET_CHARS=Wt.C40_SHIFT2_SET_CHARS,Wt.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class Na{constructor(){this.rsDecoder=new Un(ge.DATA_MATRIX_FIELD_256)}decode(e){const t=new Zr(e),n=t.getVersion(),r=t.readCodewords(),i=Qr.getDataBlocks(r,n);let o=0;for(let f of i)o+=f.getNumDataCodewords();const c=new Uint8Array(o),u=i.length;for(let f=0;f<u;f++){const x=i[f],p=x.getCodewords(),E=x.getNumDataCodewords();this.correctErrors(p,E);for(let y=0;y<E;y++)c[y*u+f]=p[y]}return Wt.decode(c)}correctErrors(e,t){const n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-t)}catch{throw new Y}for(let r=0;r<t;r++)e[r]=n[r]}}class Fe{constructor(e){this.image=e,this.rectangleDetector=new Ft(this.image)}detect(){const e=this.rectangleDetector.detect();let t=this.detectSolid1(e);if(t=this.detectSolid2(t),t[3]=this.correctTopRight(t),!t[3])throw new v;t=this.shiftToModuleCenter(t);const n=t[0],r=t[1],i=t[2],o=t[3];let c=this.transitionsBetween(n,o)+1,u=this.transitionsBetween(i,o)+1;(c&1)===1&&(c+=1),(u&1)===1&&(u+=1),4*c<7*u&&4*u<7*c&&(c=u=Math.max(c,u));let f=Fe.sampleGrid(this.image,n,r,i,o,c,u);return new cr(f,[n,r,i,o])}static shiftPoint(e,t,n){let r=(t.getX()-e.getX())/(n+1),i=(t.getY()-e.getY())/(n+1);return new X(e.getX()+r,e.getY()+i)}static moveAway(e,t,n){let r=e.getX(),i=e.getY();return r<t?r-=1:r+=1,i<n?i-=1:i+=1,new X(r,i)}detectSolid1(e){let t=e[0],n=e[1],r=e[3],i=e[2],o=this.transitionsBetween(t,n),c=this.transitionsBetween(n,r),u=this.transitionsBetween(r,i),f=this.transitionsBetween(i,t),x=o,p=[i,t,n,r];return x>c&&(x=c,p[0]=t,p[1]=n,p[2]=r,p[3]=i),x>u&&(x=u,p[0]=n,p[1]=r,p[2]=i,p[3]=t),x>f&&(p[0]=r,p[1]=i,p[2]=t,p[3]=n),p}detectSolid2(e){let t=e[0],n=e[1],r=e[2],i=e[3],o=this.transitionsBetween(t,i),c=Fe.shiftPoint(n,r,(o+1)*4),u=Fe.shiftPoint(r,n,(o+1)*4),f=this.transitionsBetween(c,t),x=this.transitionsBetween(u,i);return f<x?(e[0]=t,e[1]=n,e[2]=r,e[3]=i):(e[0]=n,e[1]=r,e[2]=i,e[3]=t),e}correctTopRight(e){let t=e[0],n=e[1],r=e[2],i=e[3],o=this.transitionsBetween(t,i),c=this.transitionsBetween(n,i),u=Fe.shiftPoint(t,n,(c+1)*4),f=Fe.shiftPoint(r,n,(o+1)*4);o=this.transitionsBetween(u,i),c=this.transitionsBetween(f,i);let x=new X(i.getX()+(r.getX()-n.getX())/(o+1),i.getY()+(r.getY()-n.getY())/(o+1)),p=new X(i.getX()+(t.getX()-n.getX())/(c+1),i.getY()+(t.getY()-n.getY())/(c+1));if(!this.isValid(x))return this.isValid(p)?p:null;if(!this.isValid(p))return x;let E=this.transitionsBetween(u,x)+this.transitionsBetween(f,x),y=this.transitionsBetween(u,p)+this.transitionsBetween(f,p);return E>y?x:p}shiftToModuleCenter(e){let t=e[0],n=e[1],r=e[2],i=e[3],o=this.transitionsBetween(t,i)+1,c=this.transitionsBetween(r,i)+1,u=Fe.shiftPoint(t,n,c*4),f=Fe.shiftPoint(r,n,o*4);o=this.transitionsBetween(u,i)+1,c=this.transitionsBetween(f,i)+1,(o&1)===1&&(o+=1),(c&1)===1&&(c+=1);let x=(t.getX()+n.getX()+r.getX()+i.getX())/4,p=(t.getY()+n.getY()+r.getY()+i.getY())/4;t=Fe.moveAway(t,x,p),n=Fe.moveAway(n,x,p),r=Fe.moveAway(r,x,p),i=Fe.moveAway(i,x,p);let E,y;return u=Fe.shiftPoint(t,n,c*4),u=Fe.shiftPoint(u,i,o*4),E=Fe.shiftPoint(n,t,c*4),E=Fe.shiftPoint(E,r,o*4),f=Fe.shiftPoint(r,i,c*4),f=Fe.shiftPoint(f,n,o*4),y=Fe.shiftPoint(i,r,c*4),y=Fe.shiftPoint(y,t,o*4),[u,E,f,y]}isValid(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()}static sampleGrid(e,t,n,r,i,o,c){return Vt.getInstance().sampleGrid(e,o,c,.5,.5,o-.5,.5,o-.5,c-.5,.5,c-.5,t.getX(),t.getY(),i.getX(),i.getY(),r.getX(),r.getY(),n.getX(),n.getY())}transitionsBetween(e,t){let n=Math.trunc(e.getX()),r=Math.trunc(e.getY()),i=Math.trunc(t.getX()),o=Math.trunc(t.getY()),c=Math.abs(o-r)>Math.abs(i-n);if(c){let T=n;n=r,r=T,T=i,i=o,o=T}let u=Math.abs(i-n),f=Math.abs(o-r),x=-u/2,p=r<o?1:-1,E=n<i?1:-1,y=0,b=this.image.get(c?r:n,c?n:r);for(let T=n,M=r;T!==i;T+=E){let R=this.image.get(c?M:T,c?T:M);if(R!==b&&(y++,b=R),x+=f,x>0){if(M===o)break;M+=p,x-=u}}return y}}class Yt{constructor(){this.decoder=new Na}decode(e,t=null){let n,r;if(t!=null&&t.has(ue.PURE_BARCODE)){const f=Yt.extractPureBits(e.getBlackMatrix());n=this.decoder.decode(f),r=Yt.NO_POINTS}else{const f=new Fe(e.getBlackMatrix()).detect();n=this.decoder.decode(f.getBits()),r=f.getPoints()}const i=n.getRawBytes(),o=new nt(n.getText(),i,8*i.length,r,J.DATA_MATRIX,q.currentTimeMillis()),c=n.getByteSegments();c!=null&&o.putMetadata(We.BYTE_SEGMENTS,c);const u=n.getECLevel();return u!=null&&o.putMetadata(We.ERROR_CORRECTION_LEVEL,u),o}reset(){}static extractPureBits(e){const t=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(t==null||n==null)throw new v;const r=this.moduleSize(t,e);let i=t[1];const o=n[1];let c=t[0];const f=(n[0]-c+1)/r,x=(o-i+1)/r;if(f<=0||x<=0)throw new v;const p=r/2;i+=p,c+=p;const E=new Ve(f,x);for(let y=0;y<x;y++){const b=i+y*r;for(let T=0;T<f;T++)e.get(c+T*r,b)&&E.set(T,y)}return E}static moduleSize(e,t){const n=t.getWidth();let r=e[0];const i=e[1];for(;r<n&&t.get(r,i);)r++;if(r===n)throw new v;const o=r-e[0];if(o===0)throw new v;return o}}Yt.NO_POINTS=[];class Ma extends nn{constructor(e=500){super(new Yt,e)}}var yn;(function(w){w[w.L=0]="L",w[w.M=1]="M",w[w.Q=2]="Q",w[w.H=3]="H"})(yn||(yn={}));class Te{constructor(e,t,n){this.value=e,this.stringValue=t,this.bits=n,Te.FOR_BITS.set(n,this),Te.FOR_VALUE.set(e,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(e){switch(e){case"L":return Te.L;case"M":return Te.M;case"Q":return Te.Q;case"H":return Te.H;default:throw new _(e+"not available")}}toString(){return this.stringValue}equals(e){if(!(e instanceof Te))return!1;const t=e;return this.value===t.value}static forBits(e){if(e<0||e>=Te.FOR_BITS.size)throw new N;return Te.FOR_BITS.get(e)}}Te.FOR_BITS=new Map,Te.FOR_VALUE=new Map,Te.L=new Te(yn.L,"L",1),Te.M=new Te(yn.M,"M",0),Te.Q=new Te(yn.Q,"Q",3),Te.H=new Te(yn.H,"H",2);class $e{constructor(e){this.errorCorrectionLevel=Te.forBits(e>>3&3),this.dataMask=e&7}static numBitsDiffering(e,t){return W.bitCount(e^t)}static decodeFormatInformation(e,t){const n=$e.doDecodeFormatInformation(e,t);return n!==null?n:$e.doDecodeFormatInformation(e^$e.FORMAT_INFO_MASK_QR,t^$e.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(e,t){let n=Number.MAX_SAFE_INTEGER,r=0;for(const i of $e.FORMAT_INFO_DECODE_LOOKUP){const o=i[0];if(o===e||o===t)return new $e(i[1]);let c=$e.numBitsDiffering(e,o);c<n&&(r=i[1],n=c),e!==t&&(c=$e.numBitsDiffering(t,o),c<n&&(r=i[1],n=c))}return n<=3?new $e(r):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(e){if(!(e instanceof $e))return!1;const t=e;return this.errorCorrectionLevel===t.errorCorrectionLevel&&this.dataMask===t.dataMask}}$e.FORMAT_INFO_MASK_QR=21522,$e.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class O{constructor(e,...t){this.ecCodewordsPerBlock=e,this.ecBlocks=t}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let e=0;const t=this.ecBlocks;for(const n of t)e+=n.getCount();return e}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class I{constructor(e,t){this.count=e,this.dataCodewords=t}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Z{constructor(e,t,...n){this.versionNumber=e,this.alignmentPatternCenters=t,this.ecBlocks=n;let r=0;const i=n[0].getECCodewordsPerBlock(),o=n[0].getECBlocks();for(const c of o)r+=c.getCount()*(c.getDataCodewords()+i);this.totalCodewords=r}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(e){return this.ecBlocks[e.getValue()]}static getProvisionalVersionForDimension(e){if(e%4!==1)throw new U;try{return this.getVersionForNumber((e-17)/4)}catch{throw new U}}static getVersionForNumber(e){if(e<1||e>40)throw new N;return Z.VERSIONS[e-1]}static decodeVersionInformation(e){let t=Number.MAX_SAFE_INTEGER,n=0;for(let r=0;r<Z.VERSION_DECODE_INFO.length;r++){const i=Z.VERSION_DECODE_INFO[r];if(i===e)return Z.getVersionForNumber(r+7);const o=$e.numBitsDiffering(e,i);o<t&&(n=r+7,t=o)}return t<=3?Z.getVersionForNumber(n):null}buildFunctionPattern(){const e=this.getDimensionForVersion(),t=new Ve(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);const n=this.alignmentPatternCenters.length;for(let r=0;r<n;r++){const i=this.alignmentPatternCenters[r]-2;for(let o=0;o<n;o++)r===0&&(o===0||o===n-1)||r===n-1&&o===0||t.setRegion(this.alignmentPatternCenters[o]-2,i,5,5)}return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t}toString(){return""+this.versionNumber}}Z.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Z.VERSIONS=[new Z(1,new Int32Array(0),new O(7,new I(1,19)),new O(10,new I(1,16)),new O(13,new I(1,13)),new O(17,new I(1,9))),new Z(2,Int32Array.from([6,18]),new O(10,new I(1,34)),new O(16,new I(1,28)),new O(22,new I(1,22)),new O(28,new I(1,16))),new Z(3,Int32Array.from([6,22]),new O(15,new I(1,55)),new O(26,new I(1,44)),new O(18,new I(2,17)),new O(22,new I(2,13))),new Z(4,Int32Array.from([6,26]),new O(20,new I(1,80)),new O(18,new I(2,32)),new O(26,new I(2,24)),new O(16,new I(4,9))),new Z(5,Int32Array.from([6,30]),new O(26,new I(1,108)),new O(24,new I(2,43)),new O(18,new I(2,15),new I(2,16)),new O(22,new I(2,11),new I(2,12))),new Z(6,Int32Array.from([6,34]),new O(18,new I(2,68)),new O(16,new I(4,27)),new O(24,new I(4,19)),new O(28,new I(4,15))),new Z(7,Int32Array.from([6,22,38]),new O(20,new I(2,78)),new O(18,new I(4,31)),new O(18,new I(2,14),new I(4,15)),new O(26,new I(4,13),new I(1,14))),new Z(8,Int32Array.from([6,24,42]),new O(24,new I(2,97)),new O(22,new I(2,38),new I(2,39)),new O(22,new I(4,18),new I(2,19)),new O(26,new I(4,14),new I(2,15))),new Z(9,Int32Array.from([6,26,46]),new O(30,new I(2,116)),new O(22,new I(3,36),new I(2,37)),new O(20,new I(4,16),new I(4,17)),new O(24,new I(4,12),new I(4,13))),new Z(10,Int32Array.from([6,28,50]),new O(18,new I(2,68),new I(2,69)),new O(26,new I(4,43),new I(1,44)),new O(24,new I(6,19),new I(2,20)),new O(28,new I(6,15),new I(2,16))),new Z(11,Int32Array.from([6,30,54]),new O(20,new I(4,81)),new O(30,new I(1,50),new I(4,51)),new O(28,new I(4,22),new I(4,23)),new O(24,new I(3,12),new I(8,13))),new Z(12,Int32Array.from([6,32,58]),new O(24,new I(2,92),new I(2,93)),new O(22,new I(6,36),new I(2,37)),new O(26,new I(4,20),new I(6,21)),new O(28,new I(7,14),new I(4,15))),new Z(13,Int32Array.from([6,34,62]),new O(26,new I(4,107)),new O(22,new I(8,37),new I(1,38)),new O(24,new I(8,20),new I(4,21)),new O(22,new I(12,11),new I(4,12))),new Z(14,Int32Array.from([6,26,46,66]),new O(30,new I(3,115),new I(1,116)),new O(24,new I(4,40),new I(5,41)),new O(20,new I(11,16),new I(5,17)),new O(24,new I(11,12),new I(5,13))),new Z(15,Int32Array.from([6,26,48,70]),new O(22,new I(5,87),new I(1,88)),new O(24,new I(5,41),new I(5,42)),new O(30,new I(5,24),new I(7,25)),new O(24,new I(11,12),new I(7,13))),new Z(16,Int32Array.from([6,26,50,74]),new O(24,new I(5,98),new I(1,99)),new O(28,new I(7,45),new I(3,46)),new O(24,new I(15,19),new I(2,20)),new O(30,new I(3,15),new I(13,16))),new Z(17,Int32Array.from([6,30,54,78]),new O(28,new I(1,107),new I(5,108)),new O(28,new I(10,46),new I(1,47)),new O(28,new I(1,22),new I(15,23)),new O(28,new I(2,14),new I(17,15))),new Z(18,Int32Array.from([6,30,56,82]),new O(30,new I(5,120),new I(1,121)),new O(26,new I(9,43),new I(4,44)),new O(28,new I(17,22),new I(1,23)),new O(28,new I(2,14),new I(19,15))),new Z(19,Int32Array.from([6,30,58,86]),new O(28,new I(3,113),new I(4,114)),new O(26,new I(3,44),new I(11,45)),new O(26,new I(17,21),new I(4,22)),new O(26,new I(9,13),new I(16,14))),new Z(20,Int32Array.from([6,34,62,90]),new O(28,new I(3,107),new I(5,108)),new O(26,new I(3,41),new I(13,42)),new O(30,new I(15,24),new I(5,25)),new O(28,new I(15,15),new I(10,16))),new Z(21,Int32Array.from([6,28,50,72,94]),new O(28,new I(4,116),new I(4,117)),new O(26,new I(17,42)),new O(28,new I(17,22),new I(6,23)),new O(30,new I(19,16),new I(6,17))),new Z(22,Int32Array.from([6,26,50,74,98]),new O(28,new I(2,111),new I(7,112)),new O(28,new I(17,46)),new O(30,new I(7,24),new I(16,25)),new O(24,new I(34,13))),new Z(23,Int32Array.from([6,30,54,78,102]),new O(30,new I(4,121),new I(5,122)),new O(28,new I(4,47),new I(14,48)),new O(30,new I(11,24),new I(14,25)),new O(30,new I(16,15),new I(14,16))),new Z(24,Int32Array.from([6,28,54,80,106]),new O(30,new I(6,117),new I(4,118)),new O(28,new I(6,45),new I(14,46)),new O(30,new I(11,24),new I(16,25)),new O(30,new I(30,16),new I(2,17))),new Z(25,Int32Array.from([6,32,58,84,110]),new O(26,new I(8,106),new I(4,107)),new O(28,new I(8,47),new I(13,48)),new O(30,new I(7,24),new I(22,25)),new O(30,new I(22,15),new I(13,16))),new Z(26,Int32Array.from([6,30,58,86,114]),new O(28,new I(10,114),new I(2,115)),new O(28,new I(19,46),new I(4,47)),new O(28,new I(28,22),new I(6,23)),new O(30,new I(33,16),new I(4,17))),new Z(27,Int32Array.from([6,34,62,90,118]),new O(30,new I(8,122),new I(4,123)),new O(28,new I(22,45),new I(3,46)),new O(30,new I(8,23),new I(26,24)),new O(30,new I(12,15),new I(28,16))),new Z(28,Int32Array.from([6,26,50,74,98,122]),new O(30,new I(3,117),new I(10,118)),new O(28,new I(3,45),new I(23,46)),new O(30,new I(4,24),new I(31,25)),new O(30,new I(11,15),new I(31,16))),new Z(29,Int32Array.from([6,30,54,78,102,126]),new O(30,new I(7,116),new I(7,117)),new O(28,new I(21,45),new I(7,46)),new O(30,new I(1,23),new I(37,24)),new O(30,new I(19,15),new I(26,16))),new Z(30,Int32Array.from([6,26,52,78,104,130]),new O(30,new I(5,115),new I(10,116)),new O(28,new I(19,47),new I(10,48)),new O(30,new I(15,24),new I(25,25)),new O(30,new I(23,15),new I(25,16))),new Z(31,Int32Array.from([6,30,56,82,108,134]),new O(30,new I(13,115),new I(3,116)),new O(28,new I(2,46),new I(29,47)),new O(30,new I(42,24),new I(1,25)),new O(30,new I(23,15),new I(28,16))),new Z(32,Int32Array.from([6,34,60,86,112,138]),new O(30,new I(17,115)),new O(28,new I(10,46),new I(23,47)),new O(30,new I(10,24),new I(35,25)),new O(30,new I(19,15),new I(35,16))),new Z(33,Int32Array.from([6,30,58,86,114,142]),new O(30,new I(17,115),new I(1,116)),new O(28,new I(14,46),new I(21,47)),new O(30,new I(29,24),new I(19,25)),new O(30,new I(11,15),new I(46,16))),new Z(34,Int32Array.from([6,34,62,90,118,146]),new O(30,new I(13,115),new I(6,116)),new O(28,new I(14,46),new I(23,47)),new O(30,new I(44,24),new I(7,25)),new O(30,new I(59,16),new I(1,17))),new Z(35,Int32Array.from([6,30,54,78,102,126,150]),new O(30,new I(12,121),new I(7,122)),new O(28,new I(12,47),new I(26,48)),new O(30,new I(39,24),new I(14,25)),new O(30,new I(22,15),new I(41,16))),new Z(36,Int32Array.from([6,24,50,76,102,128,154]),new O(30,new I(6,121),new I(14,122)),new O(28,new I(6,47),new I(34,48)),new O(30,new I(46,24),new I(10,25)),new O(30,new I(2,15),new I(64,16))),new Z(37,Int32Array.from([6,28,54,80,106,132,158]),new O(30,new I(17,122),new I(4,123)),new O(28,new I(29,46),new I(14,47)),new O(30,new I(49,24),new I(10,25)),new O(30,new I(24,15),new I(46,16))),new Z(38,Int32Array.from([6,32,58,84,110,136,162]),new O(30,new I(4,122),new I(18,123)),new O(28,new I(13,46),new I(32,47)),new O(30,new I(48,24),new I(14,25)),new O(30,new I(42,15),new I(32,16))),new Z(39,Int32Array.from([6,26,54,82,110,138,166]),new O(30,new I(20,117),new I(4,118)),new O(28,new I(40,47),new I(7,48)),new O(30,new I(43,24),new I(22,25)),new O(30,new I(10,15),new I(67,16))),new Z(40,Int32Array.from([6,30,58,86,114,142,170]),new O(30,new I(19,118),new I(6,119)),new O(28,new I(18,47),new I(31,48)),new O(30,new I(34,24),new I(34,25)),new O(30,new I(20,15),new I(61,16)))];var Ye;(function(w){w[w.DATA_MASK_000=0]="DATA_MASK_000",w[w.DATA_MASK_001=1]="DATA_MASK_001",w[w.DATA_MASK_010=2]="DATA_MASK_010",w[w.DATA_MASK_011=3]="DATA_MASK_011",w[w.DATA_MASK_100=4]="DATA_MASK_100",w[w.DATA_MASK_101=5]="DATA_MASK_101",w[w.DATA_MASK_110=6]="DATA_MASK_110",w[w.DATA_MASK_111=7]="DATA_MASK_111"})(Ye||(Ye={}));class At{constructor(e,t){this.value=e,this.isMasked=t}unmaskBitMatrix(e,t){for(let n=0;n<t;n++)for(let r=0;r<t;r++)this.isMasked(n,r)&&e.flip(r,n)}}At.values=new Map([[Ye.DATA_MASK_000,new At(Ye.DATA_MASK_000,(w,e)=>(w+e&1)===0)],[Ye.DATA_MASK_001,new At(Ye.DATA_MASK_001,(w,e)=>(w&1)===0)],[Ye.DATA_MASK_010,new At(Ye.DATA_MASK_010,(w,e)=>e%3===0)],[Ye.DATA_MASK_011,new At(Ye.DATA_MASK_011,(w,e)=>(w+e)%3===0)],[Ye.DATA_MASK_100,new At(Ye.DATA_MASK_100,(w,e)=>(Math.floor(w/2)+Math.floor(e/3)&1)===0)],[Ye.DATA_MASK_101,new At(Ye.DATA_MASK_101,(w,e)=>w*e%6===0)],[Ye.DATA_MASK_110,new At(Ye.DATA_MASK_110,(w,e)=>w*e%6<3)],[Ye.DATA_MASK_111,new At(Ye.DATA_MASK_111,(w,e)=>(w+e+w*e%3&1)===0)]]);class Oa{constructor(e){const t=e.getHeight();if(t<21||(t&3)!==1)throw new U;this.bitMatrix=e}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let e=0;for(let i=0;i<6;i++)e=this.copyBit(i,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(let i=5;i>=0;i--)e=this.copyBit(8,i,e);const t=this.bitMatrix.getHeight();let n=0;const r=t-7;for(let i=t-1;i>=r;i--)n=this.copyBit(8,i,n);for(let i=t-8;i<t;i++)n=this.copyBit(i,8,n);if(this.parsedFormatInfo=$e.decodeFormatInformation(e,n),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new U}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const e=this.bitMatrix.getHeight(),t=Math.floor((e-17)/4);if(t<=6)return Z.getVersionForNumber(t);let n=0;const r=e-11;for(let o=5;o>=0;o--)for(let c=e-9;c>=r;c--)n=this.copyBit(c,o,n);let i=Z.decodeVersionInformation(n);if(i!==null&&i.getDimensionForVersion()===e)return this.parsedVersion=i,i;n=0;for(let o=5;o>=0;o--)for(let c=e-9;c>=r;c--)n=this.copyBit(o,c,n);if(i=Z.decodeVersionInformation(n),i!==null&&i.getDimensionForVersion()===e)return this.parsedVersion=i,i;throw new U}copyBit(e,t,n){return(this.isMirror?this.bitMatrix.get(t,e):this.bitMatrix.get(e,t))?n<<1|1:n<<1}readCodewords(){const e=this.readFormatInformation(),t=this.readVersion(),n=At.values.get(e.getDataMask()),r=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,r);const i=t.buildFunctionPattern();let o=!0;const c=new Uint8Array(t.getTotalCodewords());let u=0,f=0,x=0;for(let p=r-1;p>0;p-=2){p===6&&p--;for(let E=0;E<r;E++){const y=o?r-1-E:E;for(let b=0;b<2;b++)i.get(p-b,y)||(x++,f<<=1,this.bitMatrix.get(p-b,y)&&(f|=1),x===8&&(c[u++]=f,x=0,f=0))}o=!o}if(u!==t.getTotalCodewords())throw new U;return c}remask(){if(this.parsedFormatInfo===null)return;const e=At.values[this.parsedFormatInfo.getDataMask()],t=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,t)}setMirror(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e}mirror(){const e=this.bitMatrix;for(let t=0,n=e.getWidth();t<n;t++)for(let r=t+1,i=e.getHeight();r<i;r++)e.get(t,r)!==e.get(r,t)&&(e.flip(r,t),e.flip(t,r))}}class qr{constructor(e,t){this.numDataCodewords=e,this.codewords=t}static getDataBlocks(e,t,n){if(e.length!==t.getTotalCodewords())throw new N;const r=t.getECBlocksForLevel(n);let i=0;const o=r.getECBlocks();for(const b of o)i+=b.getCount();const c=new Array(i);let u=0;for(const b of o)for(let T=0;T<b.getCount();T++){const M=b.getDataCodewords(),R=r.getECCodewordsPerBlock()+M;c[u++]=new qr(M,new Uint8Array(R))}const f=c[0].codewords.length;let x=c.length-1;for(;x>=0&&c[x].codewords.length!==f;)x--;x++;const p=f-r.getECCodewordsPerBlock();let E=0;for(let b=0;b<p;b++)for(let T=0;T<u;T++)c[T].codewords[b]=e[E++];for(let b=x;b<u;b++)c[b].codewords[p]=e[E++];const y=c[0].codewords.length;for(let b=p;b<y;b++)for(let T=0;T<u;T++){const M=T<x?b:b+1;c[T].codewords[M]=e[E++]}return c}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Ct;(function(w){w[w.TERMINATOR=0]="TERMINATOR",w[w.NUMERIC=1]="NUMERIC",w[w.ALPHANUMERIC=2]="ALPHANUMERIC",w[w.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",w[w.BYTE=4]="BYTE",w[w.ECI=5]="ECI",w[w.KANJI=6]="KANJI",w[w.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",w[w.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",w[w.HANZI=9]="HANZI"})(Ct||(Ct={}));class K{constructor(e,t,n,r){this.value=e,this.stringValue=t,this.characterCountBitsForVersions=n,this.bits=r,K.FOR_BITS.set(r,this),K.FOR_VALUE.set(e,this)}static forBits(e){const t=K.FOR_BITS.get(e);if(t===void 0)throw new N;return t}getCharacterCountBits(e){const t=e.getVersionNumber();let n;return t<=9?n=0:t<=26?n=1:n=2,this.characterCountBitsForVersions[n]}getValue(){return this.value}getBits(){return this.bits}equals(e){if(!(e instanceof K))return!1;const t=e;return this.value===t.value}toString(){return this.stringValue}}K.FOR_BITS=new Map,K.FOR_VALUE=new Map,K.TERMINATOR=new K(Ct.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),K.NUMERIC=new K(Ct.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),K.ALPHANUMERIC=new K(Ct.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),K.STRUCTURED_APPEND=new K(Ct.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),K.BYTE=new K(Ct.BYTE,"BYTE",Int32Array.from([8,16,16]),4),K.ECI=new K(Ct.ECI,"ECI",Int32Array.from([0,0,0]),7),K.KANJI=new K(Ct.KANJI,"KANJI",Int32Array.from([8,10,12]),8),K.FNC1_FIRST_POSITION=new K(Ct.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),K.FNC1_SECOND_POSITION=new K(Ct.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),K.HANZI=new K(Ct.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class De{static decode(e,t,n,r){const i=new Kr(e);let o=new Ee;const c=new Array;let u=-1,f=-1;try{let x=null,p=!1,E;do{if(i.available()<4)E=K.TERMINATOR;else{const y=i.readBits(4);E=K.forBits(y)}switch(E){case K.TERMINATOR:break;case K.FNC1_FIRST_POSITION:case K.FNC1_SECOND_POSITION:p=!0;break;case K.STRUCTURED_APPEND:if(i.available()<16)throw new U;u=i.readBits(8),f=i.readBits(8);break;case K.ECI:const y=De.parseECIValue(i);if(x=k.getCharacterSetECIByValue(y),x===null)throw new U;break;case K.HANZI:const b=i.readBits(4),T=i.readBits(E.getCharacterCountBits(t));b===De.GB2312_SUBSET&&De.decodeHanziSegment(i,o,T);break;default:const M=i.readBits(E.getCharacterCountBits(t));switch(E){case K.NUMERIC:De.decodeNumericSegment(i,o,M);break;case K.ALPHANUMERIC:De.decodeAlphanumericSegment(i,o,M,p);break;case K.BYTE:De.decodeByteSegment(i,o,M,x,c,r);break;case K.KANJI:De.decodeKanjiSegment(i,o,M);break;default:throw new U}break}}while(E!==K.TERMINATOR)}catch{throw new U}return new Fn(e,o.toString(),c.length===0?null:c,n===null?null:n.toString(),u,f)}static decodeHanziSegment(e,t,n){if(n*13>e.available())throw new U;const r=new Uint8Array(2*n);let i=0;for(;n>0;){const o=e.readBits(13);let c=o/96<<8&4294967295|o%96;c<959?c+=41377:c+=42657,r[i]=c>>8&255,r[i+1]=c&255,i+=2,n--}try{t.append(ot.decode(r,te.GB2312))}catch(o){throw new U(o)}}static decodeKanjiSegment(e,t,n){if(n*13>e.available())throw new U;const r=new Uint8Array(2*n);let i=0;for(;n>0;){const o=e.readBits(13);let c=o/192<<8&4294967295|o%192;c<7936?c+=33088:c+=49472,r[i]=c>>8,r[i+1]=c,i+=2,n--}try{t.append(ot.decode(r,te.SHIFT_JIS))}catch(o){throw new U(o)}}static decodeByteSegment(e,t,n,r,i,o){if(8*n>e.available())throw new U;const c=new Uint8Array(n);for(let f=0;f<n;f++)c[f]=e.readBits(8);let u;r===null?u=te.guessEncoding(c,o):u=r.getName();try{t.append(ot.decode(c,u))}catch(f){throw new U(f)}i.push(c)}static toAlphaNumericChar(e){if(e>=De.ALPHANUMERIC_CHARS.length)throw new U;return De.ALPHANUMERIC_CHARS[e]}static decodeAlphanumericSegment(e,t,n,r){const i=t.length();for(;n>1;){if(e.available()<11)throw new U;const o=e.readBits(11);t.append(De.toAlphaNumericChar(Math.floor(o/45))),t.append(De.toAlphaNumericChar(o%45)),n-=2}if(n===1){if(e.available()<6)throw new U;t.append(De.toAlphaNumericChar(e.readBits(6)))}if(r)for(let o=i;o<t.length();o++)t.charAt(o)==="%"&&(o<t.length()-1&&t.charAt(o+1)==="%"?t.deleteCharAt(o+1):t.setCharAt(o,""))}static decodeNumericSegment(e,t,n){for(;n>=3;){if(e.available()<10)throw new U;const r=e.readBits(10);if(r>=1e3)throw new U;t.append(De.toAlphaNumericChar(Math.floor(r/100))),t.append(De.toAlphaNumericChar(Math.floor(r/10)%10)),t.append(De.toAlphaNumericChar(r%10)),n-=3}if(n===2){if(e.available()<7)throw new U;const r=e.readBits(7);if(r>=100)throw new U;t.append(De.toAlphaNumericChar(Math.floor(r/10))),t.append(De.toAlphaNumericChar(r%10))}else if(n===1){if(e.available()<4)throw new U;const r=e.readBits(4);if(r>=10)throw new U;t.append(De.toAlphaNumericChar(r))}}static parseECIValue(e){const t=e.readBits(8);if((t&128)===0)return t&127;if((t&192)===128){const n=e.readBits(8);return(t&63)<<8&4294967295|n}if((t&224)===192){const n=e.readBits(16);return(t&31)<<16&4294967295|n}throw new U}}De.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",De.GB2312_SUBSET=1;class us{constructor(e){this.mirrored=e}isMirrored(){return this.mirrored}applyMirroredCorrection(e){if(!this.mirrored||e===null||e.length<3)return;const t=e[0];e[0]=e[2],e[2]=t}}class Da{constructor(){this.rsDecoder=new Un(ge.QR_CODE_FIELD_256)}decodeBooleanArray(e,t){return this.decodeBitMatrix(Ve.parseFromBooleanArray(e),t)}decodeBitMatrix(e,t){const n=new Oa(e);let r=null;try{return this.decodeBitMatrixParser(n,t)}catch(i){r=i}try{n.remask(),n.setMirror(!0),n.readVersion(),n.readFormatInformation(),n.mirror();const i=this.decodeBitMatrixParser(n,t);return i.setOther(new us(!0)),i}catch(i){throw r!==null?r:i}}decodeBitMatrixParser(e,t){const n=e.readVersion(),r=e.readFormatInformation().getErrorCorrectionLevel(),i=e.readCodewords(),o=qr.getDataBlocks(i,n,r);let c=0;for(const x of o)c+=x.getNumDataCodewords();const u=new Uint8Array(c);let f=0;for(const x of o){const p=x.getCodewords(),E=x.getNumDataCodewords();this.correctErrors(p,E);for(let y=0;y<E;y++)u[f++]=p[y]}return De.decode(u,n,r,t)}correctErrors(e,t){const n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-t)}catch{throw new Y}for(let r=0;r<t;r++)e[r]=n[r]}}class Jr extends X{constructor(e,t,n){super(e,t),this.estimatedModuleSize=n}aboutEquals(e,t,n){if(Math.abs(t-this.getY())<=e&&Math.abs(n-this.getX())<=e){const r=Math.abs(e-this.estimatedModuleSize);return r<=1||r<=this.estimatedModuleSize}return!1}combineEstimate(e,t,n){const r=(this.getX()+t)/2,i=(this.getY()+e)/2,o=(this.estimatedModuleSize+n)/2;return new Jr(r,i,o)}}class dr{constructor(e,t,n,r,i,o,c){this.image=e,this.startX=t,this.startY=n,this.width=r,this.height=i,this.moduleSize=o,this.resultPointCallback=c,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const e=this.startX,t=this.height,n=this.width,r=e+n,i=this.startY+t/2,o=new Int32Array(3),c=this.image;for(let u=0;u<t;u++){const f=i+((u&1)===0?Math.floor((u+1)/2):-Math.floor((u+1)/2));o[0]=0,o[1]=0,o[2]=0;let x=e;for(;x<r&&!c.get(x,f);)x++;let p=0;for(;x<r;){if(c.get(x,f))if(p===1)o[1]++;else if(p===2){if(this.foundPatternCross(o)){const E=this.handlePossibleCenter(o,f,x);if(E!==null)return E}o[0]=o[2],o[1]=1,o[2]=0,p=1}else o[++p]++;else p===1&&p++,o[p]++;x++}if(this.foundPatternCross(o)){const E=this.handlePossibleCenter(o,f,r);if(E!==null)return E}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new v}static centerFromEnd(e,t){return t-e[2]-e[1]/2}foundPatternCross(e){const t=this.moduleSize,n=t/2;for(let r=0;r<3;r++)if(Math.abs(t-e[r])>=n)return!1;return!0}crossCheckVertical(e,t,n,r){const i=this.image,o=i.getHeight(),c=this.crossCheckStateCount;c[0]=0,c[1]=0,c[2]=0;let u=e;for(;u>=0&&i.get(t,u)&&c[1]<=n;)c[1]++,u--;if(u<0||c[1]>n)return NaN;for(;u>=0&&!i.get(t,u)&&c[0]<=n;)c[0]++,u--;if(c[0]>n)return NaN;for(u=e+1;u<o&&i.get(t,u)&&c[1]<=n;)c[1]++,u++;if(u===o||c[1]>n)return NaN;for(;u<o&&!i.get(t,u)&&c[2]<=n;)c[2]++,u++;if(c[2]>n)return NaN;const f=c[0]+c[1]+c[2];return 5*Math.abs(f-r)>=2*r?NaN:this.foundPatternCross(c)?dr.centerFromEnd(c,u):NaN}handlePossibleCenter(e,t,n){const r=e[0]+e[1]+e[2],i=dr.centerFromEnd(e,n),o=this.crossCheckVertical(t,i,2*e[1],r);if(!isNaN(o)){const c=(e[0]+e[1]+e[2])/3;for(const f of this.possibleCenters)if(f.aboutEquals(c,o,i))return f.combineEstimate(o,i,c);const u=new Jr(i,o,c);this.possibleCenters.push(u),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(u)}return null}}class $r extends X{constructor(e,t,n,r){super(e,t),this.estimatedModuleSize=n,this.count=r,r===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(e,t,n){if(Math.abs(t-this.getY())<=e&&Math.abs(n-this.getX())<=e){const r=Math.abs(e-this.estimatedModuleSize);return r<=1||r<=this.estimatedModuleSize}return!1}combineEstimate(e,t,n){const r=this.count+1,i=(this.count*this.getX()+t)/r,o=(this.count*this.getY()+e)/r,c=(this.count*this.estimatedModuleSize+n)/r;return new $r(i,o,c,r)}}class Ra{constructor(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Xe{constructor(e,t){this.image=e,this.resultPointCallback=t,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=t}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(e){const t=e!=null&&e.get(ue.TRY_HARDER)!==void 0,n=e!=null&&e.get(ue.PURE_BARCODE)!==void 0,r=this.image,i=r.getHeight(),o=r.getWidth();let c=Math.floor(3*i/(4*Xe.MAX_MODULES));(c<Xe.MIN_SKIP||t)&&(c=Xe.MIN_SKIP);let u=!1;const f=new Int32Array(5);for(let p=c-1;p<i&&!u;p+=c){f[0]=0,f[1]=0,f[2]=0,f[3]=0,f[4]=0;let E=0;for(let y=0;y<o;y++)if(r.get(y,p))(E&1)===1&&E++,f[E]++;else if((E&1)===0)if(E===4)if(Xe.foundPatternCross(f)){if(this.handlePossibleCenter(f,p,y,n)===!0)if(c=2,this.hasSkipped===!0)u=this.haveMultiplyConfirmedCenters();else{const T=this.findRowSkip();T>f[2]&&(p+=T-f[2]-c,y=o-1)}else{f[0]=f[2],f[1]=f[3],f[2]=f[4],f[3]=1,f[4]=0,E=3;continue}E=0,f[0]=0,f[1]=0,f[2]=0,f[3]=0,f[4]=0}else f[0]=f[2],f[1]=f[3],f[2]=f[4],f[3]=1,f[4]=0,E=3;else f[++E]++;else f[E]++;Xe.foundPatternCross(f)&&this.handlePossibleCenter(f,p,o,n)===!0&&(c=f[0],this.hasSkipped&&(u=this.haveMultiplyConfirmedCenters()))}const x=this.selectBestPatterns();return X.orderBestPatterns(x),new Ra(x)}static centerFromEnd(e,t){return t-e[4]-e[3]-e[2]/2}static foundPatternCross(e){let t=0;for(let i=0;i<5;i++){const o=e[i];if(o===0)return!1;t+=o}if(t<7)return!1;const n=t/7,r=n/2;return Math.abs(n-e[0])<r&&Math.abs(n-e[1])<r&&Math.abs(3*n-e[2])<3*r&&Math.abs(n-e[3])<r&&Math.abs(n-e[4])<r}getCrossCheckStateCount(){const e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e}crossCheckDiagonal(e,t,n,r){const i=this.getCrossCheckStateCount();let o=0;const c=this.image;for(;e>=o&&t>=o&&c.get(t-o,e-o);)i[2]++,o++;if(e<o||t<o)return!1;for(;e>=o&&t>=o&&!c.get(t-o,e-o)&&i[1]<=n;)i[1]++,o++;if(e<o||t<o||i[1]>n)return!1;for(;e>=o&&t>=o&&c.get(t-o,e-o)&&i[0]<=n;)i[0]++,o++;if(i[0]>n)return!1;const u=c.getHeight(),f=c.getWidth();for(o=1;e+o<u&&t+o<f&&c.get(t+o,e+o);)i[2]++,o++;if(e+o>=u||t+o>=f)return!1;for(;e+o<u&&t+o<f&&!c.get(t+o,e+o)&&i[3]<n;)i[3]++,o++;if(e+o>=u||t+o>=f||i[3]>=n)return!1;for(;e+o<u&&t+o<f&&c.get(t+o,e+o)&&i[4]<n;)i[4]++,o++;if(i[4]>=n)return!1;const x=i[0]+i[1]+i[2]+i[3]+i[4];return Math.abs(x-r)<2*r&&Xe.foundPatternCross(i)}crossCheckVertical(e,t,n,r){const i=this.image,o=i.getHeight(),c=this.getCrossCheckStateCount();let u=e;for(;u>=0&&i.get(t,u);)c[2]++,u--;if(u<0)return NaN;for(;u>=0&&!i.get(t,u)&&c[1]<=n;)c[1]++,u--;if(u<0||c[1]>n)return NaN;for(;u>=0&&i.get(t,u)&&c[0]<=n;)c[0]++,u--;if(c[0]>n)return NaN;for(u=e+1;u<o&&i.get(t,u);)c[2]++,u++;if(u===o)return NaN;for(;u<o&&!i.get(t,u)&&c[3]<n;)c[3]++,u++;if(u===o||c[3]>=n)return NaN;for(;u<o&&i.get(t,u)&&c[4]<n;)c[4]++,u++;if(c[4]>=n)return NaN;const f=c[0]+c[1]+c[2]+c[3]+c[4];return 5*Math.abs(f-r)>=2*r?NaN:Xe.foundPatternCross(c)?Xe.centerFromEnd(c,u):NaN}crossCheckHorizontal(e,t,n,r){const i=this.image,o=i.getWidth(),c=this.getCrossCheckStateCount();let u=e;for(;u>=0&&i.get(u,t);)c[2]++,u--;if(u<0)return NaN;for(;u>=0&&!i.get(u,t)&&c[1]<=n;)c[1]++,u--;if(u<0||c[1]>n)return NaN;for(;u>=0&&i.get(u,t)&&c[0]<=n;)c[0]++,u--;if(c[0]>n)return NaN;for(u=e+1;u<o&&i.get(u,t);)c[2]++,u++;if(u===o)return NaN;for(;u<o&&!i.get(u,t)&&c[3]<n;)c[3]++,u++;if(u===o||c[3]>=n)return NaN;for(;u<o&&i.get(u,t)&&c[4]<n;)c[4]++,u++;if(c[4]>=n)return NaN;const f=c[0]+c[1]+c[2]+c[3]+c[4];return 5*Math.abs(f-r)>=r?NaN:Xe.foundPatternCross(c)?Xe.centerFromEnd(c,u):NaN}handlePossibleCenter(e,t,n,r){const i=e[0]+e[1]+e[2]+e[3]+e[4];let o=Xe.centerFromEnd(e,n),c=this.crossCheckVertical(t,Math.floor(o),e[2],i);if(!isNaN(c)&&(o=this.crossCheckHorizontal(Math.floor(o),Math.floor(c),e[2],i),!isNaN(o)&&(!r||this.crossCheckDiagonal(Math.floor(c),Math.floor(o),e[2],i)))){const u=i/7;let f=!1;const x=this.possibleCenters;for(let p=0,E=x.length;p<E;p++){const y=x[p];if(y.aboutEquals(u,c,o)){x[p]=y.combineEstimate(c,o,u),f=!0;break}}if(!f){const p=new $r(o,c,u);x.push(p),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(p)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let t=null;for(const n of this.possibleCenters)if(n.getCount()>=Xe.CENTER_QUORUM)if(t==null)t=n;else return this.hasSkipped=!0,Math.floor((Math.abs(t.getX()-n.getX())-Math.abs(t.getY()-n.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let e=0,t=0;const n=this.possibleCenters.length;for(const o of this.possibleCenters)o.getCount()>=Xe.CENTER_QUORUM&&(e++,t+=o.getEstimatedModuleSize());if(e<3)return!1;const r=t/n;let i=0;for(const o of this.possibleCenters)i+=Math.abs(o.getEstimatedModuleSize()-r);return i<=.05*t}selectBestPatterns(){const e=this.possibleCenters.length;if(e<3)throw new v;const t=this.possibleCenters;let n;if(e>3){let r=0,i=0;for(const u of this.possibleCenters){const f=u.getEstimatedModuleSize();r+=f,i+=f*f}n=r/e;let o=Math.sqrt(i/e-n*n);t.sort((u,f)=>{const x=Math.abs(f.getEstimatedModuleSize()-n),p=Math.abs(u.getEstimatedModuleSize()-n);return x<p?-1:x>p?1:0});const c=Math.max(.2*n,o);for(let u=0;u<t.length&&t.length>3;u++){const f=t[u];Math.abs(f.getEstimatedModuleSize()-n)>c&&(t.splice(u,1),u--)}}if(t.length>3){let r=0;for(const i of t)r+=i.getEstimatedModuleSize();n=r/t.length,t.sort((i,o)=>{if(o.getCount()===i.getCount()){const c=Math.abs(o.getEstimatedModuleSize()-n),u=Math.abs(i.getEstimatedModuleSize()-n);return c<u?1:c>u?-1:0}else return o.getCount()-i.getCount()}),t.splice(3)}return[t[0],t[1],t[2]]}}Xe.CENTER_QUORUM=2,Xe.MIN_SKIP=3,Xe.MAX_MODULES=57;class zn{constructor(e){this.image=e}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(e){this.resultPointCallback=e==null?null:e.get(ue.NEED_RESULT_POINT_CALLBACK);const n=new Xe(this.image,this.resultPointCallback).find(e);return this.processFinderPatternInfo(n)}processFinderPatternInfo(e){const t=e.getTopLeft(),n=e.getTopRight(),r=e.getBottomLeft(),i=this.calculateModuleSize(t,n,r);if(i<1)throw new v("No pattern found in proccess finder.");const o=zn.computeDimension(t,n,r,i),c=Z.getProvisionalVersionForDimension(o),u=c.getDimensionForVersion()-7;let f=null;if(c.getAlignmentPatternCenters().length>0){const y=n.getX()-t.getX()+r.getX(),b=n.getY()-t.getY()+r.getY(),T=1-3/u,M=Math.floor(t.getX()+T*(y-t.getX())),R=Math.floor(t.getY()+T*(b-t.getY()));for(let P=4;P<=16;P<<=1)try{f=this.findAlignmentInRegion(i,M,R,P);break}catch(F){if(!(F instanceof v))throw F}}const x=zn.createTransform(t,n,r,f,o),p=zn.sampleGrid(this.image,x,o);let E;return f===null?E=[r,t,n]:E=[r,t,n,f],new cr(p,E)}static createTransform(e,t,n,r,i){const o=i-3.5;let c,u,f,x;return r!==null?(c=r.getX(),u=r.getY(),f=o-3,x=f):(c=t.getX()-e.getX()+n.getX(),u=t.getY()-e.getY()+n.getY(),f=o,x=o),It.quadrilateralToQuadrilateral(3.5,3.5,o,3.5,f,x,3.5,o,e.getX(),e.getY(),t.getX(),t.getY(),c,u,n.getX(),n.getY())}static sampleGrid(e,t,n){return Vt.getInstance().sampleGridWithTransform(e,n,n,t)}static computeDimension(e,t,n,r){const i=fe.round(X.distance(e,t)/r),o=fe.round(X.distance(e,n)/r);let c=Math.floor((i+o)/2)+7;switch(c&3){case 0:c++;break;case 2:c--;break;case 3:throw new v("Dimensions could be not found.")}return c}calculateModuleSize(e,t,n){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,n))/2}calculateModuleSizeOneWay(e,t){const n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY())),r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(n)?r/7:isNaN(r)?n/7:(n+r)/14}sizeOfBlackWhiteBlackRunBothWays(e,t,n,r){let i=this.sizeOfBlackWhiteBlackRun(e,t,n,r),o=1,c=e-(n-e);c<0?(o=e/(e-c),c=0):c>=this.image.getWidth()&&(o=(this.image.getWidth()-1-e)/(c-e),c=this.image.getWidth()-1);let u=Math.floor(t-(r-t)*o);return o=1,u<0?(o=t/(t-u),u=0):u>=this.image.getHeight()&&(o=(this.image.getHeight()-1-t)/(u-t),u=this.image.getHeight()-1),c=Math.floor(e+(c-e)*o),i+=this.sizeOfBlackWhiteBlackRun(e,t,c,u),i-1}sizeOfBlackWhiteBlackRun(e,t,n,r){const i=Math.abs(r-t)>Math.abs(n-e);if(i){let y=e;e=t,t=y,y=n,n=r,r=y}const o=Math.abs(n-e),c=Math.abs(r-t);let u=-o/2;const f=e<n?1:-1,x=t<r?1:-1;let p=0;const E=n+f;for(let y=e,b=t;y!==E;y+=f){const T=i?b:y,M=i?y:b;if(p===1===this.image.get(T,M)){if(p===2)return fe.distance(y,b,e,t);p++}if(u+=c,u>0){if(b===r)break;b+=x,u-=o}}return p===2?fe.distance(n+f,r,e,t):NaN}findAlignmentInRegion(e,t,n,r){const i=Math.floor(r*e),o=Math.max(0,t-i),c=Math.min(this.image.getWidth()-1,t+i);if(c-o<e*3)throw new v("Alignment top exceeds estimated module size.");const u=Math.max(0,n-i),f=Math.min(this.image.getHeight()-1,n+i);if(f-u<e*3)throw new v("Alignment bottom exceeds estimated module size.");return new dr(this.image,o,u,c-o,f-u,e,this.resultPointCallback).find()}}class Xt{constructor(){this.decoder=new Da}getDecoder(){return this.decoder}decode(e,t){let n,r;if(t!=null&&t.get(ue.PURE_BARCODE)!==void 0){const u=Xt.extractPureBits(e.getBlackMatrix());n=this.decoder.decodeBitMatrix(u,t),r=Xt.NO_POINTS}else{const u=new zn(e.getBlackMatrix()).detect(t);n=this.decoder.decodeBitMatrix(u.getBits(),t),r=u.getPoints()}n.getOther()instanceof us&&n.getOther().applyMirroredCorrection(r);const i=new nt(n.getText(),n.getRawBytes(),void 0,r,J.QR_CODE,void 0),o=n.getByteSegments();o!==null&&i.putMetadata(We.BYTE_SEGMENTS,o);const c=n.getECLevel();return c!==null&&i.putMetadata(We.ERROR_CORRECTION_LEVEL,c),n.hasStructuredAppend()&&(i.putMetadata(We.STRUCTURED_APPEND_SEQUENCE,n.getStructuredAppendSequenceNumber()),i.putMetadata(We.STRUCTURED_APPEND_PARITY,n.getStructuredAppendParity())),i}reset(){}static extractPureBits(e){const t=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(t===null||n===null)throw new v;const r=this.moduleSize(t,e);let i=t[1],o=n[1],c=t[0],u=n[0];if(c>=u||i>=o)throw new v;if(o-i!==u-c&&(u=c+(o-i),u>=e.getWidth()))throw new v;const f=Math.round((u-c+1)/r),x=Math.round((o-i+1)/r);if(f<=0||x<=0)throw new v;if(x!==f)throw new v;const p=Math.floor(r/2);i+=p,c+=p;const E=c+Math.floor((f-1)*r)-u;if(E>0){if(E>p)throw new v;c-=E}const y=i+Math.floor((x-1)*r)-o;if(y>0){if(y>p)throw new v;i-=y}const b=new Ve(f,x);for(let T=0;T<x;T++){const M=i+Math.floor(T*r);for(let R=0;R<f;R++)e.get(c+Math.floor(R*r),M)&&b.set(R,T)}return b}static moduleSize(e,t){const n=t.getHeight(),r=t.getWidth();let i=e[0],o=e[1],c=!0,u=0;for(;i<r&&o<n;){if(c!==t.get(i,o)){if(++u===5)break;c=!c}i++,o++}if(i===r||o===n)throw new v;return(i-e[0])/7}}Xt.NO_POINTS=new Array;class ee{PDF417Common(){}static getBitCountSum(e){return fe.sum(e)}static toIntArray(e){if(e==null||!e.length)return ee.EMPTY_INT_ARRAY;const t=new Int32Array(e.length);let n=0;for(const r of e)t[n++]=r;return t}static getCodeword(e){const t=Q.binarySearch(ee.SYMBOL_TABLE,e&262143);return t<0?-1:(ee.CODEWORD_TABLE[t]-1)%ee.NUMBER_OF_CODEWORDS}}ee.NUMBER_OF_CODEWORDS=929,ee.MAX_CODEWORDS_IN_BARCODE=ee.NUMBER_OF_CODEWORDS-1,ee.MIN_ROWS_IN_BARCODE=3,ee.MAX_ROWS_IN_BARCODE=90,ee.MODULES_IN_CODEWORD=17,ee.MODULES_IN_STOP_PATTERN=18,ee.BARS_IN_MODULE=8,ee.EMPTY_INT_ARRAY=new Int32Array([]),ee.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),ee.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class va{constructor(e,t){this.bits=e,this.points=t}getBits(){return this.bits}getPoints(){return this.points}}class oe{static detectMultiple(e,t,n){let r=e.getBlackMatrix(),i=oe.detect(n,r);return i.length||(r=r.clone(),r.rotate180(),i=oe.detect(n,r)),new va(r,i)}static detect(e,t){const n=new Array;let r=0,i=0,o=!1;for(;r<t.getHeight();){const c=oe.findVertices(t,r,i);if(c[0]==null&&c[3]==null){if(!o)break;o=!1,i=0;for(const u of n)u[1]!=null&&(r=Math.trunc(Math.max(r,u[1].getY()))),u[3]!=null&&(r=Math.max(r,Math.trunc(u[3].getY())));r+=oe.ROW_STEP;continue}if(o=!0,n.push(c),!e)break;c[2]!=null?(i=Math.trunc(c[2].getX()),r=Math.trunc(c[2].getY())):(i=Math.trunc(c[4].getX()),r=Math.trunc(c[4].getY()))}return n}static findVertices(e,t,n){const r=e.getHeight(),i=e.getWidth(),o=new Array(8);return oe.copyToResult(o,oe.findRowsWithPattern(e,r,i,t,n,oe.START_PATTERN),oe.INDEXES_START_PATTERN),o[4]!=null&&(n=Math.trunc(o[4].getX()),t=Math.trunc(o[4].getY())),oe.copyToResult(o,oe.findRowsWithPattern(e,r,i,t,n,oe.STOP_PATTERN),oe.INDEXES_STOP_PATTERN),o}static copyToResult(e,t,n){for(let r=0;r<n.length;r++)e[n[r]]=t[r]}static findRowsWithPattern(e,t,n,r,i,o){const c=new Array(4);let u=!1;const f=new Int32Array(o.length);for(;r<t;r+=oe.ROW_STEP){let p=oe.findGuardPattern(e,i,r,n,!1,o,f);if(p!=null){for(;r>0;){const E=oe.findGuardPattern(e,i,--r,n,!1,o,f);if(E!=null)p=E;else{r++;break}}c[0]=new X(p[0],r),c[1]=new X(p[1],r),u=!0;break}}let x=r+1;if(u){let p=0,E=Int32Array.from([Math.trunc(c[0].getX()),Math.trunc(c[1].getX())]);for(;x<t;x++){const y=oe.findGuardPattern(e,E[0],x,n,!1,o,f);if(y!=null&&Math.abs(E[0]-y[0])<oe.MAX_PATTERN_DRIFT&&Math.abs(E[1]-y[1])<oe.MAX_PATTERN_DRIFT)E=y,p=0;else{if(p>oe.SKIPPED_ROW_COUNT_MAX)break;p++}}x-=p+1,c[2]=new X(E[0],x),c[3]=new X(E[1],x)}return x-r<oe.BARCODE_MIN_HEIGHT&&Q.fill(c,null),c}static findGuardPattern(e,t,n,r,i,o,c){Q.fillWithin(c,0,c.length,0);let u=t,f=0;for(;e.get(u,n)&&u>0&&f++<oe.MAX_PIXEL_DRIFT;)u--;let x=u,p=0,E=o.length;for(let y=i;x<r;x++)if(e.get(x,n)!==y)c[p]++;else{if(p===E-1){if(oe.patternMatchVariance(c,o,oe.MAX_INDIVIDUAL_VARIANCE)<oe.MAX_AVG_VARIANCE)return new Int32Array([u,x]);u+=c[0]+c[1],q.arraycopy(c,2,c,0,p-1),c[p-1]=0,c[p]=0,p--}else p++;c[p]=1,y=!y}return p===E-1&&oe.patternMatchVariance(c,o,oe.MAX_INDIVIDUAL_VARIANCE)<oe.MAX_AVG_VARIANCE?new Int32Array([u,x-1]):null}static patternMatchVariance(e,t,n){let r=e.length,i=0,o=0;for(let f=0;f<r;f++)i+=e[f],o+=t[f];if(i<o)return 1/0;let c=i/o;n*=c;let u=0;for(let f=0;f<r;f++){let x=e[f],p=t[f]*c,E=x>p?x-p:p-x;if(E>n)return 1/0;u+=E}return u/i}}oe.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),oe.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),oe.MAX_AVG_VARIANCE=.42,oe.MAX_INDIVIDUAL_VARIANCE=.8,oe.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),oe.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),oe.MAX_PIXEL_DRIFT=3,oe.MAX_PATTERN_DRIFT=5,oe.SKIPPED_ROW_COUNT_MAX=25,oe.ROW_STEP=5,oe.BARCODE_MIN_HEIGHT=10;class Qe{constructor(e,t){if(t.length===0)throw new N;this.field=e;let n=t.length;if(n>1&&t[0]===0){let r=1;for(;r<n&&t[r]===0;)r++;r===n?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(n-r),q.arraycopy(t,r,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(e===0)return this.getCoefficient(0);if(e===1){let r=0;for(let i of this.coefficients)r=this.field.add(r,i);return r}let t=this.coefficients[0],n=this.coefficients.length;for(let r=1;r<n;r++)t=this.field.add(this.field.multiply(e,t),this.coefficients[r]);return t}add(e){if(!this.field.equals(e.field))throw new N("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;let t=this.coefficients,n=e.coefficients;if(t.length>n.length){let o=t;t=n,n=o}let r=new Int32Array(n.length),i=n.length-t.length;q.arraycopy(n,0,r,0,i);for(let o=i;o<n.length;o++)r[o]=this.field.add(t[o-i],n[o]);return new Qe(this.field,r)}subtract(e){if(!this.field.equals(e.field))throw new N("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())}multiply(e){return e instanceof Qe?this.multiplyOther(e):this.multiplyScalar(e)}multiplyOther(e){if(!this.field.equals(e.field))throw new N("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new Qe(this.field,new Int32Array([0]));let t=this.coefficients,n=t.length,r=e.coefficients,i=r.length,o=new Int32Array(n+i-1);for(let c=0;c<n;c++){let u=t[c];for(let f=0;f<i;f++)o[c+f]=this.field.add(o[c+f],this.field.multiply(u,r[f]))}return new Qe(this.field,o)}negative(){let e=this.coefficients.length,t=new Int32Array(e);for(let n=0;n<e;n++)t[n]=this.field.subtract(0,this.coefficients[n]);return new Qe(this.field,t)}multiplyScalar(e){if(e===0)return new Qe(this.field,new Int32Array([0]));if(e===1)return this;let t=this.coefficients.length,n=new Int32Array(t);for(let r=0;r<t;r++)n[r]=this.field.multiply(this.coefficients[r],e);return new Qe(this.field,n)}multiplyByMonomial(e,t){if(e<0)throw new N;if(t===0)return new Qe(this.field,new Int32Array([0]));let n=this.coefficients.length,r=new Int32Array(n+e);for(let i=0;i<n;i++)r[i]=this.field.multiply(this.coefficients[i],t);return new Qe(this.field,r)}toString(){let e=new Ee;for(let t=this.getDegree();t>=0;t--){let n=this.getCoefficient(t);n!==0&&(n<0?(e.append(" - "),n=-n):e.length()>0&&e.append(" + "),(t===0||n!==1)&&e.append(n),t!==0&&(t===1?e.append("x"):(e.append("x^"),e.append(t))))}return e.toString()}}class La{add(e,t){return(e+t)%this.modulus}subtract(e,t){return(this.modulus+e-t)%this.modulus}exp(e){return this.expTable[e]}log(e){if(e===0)throw new N;return this.logTable[e]}inverse(e){if(e===0)throw new or;return this.expTable[this.modulus-this.logTable[e]-1]}multiply(e,t){return e===0||t===0?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.modulus-1)]}getSize(){return this.modulus}equals(e){return e===this}}class ei extends La{constructor(e,t){super(),this.modulus=e,this.expTable=new Int32Array(e),this.logTable=new Int32Array(e);let n=1;for(let r=0;r<e;r++)this.expTable[r]=n,n=n*t%e;for(let r=0;r<e-1;r++)this.logTable[this.expTable[r]]=r;this.zero=new Qe(this,new Int32Array([0])),this.one=new Qe(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,t){if(e<0)throw new N;if(t===0)return this.zero;let n=new Int32Array(e+1);return n[0]=t,new Qe(this,n)}}ei.PDF417_GF=new ei(ee.NUMBER_OF_CODEWORDS,3);class fs{constructor(){this.field=ei.PDF417_GF}decode(e,t,n){let r=new Qe(this.field,e),i=new Int32Array(t),o=!1;for(let b=t;b>0;b--){let T=r.evaluateAt(this.field.exp(b));i[t-b]=T,T!==0&&(o=!0)}if(!o)return 0;let c=this.field.getOne();if(n!=null)for(const b of n){let T=this.field.exp(e.length-1-b),M=new Qe(this.field,new Int32Array([this.field.subtract(0,T),1]));c=c.multiply(M)}let u=new Qe(this.field,i),f=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),u,t),x=f[0],p=f[1],E=this.findErrorLocations(x),y=this.findErrorMagnitudes(p,x,E);for(let b=0;b<E.length;b++){let T=e.length-1-this.field.log(E[b]);if(T<0)throw Y.getChecksumInstance();e[T]=this.field.subtract(e[T],y[b])}return E.length}runEuclideanAlgorithm(e,t,n){if(e.getDegree()<t.getDegree()){let E=e;e=t,t=E}let r=e,i=t,o=this.field.getZero(),c=this.field.getOne();for(;i.getDegree()>=Math.round(n/2);){let E=r,y=o;if(r=i,o=c,r.isZero())throw Y.getChecksumInstance();i=E;let b=this.field.getZero(),T=r.getCoefficient(r.getDegree()),M=this.field.inverse(T);for(;i.getDegree()>=r.getDegree()&&!i.isZero();){let R=i.getDegree()-r.getDegree(),P=this.field.multiply(i.getCoefficient(i.getDegree()),M);b=b.add(this.field.buildMonomial(R,P)),i=i.subtract(r.multiplyByMonomial(R,P))}c=b.multiply(o).subtract(y).negative()}let u=c.getCoefficient(0);if(u===0)throw Y.getChecksumInstance();let f=this.field.inverse(u),x=c.multiply(f),p=i.multiply(f);return[x,p]}findErrorLocations(e){let t=e.getDegree(),n=new Int32Array(t),r=0;for(let i=1;i<this.field.getSize()&&r<t;i++)e.evaluateAt(i)===0&&(n[r]=this.field.inverse(i),r++);if(r!==t)throw Y.getChecksumInstance();return n}findErrorMagnitudes(e,t,n){let r=t.getDegree(),i=new Int32Array(r);for(let f=1;f<=r;f++)i[r-f]=this.field.multiply(f,t.getCoefficient(f));let o=new Qe(this.field,i),c=n.length,u=new Int32Array(c);for(let f=0;f<c;f++){let x=this.field.inverse(n[f]),p=this.field.subtract(0,e.evaluateAt(x)),E=this.field.inverse(o.evaluateAt(x));u[f]=this.field.multiply(p,E)}return u}}class an{constructor(e,t,n,r,i){e instanceof an?this.constructor_2(e):this.constructor_1(e,t,n,r,i)}constructor_1(e,t,n,r,i){const o=t==null||n==null,c=r==null||i==null;if(o&&c)throw new v;o?(t=new X(0,r.getY()),n=new X(0,i.getY())):c&&(r=new X(e.getWidth()-1,t.getY()),i=new X(e.getWidth()-1,n.getY())),this.image=e,this.topLeft=t,this.bottomLeft=n,this.topRight=r,this.bottomRight=i,this.minX=Math.trunc(Math.min(t.getX(),n.getX())),this.maxX=Math.trunc(Math.max(r.getX(),i.getX())),this.minY=Math.trunc(Math.min(t.getY(),r.getY())),this.maxY=Math.trunc(Math.max(n.getY(),i.getY()))}constructor_2(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()}static merge(e,t){return e==null?t:t==null?e:new an(e.image,e.topLeft,e.bottomLeft,t.topRight,t.bottomRight)}addMissingRows(e,t,n){let r=this.topLeft,i=this.bottomLeft,o=this.topRight,c=this.bottomRight;if(e>0){let u=n?this.topLeft:this.topRight,f=Math.trunc(u.getY()-e);f<0&&(f=0);let x=new X(u.getX(),f);n?r=x:o=x}if(t>0){let u=n?this.bottomLeft:this.bottomRight,f=Math.trunc(u.getY()+t);f>=this.image.getHeight()&&(f=this.image.getHeight()-1);let x=new X(u.getX(),f);n?i=x:c=x}return new an(this.image,r,i,o,c)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Ba{constructor(e,t,n,r){this.columnCount=e,this.errorCorrectionLevel=r,this.rowCountUpperPart=t,this.rowCountLowerPart=n,this.rowCount=t+n}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class jn{constructor(){this.buffer=""}static form(e,t){let n=-1;function r(o,c,u,f,x,p){if(o==="%%")return"%";if(t[++n]===void 0)return;o=f?parseInt(f.substr(1)):void 0;let E=x?parseInt(x.substr(1)):void 0,y;switch(p){case"s":y=t[n];break;case"c":y=t[n][0];break;case"f":y=parseFloat(t[n]).toFixed(o);break;case"p":y=parseFloat(t[n]).toPrecision(o);break;case"e":y=parseFloat(t[n]).toExponential(o);break;case"x":y=parseInt(t[n]).toString(E||16);break;case"d":y=parseFloat(parseInt(t[n],E||10).toPrecision(o)).toFixed(0);break}y=typeof y=="object"?JSON.stringify(y):(+y).toString(E);let b=parseInt(u),T=u&&u[0]+""=="0"?"0":" ";for(;y.length<b;)y=c!==void 0?y+T:T+y;return y}let i=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(i,r)}format(e,...t){this.buffer+=jn.form(e,t)}toString(){return this.buffer}}class Vn{constructor(e){this.boundingBox=new an(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}getCodewordNearby(e){let t=this.getCodeword(e);if(t!=null)return t;for(let n=1;n<Vn.MAX_NEARBY_DISTANCE;n++){let r=this.imageRowToCodewordIndex(e)-n;if(r>=0&&(t=this.codewords[r],t!=null)||(r=this.imageRowToCodewordIndex(e)+n,r<this.codewords.length&&(t=this.codewords[r],t!=null)))return t}return null}imageRowToCodewordIndex(e){return e-this.boundingBox.getMinY()}setCodeword(e,t){this.codewords[this.imageRowToCodewordIndex(e)]=t}getCodeword(e){return this.codewords[this.imageRowToCodewordIndex(e)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const e=new jn;let t=0;for(const n of this.codewords){if(n==null){e.format("%3d:    |   %n",t++);continue}e.format("%3d: %3d|%3d%n",t++,n.getRowNumber(),n.getValue())}return e.toString()}}Vn.MAX_NEARBY_DISTANCE=5;class Gn{constructor(){this.values=new Map}setValue(e){e=Math.trunc(e);let t=this.values.get(e);t==null&&(t=0),t++,this.values.set(e,t)}getValue(){let e=-1,t=new Array;for(const[n,r]of this.values.entries()){const i={getKey:()=>n,getValue:()=>r};i.getValue()>e?(e=i.getValue(),t=[],t.push(i.getKey())):i.getValue()===e&&t.push(i.getKey())}return ee.toIntArray(t)}getConfidence(e){return this.values.get(e)}}class hs extends Vn{constructor(e,t){super(e),this._isLeft=t}setRowNumbers(){for(let e of this.getCodewords())e?.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(e){let t=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(t,e);let n=this.getBoundingBox(),r=this._isLeft?n.getTopLeft():n.getTopRight(),i=this._isLeft?n.getBottomLeft():n.getBottomRight(),o=this.imageRowToCodewordIndex(Math.trunc(r.getY())),c=this.imageRowToCodewordIndex(Math.trunc(i.getY())),u=-1,f=1,x=0;for(let p=o;p<c;p++){if(t[p]==null)continue;let E=t[p],y=E.getRowNumber()-u;if(y===0)x++;else if(y===1)f=Math.max(f,x),x=1,u=E.getRowNumber();else if(y<0||E.getRowNumber()>=e.getRowCount()||y>p)t[p]=null;else{let b;f>2?b=(f-2)*y:b=y;let T=b>=p;for(let M=1;M<=b&&!T;M++)T=t[p-M]!=null;T?t[p]=null:(u=E.getRowNumber(),x=1)}}}getRowHeights(){let e=this.getBarcodeMetadata();if(e==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(e);let t=new Int32Array(e.getRowCount());for(let n of this.getCodewords())if(n!=null){let r=n.getRowNumber();if(r>=t.length)continue;t[r]++}return t}adjustIncompleteIndicatorColumnRowNumbers(e){let t=this.getBoundingBox(),n=this._isLeft?t.getTopLeft():t.getTopRight(),r=this._isLeft?t.getBottomLeft():t.getBottomRight(),i=this.imageRowToCodewordIndex(Math.trunc(n.getY())),o=this.imageRowToCodewordIndex(Math.trunc(r.getY())),c=this.getCodewords(),u=-1;for(let f=i;f<o;f++){if(c[f]==null)continue;let x=c[f];x.setRowNumberAsRowIndicatorColumn();let p=x.getRowNumber()-u;p===0||(p===1?u=x.getRowNumber():x.getRowNumber()>=e.getRowCount()?c[f]=null:u=x.getRowNumber())}}getBarcodeMetadata(){let e=this.getCodewords(),t=new Gn,n=new Gn,r=new Gn,i=new Gn;for(let c of e){if(c==null)continue;c.setRowNumberAsRowIndicatorColumn();let u=c.getValue()%30,f=c.getRowNumber();switch(this._isLeft||(f+=2),f%3){case 0:n.setValue(u*3+1);break;case 1:i.setValue(u/3),r.setValue(u%3);break;case 2:t.setValue(u+1);break}}if(t.getValue().length===0||n.getValue().length===0||r.getValue().length===0||i.getValue().length===0||t.getValue()[0]<1||n.getValue()[0]+r.getValue()[0]<ee.MIN_ROWS_IN_BARCODE||n.getValue()[0]+r.getValue()[0]>ee.MAX_ROWS_IN_BARCODE)return null;let o=new Ba(t.getValue()[0],n.getValue()[0],r.getValue()[0],i.getValue()[0]);return this.removeIncorrectCodewords(e,o),o}removeIncorrectCodewords(e,t){for(let n=0;n<e.length;n++){let r=e[n];if(e[n]==null)continue;let i=r.getValue()%30,o=r.getRowNumber();if(o>t.getRowCount()){e[n]=null;continue}switch(this._isLeft||(o+=2),o%3){case 0:i*3+1!==t.getRowCountUpperPart()&&(e[n]=null);break;case 1:(Math.trunc(i/3)!==t.getErrorCorrectionLevel()||i%3!==t.getRowCountLowerPart())&&(e[n]=null);break;case 2:i+1!==t.getColumnCount()&&(e[n]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Wn{constructor(e,t){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=t,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let e=ee.MAX_CODEWORDS_IN_BARCODE,t;do t=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<t);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(e){e?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let e=this.adjustRowNumbersByRow();if(e===0)return 0;for(let t=1;t<this.barcodeColumnCount+1;t++){let n=this.detectionResultColumns[t].getCodewords();for(let r=0;r<n.length;r++)n[r]!=null&&(n[r].hasValidRowNumber()||this.adjustRowNumbers(t,r,n))}return e}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let e=this.detectionResultColumns[0].getCodewords(),t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let n=0;n<e.length;n++)if(e[n]!=null&&t[n]!=null&&e[n].getRowNumber()===t[n].getRowNumber())for(let r=1;r<=this.barcodeColumnCount;r++){let i=this.detectionResultColumns[r].getCodewords()[n];i!=null&&(i.setRowNumber(e[n].getRowNumber()),i.hasValidRowNumber()||(this.detectionResultColumns[r].getCodewords()[n]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let e=0,t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let n=0;n<t.length;n++){if(t[n]==null)continue;let r=t[n].getRowNumber(),i=0;for(let o=this.barcodeColumnCount+1;o>0&&i<this.ADJUST_ROW_NUMBER_SKIP;o--){let c=this.detectionResultColumns[o].getCodewords()[n];c!=null&&(i=Wn.adjustRowNumberIfValid(r,i,c),c.hasValidRowNumber()||e++)}}return e}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let e=0,t=this.detectionResultColumns[0].getCodewords();for(let n=0;n<t.length;n++){if(t[n]==null)continue;let r=t[n].getRowNumber(),i=0;for(let o=1;o<this.barcodeColumnCount+1&&i<this.ADJUST_ROW_NUMBER_SKIP;o++){let c=this.detectionResultColumns[o].getCodewords()[n];c!=null&&(i=Wn.adjustRowNumberIfValid(r,i,c),c.hasValidRowNumber()||e++)}}return e}static adjustRowNumberIfValid(e,t,n){return n==null||n.hasValidRowNumber()||(n.isValidRowNumber(e)?(n.setRowNumber(e),t=0):++t),t}adjustRowNumbers(e,t,n){if(!this.detectionResultColumns[e-1])return;let r=n[t],i=this.detectionResultColumns[e-1].getCodewords(),o=i;this.detectionResultColumns[e+1]!=null&&(o=this.detectionResultColumns[e+1].getCodewords());let c=new Array(14);c[2]=i[t],c[3]=o[t],t>0&&(c[0]=n[t-1],c[4]=i[t-1],c[5]=o[t-1]),t>1&&(c[8]=n[t-2],c[10]=i[t-2],c[11]=o[t-2]),t<n.length-1&&(c[1]=n[t+1],c[6]=i[t+1],c[7]=o[t+1]),t<n.length-2&&(c[9]=n[t+2],c[12]=i[t+2],c[13]=o[t+2]);for(let u of c)if(Wn.adjustRowNumber(r,u))return}static adjustRowNumber(e,t){return t==null?!1:t.hasValidRowNumber()&&t.getBucket()===e.getBucket()?(e.setRowNumber(t.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(e){this.boundingBox=e}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(e,t){this.detectionResultColumns[e]=t}getDetectionResultColumn(e){return this.detectionResultColumns[e]}toString(){let e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);let t=new jn;for(let n=0;n<e.getCodewords().length;n++){t.format("CW %3d:",n);for(let r=0;r<this.barcodeColumnCount+2;r++){if(this.detectionResultColumns[r]==null){t.format("    |   ");continue}let i=this.detectionResultColumns[r].getCodewords()[n];if(i==null){t.format("    |   ");continue}t.format(" %3d|%3d",i.getRowNumber(),i.getValue())}t.format("%n")}return t.toString()}}class Yn{constructor(e,t,n,r){this.rowNumber=Yn.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(t),this.bucket=Math.trunc(n),this.value=Math.trunc(r)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(e){return e!==Yn.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(e){this.rowNumber=e}toString(){return this.rowNumber+"|"+this.value}}Yn.BARCODE_ROW_UNKNOWN=-1;class ut{static initialize(){for(let e=0;e<ee.SYMBOL_TABLE.length;e++){let t=ee.SYMBOL_TABLE[e],n=t&1;for(let r=0;r<ee.BARS_IN_MODULE;r++){let i=0;for(;(t&1)===n;)i+=1,t>>=1;n=t&1,ut.RATIOS_TABLE[e]||(ut.RATIOS_TABLE[e]=new Array(ee.BARS_IN_MODULE)),ut.RATIOS_TABLE[e][ee.BARS_IN_MODULE-r-1]=Math.fround(i/ee.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(e){let t=ut.getDecodedCodewordValue(ut.sampleBitCounts(e));return t!==-1?t:ut.getClosestDecodedValue(e)}static sampleBitCounts(e){let t=fe.sum(e),n=new Int32Array(ee.BARS_IN_MODULE),r=0,i=0;for(let o=0;o<ee.MODULES_IN_CODEWORD;o++){let c=t/(2*ee.MODULES_IN_CODEWORD)+o*t/ee.MODULES_IN_CODEWORD;i+e[r]<=c&&(i+=e[r],r++),n[r]++}return n}static getDecodedCodewordValue(e){let t=ut.getBitValue(e);return ee.getCodeword(t)===-1?-1:t}static getBitValue(e){let t=0;for(let n=0;n<e.length;n++)for(let r=0;r<e[n];r++)t=t<<1|(n%2===0?1:0);return Math.trunc(t)}static getClosestDecodedValue(e){let t=fe.sum(e),n=new Array(ee.BARS_IN_MODULE);if(t>1)for(let o=0;o<n.length;o++)n[o]=Math.fround(e[o]/t);let r=ar.MAX_VALUE,i=-1;this.bSymbolTableReady||ut.initialize();for(let o=0;o<ut.RATIOS_TABLE.length;o++){let c=0,u=ut.RATIOS_TABLE[o];for(let f=0;f<ee.BARS_IN_MODULE;f++){let x=Math.fround(u[f]-n[f]);if(c+=Math.fround(x*x),c>=r)break}c<r&&(r=c,i=ee.SYMBOL_TABLE[o])}return i}}ut.bSymbolTableReady=!1,ut.RATIOS_TABLE=new Array(ee.SYMBOL_TABLE.length).map(w=>new Array(ee.BARS_IN_MODULE));class ds{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(e){this.segmentIndex=e}getFileId(){return this.fileId}setFileId(e){this.fileId=e}getOptionalData(){return this.optionalData}setOptionalData(e){this.optionalData=e}isLastSegment(){return this.lastSegment}setLastSegment(e){this.lastSegment=e}getSegmentCount(){return this.segmentCount}setSegmentCount(e){this.segmentCount=e}getSender(){return this.sender||null}setSender(e){this.sender=e}getAddressee(){return this.addressee||null}setAddressee(e){this.addressee=e}getFileName(){return this.fileName}setFileName(e){this.fileName=e}getFileSize(){return this.fileSize}setFileSize(e){this.fileSize=e}getChecksum(){return this.checksum}setChecksum(e){this.checksum=e}getTimestamp(){return this.timestamp}setTimestamp(e){this.timestamp=e}}class gs{static parseLong(e,t=void 0){return parseInt(e,t)}}class xs extends C{}xs.kind="NullPointerException";class Pa{writeBytes(e){this.writeBytesOffset(e,0,e.length)}writeBytesOffset(e,t,n){if(e==null)throw new xs;if(t<0||t>e.length||n<0||t+n>e.length||t+n<0)throw new j;if(n===0)return;for(let r=0;r<n;r++)this.write(e[t+r])}flush(){}close(){}}class Fa extends C{}class ka extends Pa{constructor(e=32){if(super(),this.count=0,e<0)throw new N("Negative initial size: "+e);this.buf=new Uint8Array(e)}ensureCapacity(e){e-this.buf.length>0&&this.grow(e)}grow(e){let n=this.buf.length<<1;if(n-e<0&&(n=e),n<0){if(e<0)throw new Fa;n=W.MAX_VALUE}this.buf=Q.copyOfUint8Array(this.buf,n)}write(e){this.ensureCapacity(this.count+1),this.buf[this.count]=e,this.count+=1}writeBytesOffset(e,t,n){if(t<0||t>e.length||n<0||t+n-e.length>0)throw new j;this.ensureCapacity(this.count+n),q.arraycopy(e,t,this.buf,this.count,n),this.count+=n}writeTo(e){e.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return Q.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(e){return e?typeof e=="string"?this.toString_string(e):this.toString_number(e):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(e){return new String(this.buf).toString()}toString_number(e){return new String(this.buf).toString()}close(){}}var me;(function(w){w[w.ALPHA=0]="ALPHA",w[w.LOWER=1]="LOWER",w[w.MIXED=2]="MIXED",w[w.PUNCT=3]="PUNCT",w[w.ALPHA_SHIFT=4]="ALPHA_SHIFT",w[w.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(me||(me={}));function ws(){if(typeof window<"u")return window.BigInt||null;if(typeof Sr<"u")return Sr.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let gr;function Zt(w){if(typeof gr>"u"&&(gr=ws()),gr===null)throw new Error("BigInt is not supported!");return gr(w)}function Ua(){let w=[];w[0]=Zt(1);let e=Zt(900);w[1]=e;for(let t=2;t<16;t++)w[t]=w[t-1]*e;return w}class D{static decode(e,t){let n=new Ee(""),r=k.ISO8859_1;n.enableDecoding(r);let i=1,o=e[i++],c=new ds;for(;i<e[0];){switch(o){case D.TEXT_COMPACTION_MODE_LATCH:i=D.textCompaction(e,i,n);break;case D.BYTE_COMPACTION_MODE_LATCH:case D.BYTE_COMPACTION_MODE_LATCH_6:i=D.byteCompaction(o,e,r,i,n);break;case D.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(e[i++]);break;case D.NUMERIC_COMPACTION_MODE_LATCH:i=D.numericCompaction(e,i,n);break;case D.ECI_CHARSET:k.getCharacterSetECIByValue(e[i++]);break;case D.ECI_GENERAL_PURPOSE:i+=2;break;case D.ECI_USER_DEFINED:i++;break;case D.BEGIN_MACRO_PDF417_CONTROL_BLOCK:i=D.decodeMacroBlock(e,i,c);break;case D.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case D.MACRO_PDF417_TERMINATOR:throw new U;default:i--,i=D.textCompaction(e,i,n);break}if(i<e.length)o=e[i++];else throw U.getFormatInstance()}if(n.length()===0)throw U.getFormatInstance();let u=new Fn(null,n.toString(),null,t);return u.setOther(c),u}static decodeMacroBlock(e,t,n){if(t+D.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw U.getFormatInstance();let r=new Int32Array(D.NUMBER_OF_SEQUENCE_CODEWORDS);for(let c=0;c<D.NUMBER_OF_SEQUENCE_CODEWORDS;c++,t++)r[c]=e[t];n.setSegmentIndex(W.parseInt(D.decodeBase900toBase10(r,D.NUMBER_OF_SEQUENCE_CODEWORDS)));let i=new Ee;t=D.textCompaction(e,t,i),n.setFileId(i.toString());let o=-1;for(e[t]===D.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(o=t+1);t<e[0];)switch(e[t]){case D.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(t++,e[t]){case D.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let c=new Ee;t=D.textCompaction(e,t+1,c),n.setFileName(c.toString());break;case D.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let u=new Ee;t=D.textCompaction(e,t+1,u),n.setSender(u.toString());break;case D.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let f=new Ee;t=D.textCompaction(e,t+1,f),n.setAddressee(f.toString());break;case D.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let x=new Ee;t=D.numericCompaction(e,t+1,x),n.setSegmentCount(W.parseInt(x.toString()));break;case D.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let p=new Ee;t=D.numericCompaction(e,t+1,p),n.setTimestamp(gs.parseLong(p.toString()));break;case D.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let E=new Ee;t=D.numericCompaction(e,t+1,E),n.setChecksum(W.parseInt(E.toString()));break;case D.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let y=new Ee;t=D.numericCompaction(e,t+1,y),n.setFileSize(gs.parseLong(y.toString()));break;default:throw U.getFormatInstance()}break;case D.MACRO_PDF417_TERMINATOR:t++,n.setLastSegment(!0);break;default:throw U.getFormatInstance()}if(o!==-1){let c=t-o;n.isLastSegment()&&c--,n.setOptionalData(Q.copyOfRange(e,o,o+c))}return t}static textCompaction(e,t,n){let r=new Int32Array((e[0]-t)*2),i=new Int32Array((e[0]-t)*2),o=0,c=!1;for(;t<e[0]&&!c;){let u=e[t++];if(u<D.TEXT_COMPACTION_MODE_LATCH)r[o]=u/30,r[o+1]=u%30,o+=2;else switch(u){case D.TEXT_COMPACTION_MODE_LATCH:r[o++]=D.TEXT_COMPACTION_MODE_LATCH;break;case D.BYTE_COMPACTION_MODE_LATCH:case D.BYTE_COMPACTION_MODE_LATCH_6:case D.NUMERIC_COMPACTION_MODE_LATCH:case D.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case D.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case D.MACRO_PDF417_TERMINATOR:t--,c=!0;break;case D.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r[o]=D.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,u=e[t++],i[o]=u,o++;break}}return D.decodeTextCompaction(r,i,o,n),t}static decodeTextCompaction(e,t,n,r){let i=me.ALPHA,o=me.ALPHA,c=0;for(;c<n;){let u=e[c],f="";switch(i){case me.ALPHA:if(u<26)f=String.fromCharCode(65+u);else switch(u){case 26:f=" ";break;case D.LL:i=me.LOWER;break;case D.ML:i=me.MIXED;break;case D.PS:o=i,i=me.PUNCT_SHIFT;break;case D.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[c]);break;case D.TEXT_COMPACTION_MODE_LATCH:i=me.ALPHA;break}break;case me.LOWER:if(u<26)f=String.fromCharCode(97+u);else switch(u){case 26:f=" ";break;case D.AS:o=i,i=me.ALPHA_SHIFT;break;case D.ML:i=me.MIXED;break;case D.PS:o=i,i=me.PUNCT_SHIFT;break;case D.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[c]);break;case D.TEXT_COMPACTION_MODE_LATCH:i=me.ALPHA;break}break;case me.MIXED:if(u<D.PL)f=D.MIXED_CHARS[u];else switch(u){case D.PL:i=me.PUNCT;break;case 26:f=" ";break;case D.LL:i=me.LOWER;break;case D.AL:i=me.ALPHA;break;case D.PS:o=i,i=me.PUNCT_SHIFT;break;case D.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[c]);break;case D.TEXT_COMPACTION_MODE_LATCH:i=me.ALPHA;break}break;case me.PUNCT:if(u<D.PAL)f=D.PUNCT_CHARS[u];else switch(u){case D.PAL:i=me.ALPHA;break;case D.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[c]);break;case D.TEXT_COMPACTION_MODE_LATCH:i=me.ALPHA;break}break;case me.ALPHA_SHIFT:if(i=o,u<26)f=String.fromCharCode(65+u);else switch(u){case 26:f=" ";break;case D.TEXT_COMPACTION_MODE_LATCH:i=me.ALPHA;break}break;case me.PUNCT_SHIFT:if(i=o,u<D.PAL)f=D.PUNCT_CHARS[u];else switch(u){case D.PAL:i=me.ALPHA;break;case D.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[c]);break;case D.TEXT_COMPACTION_MODE_LATCH:i=me.ALPHA;break}break}f!==""&&r.append(f),c++}}static byteCompaction(e,t,n,r,i){let o=new ka,c=0,u=0,f=!1;switch(e){case D.BYTE_COMPACTION_MODE_LATCH:let x=new Int32Array(6),p=t[r++];for(;r<t[0]&&!f;)switch(x[c++]=p,u=900*u+p,p=t[r++],p){case D.TEXT_COMPACTION_MODE_LATCH:case D.BYTE_COMPACTION_MODE_LATCH:case D.NUMERIC_COMPACTION_MODE_LATCH:case D.BYTE_COMPACTION_MODE_LATCH_6:case D.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case D.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case D.MACRO_PDF417_TERMINATOR:r--,f=!0;break;default:if(c%5===0&&c>0){for(let E=0;E<6;++E)o.write(Number(Zt(u)>>Zt(8*(5-E))));u=0,c=0}break}r===t[0]&&p<D.TEXT_COMPACTION_MODE_LATCH&&(x[c++]=p);for(let E=0;E<c;E++)o.write(x[E]);break;case D.BYTE_COMPACTION_MODE_LATCH_6:for(;r<t[0]&&!f;){let E=t[r++];if(E<D.TEXT_COMPACTION_MODE_LATCH)c++,u=900*u+E;else switch(E){case D.TEXT_COMPACTION_MODE_LATCH:case D.BYTE_COMPACTION_MODE_LATCH:case D.NUMERIC_COMPACTION_MODE_LATCH:case D.BYTE_COMPACTION_MODE_LATCH_6:case D.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case D.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case D.MACRO_PDF417_TERMINATOR:r--,f=!0;break}if(c%5===0&&c>0){for(let y=0;y<6;++y)o.write(Number(Zt(u)>>Zt(8*(5-y))));u=0,c=0}}break}return i.append(ot.decode(o.toByteArray(),n)),r}static numericCompaction(e,t,n){let r=0,i=!1,o=new Int32Array(D.MAX_NUMERIC_CODEWORDS);for(;t<e[0]&&!i;){let c=e[t++];if(t===e[0]&&(i=!0),c<D.TEXT_COMPACTION_MODE_LATCH)o[r]=c,r++;else switch(c){case D.TEXT_COMPACTION_MODE_LATCH:case D.BYTE_COMPACTION_MODE_LATCH:case D.BYTE_COMPACTION_MODE_LATCH_6:case D.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case D.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case D.MACRO_PDF417_TERMINATOR:t--,i=!0;break}(r%D.MAX_NUMERIC_CODEWORDS===0||c===D.NUMERIC_COMPACTION_MODE_LATCH||i)&&r>0&&(n.append(D.decodeBase900toBase10(o,r)),r=0)}return t}static decodeBase900toBase10(e,t){let n=Zt(0);for(let i=0;i<t;i++)n+=D.EXP900[t-i-1]*Zt(e[i]);let r=n.toString();if(r.charAt(0)!=="1")throw new U;return r.substring(1)}}D.TEXT_COMPACTION_MODE_LATCH=900,D.BYTE_COMPACTION_MODE_LATCH=901,D.NUMERIC_COMPACTION_MODE_LATCH=902,D.BYTE_COMPACTION_MODE_LATCH_6=924,D.ECI_USER_DEFINED=925,D.ECI_GENERAL_PURPOSE=926,D.ECI_CHARSET=927,D.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,D.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,D.MACRO_PDF417_TERMINATOR=922,D.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,D.MAX_NUMERIC_CODEWORDS=15,D.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,D.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,D.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,D.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,D.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,D.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,D.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,D.PL=25,D.LL=27,D.AS=27,D.ML=28,D.AL=28,D.PS=29,D.PAL=29,D.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,D.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",D.EXP900=ws()?Ua():[],D.NUMBER_OF_SEQUENCE_CODEWORDS=2;class ae{constructor(){}static decode(e,t,n,r,i,o,c){let u=new an(e,t,n,r,i),f=null,x=null,p;for(let b=!0;;b=!1){if(t!=null&&(f=ae.getRowIndicatorColumn(e,u,t,!0,o,c)),r!=null&&(x=ae.getRowIndicatorColumn(e,u,r,!1,o,c)),p=ae.merge(f,x),p==null)throw v.getNotFoundInstance();let T=p.getBoundingBox();if(b&&T!=null&&(T.getMinY()<u.getMinY()||T.getMaxY()>u.getMaxY()))u=T;else break}p.setBoundingBox(u);let E=p.getBarcodeColumnCount()+1;p.setDetectionResultColumn(0,f),p.setDetectionResultColumn(E,x);let y=f!=null;for(let b=1;b<=E;b++){let T=y?b:E-b;if(p.getDetectionResultColumn(T)!==void 0)continue;let M;T===0||T===E?M=new hs(u,T===0):M=new Vn(u),p.setDetectionResultColumn(T,M);let R=-1,P=R;for(let F=u.getMinY();F<=u.getMaxY();F++){if(R=ae.getStartColumn(p,T,F,y),R<0||R>u.getMaxX()){if(P===-1)continue;R=P}let B=ae.detectCodeword(e,u.getMinX(),u.getMaxX(),y,R,F,o,c);B!=null&&(M.setCodeword(F,B),P=R,o=Math.min(o,B.getWidth()),c=Math.max(c,B.getWidth()))}}return ae.createDecoderResult(p)}static merge(e,t){if(e==null&&t==null)return null;let n=ae.getBarcodeMetadata(e,t);if(n==null)return null;let r=an.merge(ae.adjustBoundingBox(e),ae.adjustBoundingBox(t));return new Wn(n,r)}static adjustBoundingBox(e){if(e==null)return null;let t=e.getRowHeights();if(t==null)return null;let n=ae.getMax(t),r=0;for(let c of t)if(r+=n-c,c>0)break;let i=e.getCodewords();for(let c=0;r>0&&i[c]==null;c++)r--;let o=0;for(let c=t.length-1;c>=0&&(o+=n-t[c],!(t[c]>0));c--);for(let c=i.length-1;o>0&&i[c]==null;c--)o--;return e.getBoundingBox().addMissingRows(r,o,e.isLeft())}static getMax(e){let t=-1;for(let n of e)t=Math.max(t,n);return t}static getBarcodeMetadata(e,t){let n;if(e==null||(n=e.getBarcodeMetadata())==null)return t==null?null:t.getBarcodeMetadata();let r;return t==null||(r=t.getBarcodeMetadata())==null?n:n.getColumnCount()!==r.getColumnCount()&&n.getErrorCorrectionLevel()!==r.getErrorCorrectionLevel()&&n.getRowCount()!==r.getRowCount()?null:n}static getRowIndicatorColumn(e,t,n,r,i,o){let c=new hs(t,r);for(let u=0;u<2;u++){let f=u===0?1:-1,x=Math.trunc(Math.trunc(n.getX()));for(let p=Math.trunc(Math.trunc(n.getY()));p<=t.getMaxY()&&p>=t.getMinY();p+=f){let E=ae.detectCodeword(e,0,e.getWidth(),r,x,p,i,o);E!=null&&(c.setCodeword(p,E),r?x=E.getStartX():x=E.getEndX())}}return c}static adjustCodewordCount(e,t){let n=t[0][1],r=n.getValue(),i=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-ae.getNumberOfECCodeWords(e.getBarcodeECLevel());if(r.length===0){if(i<1||i>ee.MAX_CODEWORDS_IN_BARCODE)throw v.getNotFoundInstance();n.setValue(i)}else r[0]!==i&&n.setValue(i)}static createDecoderResult(e){let t=ae.createBarcodeMatrix(e);ae.adjustCodewordCount(e,t);let n=new Array,r=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),i=[],o=new Array;for(let u=0;u<e.getBarcodeRowCount();u++)for(let f=0;f<e.getBarcodeColumnCount();f++){let x=t[u][f+1].getValue(),p=u*e.getBarcodeColumnCount()+f;x.length===0?n.push(p):x.length===1?r[p]=x[0]:(o.push(p),i.push(x))}let c=new Array(i.length);for(let u=0;u<c.length;u++)c[u]=i[u];return ae.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),r,ee.toIntArray(n),ee.toIntArray(o),c)}static createDecoderResultFromAmbiguousValues(e,t,n,r,i){let o=new Int32Array(r.length),c=100;for(;c-- >0;){for(let u=0;u<o.length;u++)t[r[u]]=i[u][o[u]];try{return ae.decodeCodewords(t,e,n)}catch(u){if(!(u instanceof Y))throw u}if(o.length===0)throw Y.getChecksumInstance();for(let u=0;u<o.length;u++)if(o[u]<i[u].length-1){o[u]++;break}else if(o[u]=0,u===o.length-1)throw Y.getChecksumInstance()}throw Y.getChecksumInstance()}static createBarcodeMatrix(e){let t=Array.from({length:e.getBarcodeRowCount()},()=>new Array(e.getBarcodeColumnCount()+2));for(let r=0;r<t.length;r++)for(let i=0;i<t[r].length;i++)t[r][i]=new Gn;let n=0;for(let r of e.getDetectionResultColumns()){if(r!=null){for(let i of r.getCodewords())if(i!=null){let o=i.getRowNumber();if(o>=0){if(o>=t.length)continue;t[o][n].setValue(i.getValue())}}}n++}return t}static isValidBarcodeColumn(e,t){return t>=0&&t<=e.getBarcodeColumnCount()+1}static getStartColumn(e,t,n,r){let i=r?1:-1,o=null;if(ae.isValidBarcodeColumn(e,t-i)&&(o=e.getDetectionResultColumn(t-i).getCodeword(n)),o!=null)return r?o.getEndX():o.getStartX();if(o=e.getDetectionResultColumn(t).getCodewordNearby(n),o!=null)return r?o.getStartX():o.getEndX();if(ae.isValidBarcodeColumn(e,t-i)&&(o=e.getDetectionResultColumn(t-i).getCodewordNearby(n)),o!=null)return r?o.getEndX():o.getStartX();let c=0;for(;ae.isValidBarcodeColumn(e,t-i);){t-=i;for(let u of e.getDetectionResultColumn(t).getCodewords())if(u!=null)return(r?u.getEndX():u.getStartX())+i*c*(u.getEndX()-u.getStartX());c++}return r?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()}static detectCodeword(e,t,n,r,i,o,c,u){i=ae.adjustCodewordStartColumn(e,t,n,r,i,o);let f=ae.getModuleBitCount(e,t,n,r,i,o);if(f==null)return null;let x,p=fe.sum(f);if(r)x=i+p;else{for(let b=0;b<f.length/2;b++){let T=f[b];f[b]=f[f.length-1-b],f[f.length-1-b]=T}x=i,i=x-p}if(!ae.checkCodewordSkew(p,c,u))return null;let E=ut.getDecodedValue(f),y=ee.getCodeword(E);return y===-1?null:new Yn(i,x,ae.getCodewordBucketNumber(E),y)}static getModuleBitCount(e,t,n,r,i,o){let c=i,u=new Int32Array(8),f=0,x=r?1:-1,p=r;for(;(r?c<n:c>=t)&&f<u.length;)e.get(c,o)===p?(u[f]++,c+=x):(f++,p=!p);return f===u.length||c===(r?n:t)&&f===u.length-1?u:null}static getNumberOfECCodeWords(e){return 2<<e}static adjustCodewordStartColumn(e,t,n,r,i,o){let c=i,u=r?-1:1;for(let f=0;f<2;f++){for(;(r?c>=t:c<n)&&r===e.get(c,o);){if(Math.abs(i-c)>ae.CODEWORD_SKEW_SIZE)return i;c+=u}u=-u,r=!r}return c}static checkCodewordSkew(e,t,n){return t-ae.CODEWORD_SKEW_SIZE<=e&&e<=n+ae.CODEWORD_SKEW_SIZE}static decodeCodewords(e,t,n){if(e.length===0)throw U.getFormatInstance();let r=1<<t+1,i=ae.correctErrors(e,n,r);ae.verifyCodewordCount(e,r);let o=D.decode(e,""+t);return o.setErrorsCorrected(i),o.setErasures(n.length),o}static correctErrors(e,t,n){if(t!=null&&t.length>n/2+ae.MAX_ERRORS||n<0||n>ae.MAX_EC_CODEWORDS)throw Y.getChecksumInstance();return ae.errorCorrection.decode(e,n,t)}static verifyCodewordCount(e,t){if(e.length<4)throw U.getFormatInstance();let n=e[0];if(n>e.length)throw U.getFormatInstance();if(n===0)if(t<e.length)e[0]=e.length-t;else throw U.getFormatInstance()}static getBitCountForCodeword(e){let t=new Int32Array(8),n=0,r=t.length-1;for(;!((e&1)!==n&&(n=e&1,r--,r<0));)t[r]++,e>>=1;return t}static getCodewordBucketNumber(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)}static getCodewordBucketNumber_number(e){return ae.getCodewordBucketNumber(ae.getBitCountForCodeword(e))}static getCodewordBucketNumber_Int32Array(e){return(e[0]-e[2]+e[4]-e[6]+9)%9}static toString(e){let t=new jn;for(let n=0;n<e.length;n++){t.format("Row %2d: ",n);for(let r=0;r<e[n].length;r++){let i=e[n][r];i.getValue().length===0?t.format("        ",null):t.format("%4d(%2d)",i.getValue()[0],i.getConfidence(i.getValue()[0]))}t.format("%n")}return t.toString()}}ae.CODEWORD_SKEW_SIZE=2,ae.MAX_ERRORS=3,ae.MAX_EC_CODEWORDS=512,ae.errorCorrection=new fs;class Ke{decode(e,t=null){let n=Ke.decode(e,t,!1);if(n==null||n.length===0||n[0]==null)throw v.getNotFoundInstance();return n[0]}decodeMultiple(e,t=null){try{return Ke.decode(e,t,!0)}catch(n){throw n instanceof U||n instanceof Y?v.getNotFoundInstance():n}}static decode(e,t,n){const r=new Array,i=oe.detectMultiple(e,t,n);for(const o of i.getPoints()){const c=ae.decode(i.getBits(),o[4],o[5],o[6],o[7],Ke.getMinCodewordWidth(o),Ke.getMaxCodewordWidth(o)),u=new nt(c.getText(),c.getRawBytes(),void 0,o,J.PDF_417);u.putMetadata(We.ERROR_CORRECTION_LEVEL,c.getECLevel());const f=c.getOther();f!=null&&u.putMetadata(We.PDF417_EXTRA_METADATA,f),r.push(u)}return r.map(o=>o)}static getMaxWidth(e,t){return e==null||t==null?0:Math.trunc(Math.abs(e.getX()-t.getX()))}static getMinWidth(e,t){return e==null||t==null?W.MAX_VALUE:Math.trunc(Math.abs(e.getX()-t.getX()))}static getMaxCodewordWidth(e){return Math.floor(Math.max(Math.max(Ke.getMaxWidth(e[0],e[4]),Ke.getMaxWidth(e[6],e[2])*ee.MODULES_IN_CODEWORD/ee.MODULES_IN_STOP_PATTERN),Math.max(Ke.getMaxWidth(e[1],e[5]),Ke.getMaxWidth(e[7],e[3])*ee.MODULES_IN_CODEWORD/ee.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(e){return Math.floor(Math.min(Math.min(Ke.getMinWidth(e[0],e[4]),Ke.getMinWidth(e[6],e[2])*ee.MODULES_IN_CODEWORD/ee.MODULES_IN_STOP_PATTERN),Math.min(Ke.getMinWidth(e[1],e[5]),Ke.getMinWidth(e[7],e[3])*ee.MODULES_IN_CODEWORD/ee.MODULES_IN_STOP_PATTERN)))}reset(){}}class xr extends C{}xr.kind="ReaderException";class ps{constructor(e,t){this.verbose=e===!0,t&&this.setHints(t)}decode(e,t){return t&&this.setHints(t),this.decodeInternal(e)}decodeWithState(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)}setHints(e){this.hints=e;const t=!h(e)&&e.get(ue.TRY_HARDER)===!0,n=h(e)?null:e.get(ue.POSSIBLE_FORMATS),r=new Array;if(!h(n)){const i=n.some(o=>o===J.UPC_A||o===J.UPC_E||o===J.EAN_13||o===J.EAN_8||o===J.CODABAR||o===J.CODE_39||o===J.CODE_93||o===J.CODE_128||o===J.ITF||o===J.RSS_14||o===J.RSS_EXPANDED);i&&!t&&r.push(new In(e,this.verbose)),n.includes(J.QR_CODE)&&r.push(new Xt),n.includes(J.DATA_MATRIX)&&r.push(new Yt),n.includes(J.AZTEC)&&r.push(new lr),n.includes(J.PDF_417)&&r.push(new Ke),i&&t&&r.push(new In(e,this.verbose))}r.length===0&&(t||r.push(new In(e,this.verbose)),r.push(new Xt),r.push(new Yt),r.push(new lr),r.push(new Ke),t&&r.push(new In(e,this.verbose))),this.readers=r}reset(){if(this.readers!==null)for(const e of this.readers)e.reset()}decodeInternal(e){if(this.readers===null)throw new xr("No readers where selected, nothing can be read.");for(const t of this.readers)try{return t.decode(e,this.hints)}catch(n){if(n instanceof xr)continue}throw new v("No MultiFormat Readers were able to detect the code.")}}class Ha extends nn{constructor(e=null,t=500){const n=new ps;n.setHints(e),super(n,t)}decodeBitmap(e){return this.reader.decodeWithState(e)}}class za extends nn{constructor(e=500){super(new Ke,e)}}class ja extends nn{constructor(e=500){super(new Xt,e)}}var ti;(function(w){w[w.ERROR_CORRECTION=0]="ERROR_CORRECTION",w[w.CHARACTER_SET=1]="CHARACTER_SET",w[w.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",w[w.MIN_SIZE=3]="MIN_SIZE",w[w.MAX_SIZE=4]="MAX_SIZE",w[w.MARGIN=5]="MARGIN",w[w.PDF417_COMPACT=6]="PDF417_COMPACT",w[w.PDF417_COMPACTION=7]="PDF417_COMPACTION",w[w.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",w[w.AZTEC_LAYERS=9]="AZTEC_LAYERS",w[w.QR_VERSION=10]="QR_VERSION"})(ti||(ti={}));var je=ti;class ni{constructor(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new at(e,Int32Array.from([1])))}buildGenerator(e){const t=this.cachedGenerators;if(e>=t.length){let n=t[t.length-1];const r=this.field;for(let i=t.length;i<=e;i++){const o=n.multiply(new at(r,Int32Array.from([1,r.exp(i-1+r.getGeneratorBase())])));t.push(o),n=o}}return t[e]}encode(e,t){if(t===0)throw new N("No error correction bytes");const n=e.length-t;if(n<=0)throw new N("No data bytes provided");const r=this.buildGenerator(t),i=new Int32Array(n);q.arraycopy(e,0,i,0,n);let o=new at(this.field,i);o=o.multiplyByMonomial(t,1);const u=o.divide(r)[1].getCoefficients(),f=t-u.length;for(let x=0;x<f;x++)e[n+x]=0;q.arraycopy(u,0,e,n+f,u.length)}}class Be{constructor(){}static applyMaskPenaltyRule1(e){return Be.applyMaskPenaltyRule1Internal(e,!0)+Be.applyMaskPenaltyRule1Internal(e,!1)}static applyMaskPenaltyRule2(e){let t=0;const n=e.getArray(),r=e.getWidth(),i=e.getHeight();for(let o=0;o<i-1;o++){const c=n[o];for(let u=0;u<r-1;u++){const f=c[u];f===c[u+1]&&f===n[o+1][u]&&f===n[o+1][u+1]&&t++}}return Be.N2*t}static applyMaskPenaltyRule3(e){let t=0;const n=e.getArray(),r=e.getWidth(),i=e.getHeight();for(let o=0;o<i;o++)for(let c=0;c<r;c++){const u=n[o];c+6<r&&u[c]===1&&u[c+1]===0&&u[c+2]===1&&u[c+3]===1&&u[c+4]===1&&u[c+5]===0&&u[c+6]===1&&(Be.isWhiteHorizontal(u,c-4,c)||Be.isWhiteHorizontal(u,c+7,c+11))&&t++,o+6<i&&n[o][c]===1&&n[o+1][c]===0&&n[o+2][c]===1&&n[o+3][c]===1&&n[o+4][c]===1&&n[o+5][c]===0&&n[o+6][c]===1&&(Be.isWhiteVertical(n,c,o-4,o)||Be.isWhiteVertical(n,c,o+7,o+11))&&t++}return t*Be.N3}static isWhiteHorizontal(e,t,n){t=Math.max(t,0),n=Math.min(n,e.length);for(let r=t;r<n;r++)if(e[r]===1)return!1;return!0}static isWhiteVertical(e,t,n,r){n=Math.max(n,0),r=Math.min(r,e.length);for(let i=n;i<r;i++)if(e[i][t]===1)return!1;return!0}static applyMaskPenaltyRule4(e){let t=0;const n=e.getArray(),r=e.getWidth(),i=e.getHeight();for(let u=0;u<i;u++){const f=n[u];for(let x=0;x<r;x++)f[x]===1&&t++}const o=e.getHeight()*e.getWidth();return Math.floor(Math.abs(t*2-o)*10/o)*Be.N4}static getDataMaskBit(e,t,n){let r,i;switch(e){case 0:r=n+t&1;break;case 1:r=n&1;break;case 2:r=t%3;break;case 3:r=(n+t)%3;break;case 4:r=Math.floor(n/2)+Math.floor(t/3)&1;break;case 5:i=n*t,r=(i&1)+i%3;break;case 6:i=n*t,r=(i&1)+i%3&1;break;case 7:i=n*t,r=i%3+(n+t&1)&1;break;default:throw new N("Invalid mask pattern: "+e)}return r===0}static applyMaskPenaltyRule1Internal(e,t){let n=0;const r=t?e.getHeight():e.getWidth(),i=t?e.getWidth():e.getHeight(),o=e.getArray();for(let c=0;c<r;c++){let u=0,f=-1;for(let x=0;x<i;x++){const p=t?o[c][x]:o[x][c];p===f?u++:(u>=5&&(n+=Be.N1+(u-5)),u=1,f=p)}u>=5&&(n+=Be.N1+(u-5))}return n}}Be.N1=3,Be.N2=3,Be.N3=40,Be.N4=10;class wr{constructor(e,t){this.width=e,this.height=t;const n=new Array(t);for(let r=0;r!==t;r++)n[r]=new Uint8Array(e);this.bytes=n}getHeight(){return this.height}getWidth(){return this.width}get(e,t){return this.bytes[t][e]}getArray(){return this.bytes}setNumber(e,t,n){this.bytes[t][e]=n}setBoolean(e,t,n){this.bytes[t][e]=n?1:0}clear(e){for(const t of this.bytes)Q.fill(t,e)}equals(e){if(!(e instanceof wr))return!1;const t=e;if(this.width!==t.width||this.height!==t.height)return!1;for(let n=0,r=this.height;n<r;++n){const i=this.bytes[n],o=t.bytes[n];for(let c=0,u=this.width;c<u;++c)if(i[c]!==o[c])return!1}return!0}toString(){const e=new Ee;for(let t=0,n=this.height;t<n;++t){const r=this.bytes[t];for(let i=0,o=this.width;i<o;++i)switch(r[i]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()}}class cn{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const e=new Ee;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()}setMode(e){this.mode=e}setECLevel(e){this.ecLevel=e}setVersion(e){this.version=e}setMaskPattern(e){this.maskPattern=e}setMatrix(e){this.matrix=e}static isValidMaskPattern(e){return e>=0&&e<cn.NUM_MASK_PATTERNS}}cn.NUM_MASK_PATTERNS=8;class ye extends C{}ye.kind="WriterException";class ${constructor(){}static clearMatrix(e){e.clear(255)}static buildMatrix(e,t,n,r,i){$.clearMatrix(i),$.embedBasicPatterns(n,i),$.embedTypeInfo(t,r,i),$.maybeEmbedVersionInfo(n,i),$.embedDataBits(e,r,i)}static embedBasicPatterns(e,t){$.embedPositionDetectionPatternsAndSeparators(t),$.embedDarkDotAtLeftBottomCorner(t),$.maybeEmbedPositionAdjustmentPatterns(e,t),$.embedTimingPatterns(t)}static embedTypeInfo(e,t,n){const r=new ne;$.makeTypeInfoBits(e,t,r);for(let i=0,o=r.getSize();i<o;++i){const c=r.get(r.getSize()-1-i),u=$.TYPE_INFO_COORDINATES[i],f=u[0],x=u[1];if(n.setBoolean(f,x,c),i<8){const p=n.getWidth()-i-1;n.setBoolean(p,8,c)}else{const E=n.getHeight()-7+(i-8);n.setBoolean(8,E,c)}}}static maybeEmbedVersionInfo(e,t){if(e.getVersionNumber()<7)return;const n=new ne;$.makeVersionInfoBits(e,n);let r=17;for(let i=0;i<6;++i)for(let o=0;o<3;++o){const c=n.get(r);r--,t.setBoolean(i,t.getHeight()-11+o,c),t.setBoolean(t.getHeight()-11+o,i,c)}}static embedDataBits(e,t,n){let r=0,i=-1,o=n.getWidth()-1,c=n.getHeight()-1;for(;o>0;){for(o===6&&(o-=1);c>=0&&c<n.getHeight();){for(let u=0;u<2;++u){const f=o-u;if(!$.isEmpty(n.get(f,c)))continue;let x;r<e.getSize()?(x=e.get(r),++r):x=!1,t!==255&&Be.getDataMaskBit(t,f,c)&&(x=!x),n.setBoolean(f,c,x)}c+=i}i=-i,c+=i,o-=2}if(r!==e.getSize())throw new ye("Not all bits consumed: "+r+"/"+e.getSize())}static findMSBSet(e){return 32-W.numberOfLeadingZeros(e)}static calculateBCHCode(e,t){if(t===0)throw new N("0 polynomial");const n=$.findMSBSet(t);for(e<<=n-1;$.findMSBSet(e)>=n;)e^=t<<$.findMSBSet(e)-n;return e}static makeTypeInfoBits(e,t,n){if(!cn.isValidMaskPattern(t))throw new ye("Invalid mask pattern");const r=e.getBits()<<3|t;n.appendBits(r,5);const i=$.calculateBCHCode(r,$.TYPE_INFO_POLY);n.appendBits(i,10);const o=new ne;if(o.appendBits($.TYPE_INFO_MASK_PATTERN,15),n.xor(o),n.getSize()!==15)throw new ye("should not happen but we got: "+n.getSize())}static makeVersionInfoBits(e,t){t.appendBits(e.getVersionNumber(),6);const n=$.calculateBCHCode(e.getVersionNumber(),$.VERSION_INFO_POLY);if(t.appendBits(n,12),t.getSize()!==18)throw new ye("should not happen but we got: "+t.getSize())}static isEmpty(e){return e===255}static embedTimingPatterns(e){for(let t=8;t<e.getWidth()-8;++t){const n=(t+1)%2;$.isEmpty(e.get(t,6))&&e.setNumber(t,6,n),$.isEmpty(e.get(6,t))&&e.setNumber(6,t,n)}}static embedDarkDotAtLeftBottomCorner(e){if(e.get(8,e.getHeight()-8)===0)throw new ye;e.setNumber(8,e.getHeight()-8,1)}static embedHorizontalSeparationPattern(e,t,n){for(let r=0;r<8;++r){if(!$.isEmpty(n.get(e+r,t)))throw new ye;n.setNumber(e+r,t,0)}}static embedVerticalSeparationPattern(e,t,n){for(let r=0;r<7;++r){if(!$.isEmpty(n.get(e,t+r)))throw new ye;n.setNumber(e,t+r,0)}}static embedPositionAdjustmentPattern(e,t,n){for(let r=0;r<5;++r){const i=$.POSITION_ADJUSTMENT_PATTERN[r];for(let o=0;o<5;++o)n.setNumber(e+o,t+r,i[o])}}static embedPositionDetectionPattern(e,t,n){for(let r=0;r<7;++r){const i=$.POSITION_DETECTION_PATTERN[r];for(let o=0;o<7;++o)n.setNumber(e+o,t+r,i[o])}}static embedPositionDetectionPatternsAndSeparators(e){const t=$.POSITION_DETECTION_PATTERN[0].length;$.embedPositionDetectionPattern(0,0,e),$.embedPositionDetectionPattern(e.getWidth()-t,0,e),$.embedPositionDetectionPattern(0,e.getWidth()-t,e);const n=8;$.embedHorizontalSeparationPattern(0,n-1,e),$.embedHorizontalSeparationPattern(e.getWidth()-n,n-1,e),$.embedHorizontalSeparationPattern(0,e.getWidth()-n,e);const r=7;$.embedVerticalSeparationPattern(r,0,e),$.embedVerticalSeparationPattern(e.getHeight()-r-1,0,e),$.embedVerticalSeparationPattern(r,e.getHeight()-r,e)}static maybeEmbedPositionAdjustmentPatterns(e,t){if(e.getVersionNumber()<2)return;const n=e.getVersionNumber()-1,r=$.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[n];for(let i=0,o=r.length;i!==o;i++){const c=r[i];if(c>=0)for(let u=0;u!==o;u++){const f=r[u];f>=0&&$.isEmpty(t.get(f,c))&&$.embedPositionAdjustmentPattern(f-2,c-2,t)}}}}$.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),$.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),$.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),$.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),$.VERSION_INFO_POLY=7973,$.TYPE_INFO_POLY=1335,$.TYPE_INFO_MASK_PATTERN=21522;class Va{constructor(e,t){this.dataBytes=e,this.errorCorrectionBytes=t}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class _e{constructor(){}static calculateMaskPenalty(e){return Be.applyMaskPenaltyRule1(e)+Be.applyMaskPenaltyRule2(e)+Be.applyMaskPenaltyRule3(e)+Be.applyMaskPenaltyRule4(e)}static encode(e,t,n=null){let r=_e.DEFAULT_BYTE_MODE_ENCODING;const i=n!==null&&n.get(je.CHARACTER_SET)!==void 0;i&&(r=n.get(je.CHARACTER_SET).toString());const o=this.chooseMode(e,r),c=new ne;if(o===K.BYTE&&(i||_e.DEFAULT_BYTE_MODE_ENCODING!==r)){const F=k.getCharacterSetECIByName(r);F!==void 0&&this.appendECI(F,c)}this.appendModeInfo(o,c);const u=new ne;this.appendBytes(e,o,u,r);let f;if(n!==null&&n.get(je.QR_VERSION)!==void 0){const F=Number.parseInt(n.get(je.QR_VERSION).toString(),10);f=Z.getVersionForNumber(F);const B=this.calculateBitsNeeded(o,c,u,f);if(!this.willFit(B,f,t))throw new ye("Data too big for requested version")}else f=this.recommendVersion(t,o,c,u);const x=new ne;x.appendBitArray(c);const p=o===K.BYTE?u.getSizeInBytes():e.length;this.appendLengthInfo(p,f,o,x),x.appendBitArray(u);const E=f.getECBlocksForLevel(t),y=f.getTotalCodewords()-E.getTotalECCodewords();this.terminateBits(y,x);const b=this.interleaveWithECBytes(x,f.getTotalCodewords(),y,E.getNumBlocks()),T=new cn;T.setECLevel(t),T.setMode(o),T.setVersion(f);const M=f.getDimensionForVersion(),R=new wr(M,M),P=this.chooseMaskPattern(b,t,f,R);return T.setMaskPattern(P),$.buildMatrix(b,t,f,P,R),T.setMatrix(R),T}static recommendVersion(e,t,n,r){const i=this.calculateBitsNeeded(t,n,r,Z.getVersionForNumber(1)),o=this.chooseVersion(i,e),c=this.calculateBitsNeeded(t,n,r,o);return this.chooseVersion(c,e)}static calculateBitsNeeded(e,t,n,r){return t.getSize()+e.getCharacterCountBits(r)+n.getSize()}static getAlphanumericCode(e){return e<_e.ALPHANUMERIC_TABLE.length?_e.ALPHANUMERIC_TABLE[e]:-1}static chooseMode(e,t=null){if(k.SJIS.getName()===t&&this.isOnlyDoubleByteKanji(e))return K.KANJI;let n=!1,r=!1;for(let i=0,o=e.length;i<o;++i){const c=e.charAt(i);if(_e.isDigit(c))n=!0;else if(this.getAlphanumericCode(c.charCodeAt(0))!==-1)r=!0;else return K.BYTE}return r?K.ALPHANUMERIC:n?K.NUMERIC:K.BYTE}static isOnlyDoubleByteKanji(e){let t;try{t=ot.encode(e,k.SJIS)}catch{return!1}const n=t.length;if(n%2!==0)return!1;for(let r=0;r<n;r+=2){const i=t[r]&255;if((i<129||i>159)&&(i<224||i>235))return!1}return!0}static chooseMaskPattern(e,t,n,r){let i=Number.MAX_SAFE_INTEGER,o=-1;for(let c=0;c<cn.NUM_MASK_PATTERNS;c++){$.buildMatrix(e,t,n,c,r);let u=this.calculateMaskPenalty(r);u<i&&(i=u,o=c)}return o}static chooseVersion(e,t){for(let n=1;n<=40;n++){const r=Z.getVersionForNumber(n);if(_e.willFit(e,r,t))return r}throw new ye("Data too big")}static willFit(e,t,n){const r=t.getTotalCodewords(),o=t.getECBlocksForLevel(n).getTotalECCodewords(),c=r-o,u=(e+7)/8;return c>=u}static terminateBits(e,t){const n=e*8;if(t.getSize()>n)throw new ye("data bits cannot fit in the QR Code"+t.getSize()+" > "+n);for(let o=0;o<4&&t.getSize()<n;++o)t.appendBit(!1);const r=t.getSize()&7;if(r>0)for(let o=r;o<8;o++)t.appendBit(!1);const i=e-t.getSizeInBytes();for(let o=0;o<i;++o)t.appendBits((o&1)===0?236:17,8);if(t.getSize()!==n)throw new ye("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(e,t,n,r,i,o){if(r>=n)throw new ye("Block ID too large");const c=e%n,u=n-c,f=Math.floor(e/n),x=f+1,p=Math.floor(t/n),E=p+1,y=f-p,b=x-E;if(y!==b)throw new ye("EC bytes mismatch");if(n!==u+c)throw new ye("RS blocks mismatch");if(e!==(p+y)*u+(E+b)*c)throw new ye("Total bytes mismatch");r<u?(i[0]=p,o[0]=y):(i[0]=E,o[0]=b)}static interleaveWithECBytes(e,t,n,r){if(e.getSizeInBytes()!==n)throw new ye("Number of bits and data bytes does not match");let i=0,o=0,c=0;const u=new Array;for(let x=0;x<r;++x){const p=new Int32Array(1),E=new Int32Array(1);_e.getNumDataBytesAndNumECBytesForBlockID(t,n,r,x,p,E);const y=p[0],b=new Uint8Array(y);e.toBytes(8*i,b,0,y);const T=_e.generateECBytes(b,E[0]);u.push(new Va(b,T)),o=Math.max(o,y),c=Math.max(c,T.length),i+=p[0]}if(n!==i)throw new ye("Data bytes does not match offset");const f=new ne;for(let x=0;x<o;++x)for(const p of u){const E=p.getDataBytes();x<E.length&&f.appendBits(E[x],8)}for(let x=0;x<c;++x)for(const p of u){const E=p.getErrorCorrectionBytes();x<E.length&&f.appendBits(E[x],8)}if(t!==f.getSizeInBytes())throw new ye("Interleaving error: "+t+" and "+f.getSizeInBytes()+" differ.");return f}static generateECBytes(e,t){const n=e.length,r=new Int32Array(n+t);for(let o=0;o<n;o++)r[o]=e[o]&255;new ni(ge.QR_CODE_FIELD_256).encode(r,t);const i=new Uint8Array(t);for(let o=0;o<t;o++)i[o]=r[n+o];return i}static appendModeInfo(e,t){t.appendBits(e.getBits(),4)}static appendLengthInfo(e,t,n,r){const i=n.getCharacterCountBits(t);if(e>=1<<i)throw new ye(e+" is bigger than "+((1<<i)-1));r.appendBits(e,i)}static appendBytes(e,t,n,r){switch(t){case K.NUMERIC:_e.appendNumericBytes(e,n);break;case K.ALPHANUMERIC:_e.appendAlphanumericBytes(e,n);break;case K.BYTE:_e.append8BitBytes(e,n,r);break;case K.KANJI:_e.appendKanjiBytes(e,n);break;default:throw new ye("Invalid mode: "+t)}}static getDigit(e){return e.charCodeAt(0)-48}static isDigit(e){const t=_e.getDigit(e);return t>=0&&t<=9}static appendNumericBytes(e,t){const n=e.length;let r=0;for(;r<n;){const i=_e.getDigit(e.charAt(r));if(r+2<n){const o=_e.getDigit(e.charAt(r+1)),c=_e.getDigit(e.charAt(r+2));t.appendBits(i*100+o*10+c,10),r+=3}else if(r+1<n){const o=_e.getDigit(e.charAt(r+1));t.appendBits(i*10+o,7),r+=2}else t.appendBits(i,4),r++}}static appendAlphanumericBytes(e,t){const n=e.length;let r=0;for(;r<n;){const i=_e.getAlphanumericCode(e.charCodeAt(r));if(i===-1)throw new ye;if(r+1<n){const o=_e.getAlphanumericCode(e.charCodeAt(r+1));if(o===-1)throw new ye;t.appendBits(i*45+o,11),r+=2}else t.appendBits(i,6),r++}}static append8BitBytes(e,t,n){let r;try{r=ot.encode(e,n)}catch(i){throw new ye(i)}for(let i=0,o=r.length;i!==o;i++){const c=r[i];t.appendBits(c,8)}}static appendKanjiBytes(e,t){let n;try{n=ot.encode(e,k.SJIS)}catch(i){throw new ye(i)}const r=n.length;for(let i=0;i<r;i+=2){const o=n[i]&255,c=n[i+1]&255,u=o<<8&4294967295|c;let f=-1;if(u>=33088&&u<=40956?f=u-33088:u>=57408&&u<=60351&&(f=u-49472),f===-1)throw new ye("Invalid byte sequence");const x=(f>>8)*192+(f&255);t.appendBits(x,13)}}static appendECI(e,t){t.appendBits(K.ECI.getBits(),4),t.appendBits(e.getValue(),8)}}_e.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),_e.DEFAULT_BYTE_MODE_ENCODING=k.UTF8.getName();class ln{write(e,t,n,r=null){if(e.length===0)throw new N("Found empty contents");if(t<0||n<0)throw new N("Requested dimensions are too small: "+t+"x"+n);let i=Te.L,o=ln.QUIET_ZONE_SIZE;r!==null&&(r.get(je.ERROR_CORRECTION)!==void 0&&(i=Te.fromString(r.get(je.ERROR_CORRECTION).toString())),r.get(je.MARGIN)!==void 0&&(o=Number.parseInt(r.get(je.MARGIN).toString(),10)));const c=_e.encode(e,i,r);return this.renderResult(c,t,n,o)}writeToDom(e,t,n,r,i=null){typeof e=="string"&&(e=document.querySelector(e));const o=this.write(t,n,r,i);e&&e.appendChild(o)}renderResult(e,t,n,r){const i=e.getMatrix();if(i===null)throw new Nt;const o=i.getWidth(),c=i.getHeight(),u=o+r*2,f=c+r*2,x=Math.max(t,u),p=Math.max(n,f),E=Math.min(Math.floor(x/u),Math.floor(p/f)),y=Math.floor((x-o*E)/2),b=Math.floor((p-c*E)/2),T=this.createSVGElement(x,p);for(let M=0,R=b;M<c;M++,R+=E)for(let P=0,F=y;P<o;P++,F+=E)if(i.get(P,M)===1){const B=this.createSvgRectElement(F,R,E,E);T.appendChild(B)}return T}createSVGElement(e,t){const n=document.createElementNS(ln.SVG_NS,"svg");return n.setAttributeNS(null,"height",e.toString()),n.setAttributeNS(null,"width",t.toString()),n}createSvgRectElement(e,t,n,r){const i=document.createElementNS(ln.SVG_NS,"rect");return i.setAttributeNS(null,"x",e.toString()),i.setAttributeNS(null,"y",t.toString()),i.setAttributeNS(null,"height",n.toString()),i.setAttributeNS(null,"width",r.toString()),i.setAttributeNS(null,"fill","#000000"),i}}ln.QUIET_ZONE_SIZE=4,ln.SVG_NS="http://www.w3.org/2000/svg";class Sn{encode(e,t,n,r,i){if(e.length===0)throw new N("Found empty contents");if(t!==J.QR_CODE)throw new N("Can only encode QR_CODE, but got "+t);if(n<0||r<0)throw new N(`Requested dimensions are too small: ${n}x${r}`);let o=Te.L,c=Sn.QUIET_ZONE_SIZE;i!==null&&(i.get(je.ERROR_CORRECTION)!==void 0&&(o=Te.fromString(i.get(je.ERROR_CORRECTION).toString())),i.get(je.MARGIN)!==void 0&&(c=Number.parseInt(i.get(je.MARGIN).toString(),10)));const u=_e.encode(e,o,i);return Sn.renderResult(u,n,r,c)}static renderResult(e,t,n,r){const i=e.getMatrix();if(i===null)throw new Nt;const o=i.getWidth(),c=i.getHeight(),u=o+r*2,f=c+r*2,x=Math.max(t,u),p=Math.max(n,f),E=Math.min(Math.floor(x/u),Math.floor(p/f)),y=Math.floor((x-o*E)/2),b=Math.floor((p-c*E)/2),T=new Ve(x,p);for(let M=0,R=b;M<c;M++,R+=E)for(let P=0,F=y;P<o;P++,F+=E)i.get(P,M)===1&&T.setRegion(F,R,E,E);return T}}Sn.QUIET_ZONE_SIZE=4;class Ga{encode(e,t,n,r,i){let o;switch(t){case J.QR_CODE:o=new Sn;break;default:throw new N("No encoder available for format "+t)}return o.encode(e,t,n,r,i)}}class Rt extends Pn{constructor(e,t,n,r,i,o,c,u){if(super(o,c),this.yuvData=e,this.dataWidth=t,this.dataHeight=n,this.left=r,this.top=i,r+o>t||i+c>n)throw new N("Crop rectangle does not fit within image data.");u&&this.reverseHorizontal(o,c)}getRow(e,t){if(e<0||e>=this.getHeight())throw new N("Requested row is outside the image: "+e);const n=this.getWidth();(t==null||t.length<n)&&(t=new Uint8ClampedArray(n));const r=(e+this.top)*this.dataWidth+this.left;return q.arraycopy(this.yuvData,r,t,0,n),t}getMatrix(){const e=this.getWidth(),t=this.getHeight();if(e===this.dataWidth&&t===this.dataHeight)return this.yuvData;const n=e*t,r=new Uint8ClampedArray(n);let i=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return q.arraycopy(this.yuvData,i,r,0,n),r;for(let o=0;o<t;o++){const c=o*e;q.arraycopy(this.yuvData,i,r,c,e),i+=this.dataWidth}return r}isCropSupported(){return!0}crop(e,t,n,r){return new Rt(this.yuvData,this.dataWidth,this.dataHeight,this.left+e,this.top+t,n,r,!1)}renderThumbnail(){const e=this.getWidth()/Rt.THUMBNAIL_SCALE_FACTOR,t=this.getHeight()/Rt.THUMBNAIL_SCALE_FACTOR,n=new Int32Array(e*t),r=this.yuvData;let i=this.top*this.dataWidth+this.left;for(let o=0;o<t;o++){const c=o*e;for(let u=0;u<e;u++){const f=r[i+u*Rt.THUMBNAIL_SCALE_FACTOR]&255;n[c+u]=4278190080|f*65793}i+=this.dataWidth*Rt.THUMBNAIL_SCALE_FACTOR}return n}getThumbnailWidth(){return this.getWidth()/Rt.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Rt.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(e,t){const n=this.yuvData;for(let r=0,i=this.top*this.dataWidth+this.left;r<t;r++,i+=this.dataWidth){const o=i+e/2;for(let c=i,u=i+e-1;c<o;c++,u--){const f=n[c];n[c]=n[u],n[u]=f}}}invert(){return new zt(this)}}Rt.THUMBNAIL_SCALE_FACTOR=2;class ri extends Pn{constructor(e,t,n,r,i,o,c){if(super(t,n),this.dataWidth=r,this.dataHeight=i,this.left=o,this.top=c,e.BYTES_PER_ELEMENT===4){const u=t*n,f=new Uint8ClampedArray(u);for(let x=0;x<u;x++){const p=e[x],E=p>>16&255,y=p>>7&510,b=p&255;f[x]=(E+y+b)/4&255}this.luminances=f}else this.luminances=e;if(r===void 0&&(this.dataWidth=t),i===void 0&&(this.dataHeight=n),o===void 0&&(this.left=0),c===void 0&&(this.top=0),this.left+t>this.dataWidth||this.top+n>this.dataHeight)throw new N("Crop rectangle does not fit within image data.")}getRow(e,t){if(e<0||e>=this.getHeight())throw new N("Requested row is outside the image: "+e);const n=this.getWidth();(t==null||t.length<n)&&(t=new Uint8ClampedArray(n));const r=(e+this.top)*this.dataWidth+this.left;return q.arraycopy(this.luminances,r,t,0,n),t}getMatrix(){const e=this.getWidth(),t=this.getHeight();if(e===this.dataWidth&&t===this.dataHeight)return this.luminances;const n=e*t,r=new Uint8ClampedArray(n);let i=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return q.arraycopy(this.luminances,i,r,0,n),r;for(let o=0;o<t;o++){const c=o*e;q.arraycopy(this.luminances,i,r,c,e),i+=this.dataWidth}return r}isCropSupported(){return!0}crop(e,t,n,r){return new ri(this.luminances,n,r,this.dataWidth,this.dataHeight,this.left+e,this.top+t)}invert(){return new zt(this)}}class As extends k{static forName(e){return this.getCharacterSetECIByName(e)}}class ii{}ii.ISO_8859_1=k.ISO8859_1;class Cs{isCompact(){return this.compact}setCompact(e){this.compact=e}getSize(){return this.size}setSize(e){this.size=e}getLayers(){return this.layers}setLayers(e){this.layers=e}getCodeWords(){return this.codeWords}setCodeWords(e){this.codeWords=e}getMatrix(){return this.matrix}setMatrix(e){this.matrix=e}}class Es{static singletonList(e){return[e]}static min(e,t){return e.sort(t)[0]}}class Wa{constructor(e){this.previous=e}getPrevious(){return this.previous}}class bn extends Wa{constructor(e,t,n){super(e),this.value=t,this.bitCount=n}appendTo(e,t){e.appendBits(this.value,this.bitCount)}add(e,t){return new bn(this,e,t)}addBinaryShift(e,t){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new bn(this,e,t)}toString(){let e=this.value&(1<<this.bitCount)-1;return e|=1<<this.bitCount,"<"+W.toBinaryString(e|1<<this.bitCount).substring(1)+">"}}class si extends bn{constructor(e,t,n){super(e,0,0),this.binaryShiftStart=t,this.binaryShiftByteCount=n}appendTo(e,t){for(let n=0;n<this.binaryShiftByteCount;n++)(n===0||n===31&&this.binaryShiftByteCount<=62)&&(e.appendBits(31,5),this.binaryShiftByteCount>62?e.appendBits(this.binaryShiftByteCount-31,16):n===0?e.appendBits(Math.min(this.binaryShiftByteCount,31),5):e.appendBits(this.binaryShiftByteCount-31,5)),e.appendBits(t[this.binaryShiftStart+n],8)}addBinaryShift(e,t){return new si(this,e,t)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Ya(w,e,t){return new si(w,e,t)}function Xn(w,e,t){return new bn(w,e,t)}const Xa=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Qt=0,pr=1,Et=2,ms=3,vt=4,Za=new bn(null,0,0),oi=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function Qa(w){for(let e of w)Q.fill(e,-1);return w[Qt][vt]=0,w[pr][vt]=0,w[pr][Qt]=28,w[ms][vt]=0,w[Et][vt]=0,w[Et][Qt]=15,w}const Is=Qa(Q.createInt32Array(6,6));class Lt{constructor(e,t,n,r){this.token=e,this.mode=t,this.binaryShiftByteCount=n,this.bitCount=r}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(e,t){let n=this.bitCount,r=this.token;if(e!==this.mode){let o=oi[this.mode][e];r=Xn(r,o&65535,o>>16),n+=o>>16}let i=e===Et?4:5;return r=Xn(r,t,i),new Lt(r,e,0,n+i)}shiftAndAppend(e,t){let n=this.token,r=this.mode===Et?4:5;return n=Xn(n,Is[this.mode][e],r),n=Xn(n,t,5),new Lt(n,this.mode,0,this.bitCount+r+5)}addBinaryShiftChar(e){let t=this.token,n=this.mode,r=this.bitCount;if(this.mode===vt||this.mode===Et){let c=oi[n][Qt];t=Xn(t,c&65535,c>>16),r+=c>>16,n=Qt}let i=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,o=new Lt(t,n,this.binaryShiftByteCount+1,r+i);return o.binaryShiftByteCount===2078&&(o=o.endBinaryShift(e+1)),o}endBinaryShift(e){if(this.binaryShiftByteCount===0)return this;let t=this.token;return t=Ya(t,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new Lt(t,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(e){let t=this.bitCount+(oi[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?t+=Lt.calculateBinaryShiftCost(e)-Lt.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(t+=10),t<=e.bitCount}toBitArray(e){let t=[];for(let r=this.endBinaryShift(e.length).token;r!==null;r=r.getPrevious())t.unshift(r);let n=new ne;for(const r of t)r.appendTo(n,e);return n}toString(){return te.format("%s bits=%d bytes=%d",Xa[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0}}Lt.INITIAL_STATE=new Lt(Za,Qt,0,0);function Ka(w){const e=te.getCharCode(" "),t=te.getCharCode("."),n=te.getCharCode(",");w[Qt][e]=1;const r=te.getCharCode("Z"),i=te.getCharCode("A");for(let E=i;E<=r;E++)w[Qt][E]=E-i+2;w[pr][e]=1;const o=te.getCharCode("z"),c=te.getCharCode("a");for(let E=c;E<=o;E++)w[pr][E]=E-c+2;w[Et][e]=1;const u=te.getCharCode("9"),f=te.getCharCode("0");for(let E=f;E<=u;E++)w[Et][E]=E-f+2;w[Et][n]=12,w[Et][t]=13;const x=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let E=0;E<x.length;E++)w[ms][te.getCharCode(x[E])]=E;const p=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let E=0;E<p.length;E++)te.getCharCode(p[E])>0&&(w[vt][te.getCharCode(p[E])]=E);return w}const ai=Ka(Q.createInt32Array(5,256));class Zn{constructor(e){this.text=e}encode(){const e=te.getCharCode(" "),t=te.getCharCode(`
`);let n=Es.singletonList(Lt.INITIAL_STATE);for(let i=0;i<this.text.length;i++){let o,c=i+1<this.text.length?this.text[i+1]:0;switch(this.text[i]){case te.getCharCode("\r"):o=c===t?2:0;break;case te.getCharCode("."):o=c===e?3:0;break;case te.getCharCode(","):o=c===e?4:0;break;case te.getCharCode(":"):o=c===e?5:0;break;default:o=0}o>0?(n=Zn.updateStateListForPair(n,i,o),i++):n=this.updateStateListForChar(n,i)}return Es.min(n,(i,o)=>i.getBitCount()-o.getBitCount()).toBitArray(this.text)}updateStateListForChar(e,t){const n=[];for(let r of e)this.updateStateForChar(r,t,n);return Zn.simplifyStates(n)}updateStateForChar(e,t,n){let r=this.text[t]&255,i=ai[e.getMode()][r]>0,o=null;for(let c=0;c<=vt;c++){let u=ai[c][r];if(u>0){if(o==null&&(o=e.endBinaryShift(t)),!i||c===e.getMode()||c===Et){const f=o.latchAndAppend(c,u);n.push(f)}if(!i&&Is[e.getMode()][c]>=0){const f=o.shiftAndAppend(c,u);n.push(f)}}}if(e.getBinaryShiftByteCount()>0||ai[e.getMode()][r]===0){let c=e.addBinaryShiftChar(t);n.push(c)}}static updateStateListForPair(e,t,n){const r=[];for(let i of e)this.updateStateForPair(i,t,n,r);return this.simplifyStates(r)}static updateStateForPair(e,t,n,r){let i=e.endBinaryShift(t);if(r.push(i.latchAndAppend(vt,n)),e.getMode()!==vt&&r.push(i.shiftAndAppend(vt,n)),n===3||n===4){let o=i.latchAndAppend(Et,16-n).latchAndAppend(Et,1);r.push(o)}if(e.getBinaryShiftByteCount()>0){let o=e.addBinaryShiftChar(t).addBinaryShiftChar(t+1);r.push(o)}}static simplifyStates(e){let t=[];for(const n of e){let r=!0;for(const i of t){if(i.isBetterThanOrEqualTo(n)){r=!1;break}n.isBetterThanOrEqualTo(i)&&(t=t.filter(o=>o!==i))}r&&t.push(n)}return t}}class he{constructor(){}static encodeBytes(e){return he.encode(e,he.DEFAULT_EC_PERCENT,he.DEFAULT_AZTEC_LAYERS)}static encode(e,t,n){let r=new Zn(e).encode(),i=W.truncDivision(r.getSize()*t,100)+11,o=r.getSize()+i,c,u,f,x,p;if(n!==he.DEFAULT_AZTEC_LAYERS){if(c=n<0,u=Math.abs(n),u>(c?he.MAX_NB_BITS_COMPACT:he.MAX_NB_BITS))throw new N(te.format("Illegal value %s for layers",n));f=he.totalBitsInLayer(u,c),x=he.WORD_SIZE[u];let B=f-f%x;if(p=he.stuffBits(r,x),p.getSize()+i>B)throw new N("Data to large for user specified layer");if(c&&p.getSize()>x*64)throw new N("Data to large for user specified layer")}else{x=0,p=null;for(let B=0;;B++){if(B>he.MAX_NB_BITS)throw new N("Data too large for an Aztec code");if(c=B<=3,u=c?B+1:B,f=he.totalBitsInLayer(u,c),o>f)continue;(p==null||x!==he.WORD_SIZE[u])&&(x=he.WORD_SIZE[u],p=he.stuffBits(r,x));let ce=f-f%x;if(!(c&&p.getSize()>x*64)&&p.getSize()+i<=ce)break}}let E=he.generateCheckWords(p,f,x),y=p.getSize()/x,b=he.generateModeMessage(c,u,y),T=(c?11:14)+u*4,M=new Int32Array(T),R;if(c){R=T;for(let B=0;B<M.length;B++)M[B]=B}else{R=T+1+2*W.truncDivision(W.truncDivision(T,2)-1,15);let B=W.truncDivision(T,2),ce=W.truncDivision(R,2);for(let re=0;re<B;re++){let ft=re+W.truncDivision(re,15);M[B-re-1]=ce-ft-1,M[B+re]=ce+ft+1}}let P=new Ve(R);for(let B=0,ce=0;B<u;B++){let re=(u-B)*4+(c?9:12);for(let ft=0;ft<re;ft++){let St=ft*2;for(let ht=0;ht<2;ht++)E.get(ce+St+ht)&&P.set(M[B*2+ht],M[B*2+ft]),E.get(ce+re*2+St+ht)&&P.set(M[B*2+ft],M[T-1-B*2-ht]),E.get(ce+re*4+St+ht)&&P.set(M[T-1-B*2-ht],M[T-1-B*2-ft]),E.get(ce+re*6+St+ht)&&P.set(M[T-1-B*2-ft],M[B*2+ht])}ce+=re*8}if(he.drawModeMessage(P,c,R,b),c)he.drawBullsEye(P,W.truncDivision(R,2),5);else{he.drawBullsEye(P,W.truncDivision(R,2),7);for(let B=0,ce=0;B<W.truncDivision(T,2)-1;B+=15,ce+=16)for(let re=W.truncDivision(R,2)&1;re<R;re+=2)P.set(W.truncDivision(R,2)-ce,re),P.set(W.truncDivision(R,2)+ce,re),P.set(re,W.truncDivision(R,2)-ce),P.set(re,W.truncDivision(R,2)+ce)}let F=new Cs;return F.setCompact(c),F.setSize(R),F.setLayers(u),F.setCodeWords(y),F.setMatrix(P),F}static drawBullsEye(e,t,n){for(let r=0;r<n;r+=2)for(let i=t-r;i<=t+r;i++)e.set(i,t-r),e.set(i,t+r),e.set(t-r,i),e.set(t+r,i);e.set(t-n,t-n),e.set(t-n+1,t-n),e.set(t-n,t-n+1),e.set(t+n,t-n),e.set(t+n,t-n+1),e.set(t+n,t+n-1)}static generateModeMessage(e,t,n){let r=new ne;return e?(r.appendBits(t-1,2),r.appendBits(n-1,6),r=he.generateCheckWords(r,28,4)):(r.appendBits(t-1,5),r.appendBits(n-1,11),r=he.generateCheckWords(r,40,4)),r}static drawModeMessage(e,t,n,r){let i=W.truncDivision(n,2);if(t)for(let o=0;o<7;o++){let c=i-3+o;r.get(o)&&e.set(c,i-5),r.get(o+7)&&e.set(i+5,c),r.get(20-o)&&e.set(c,i+5),r.get(27-o)&&e.set(i-5,c)}else for(let o=0;o<10;o++){let c=i-5+o+W.truncDivision(o,5);r.get(o)&&e.set(c,i-7),r.get(o+10)&&e.set(i+7,c),r.get(29-o)&&e.set(c,i+7),r.get(39-o)&&e.set(i-7,c)}}static generateCheckWords(e,t,n){let r=e.getSize()/n,i=new ni(he.getGF(n)),o=W.truncDivision(t,n),c=he.bitsToWords(e,n,o);i.encode(c,o-r);let u=t%n,f=new ne;f.appendBits(0,u);for(const x of Array.from(c))f.appendBits(x,n);return f}static bitsToWords(e,t,n){let r=new Int32Array(n),i,o;for(i=0,o=e.getSize()/t;i<o;i++){let c=0;for(let u=0;u<t;u++)c|=e.get(i*t+u)?1<<t-u-1:0;r[i]=c}return r}static getGF(e){switch(e){case 4:return ge.AZTEC_PARAM;case 6:return ge.AZTEC_DATA_6;case 8:return ge.AZTEC_DATA_8;case 10:return ge.AZTEC_DATA_10;case 12:return ge.AZTEC_DATA_12;default:throw new N("Unsupported word size "+e)}}static stuffBits(e,t){let n=new ne,r=e.getSize(),i=(1<<t)-2;for(let o=0;o<r;o+=t){let c=0;for(let u=0;u<t;u++)(o+u>=r||e.get(o+u))&&(c|=1<<t-1-u);(c&i)===i?(n.appendBits(c&i,t),o--):(c&i)===0?(n.appendBits(c|1,t),o--):n.appendBits(c,t)}return n}static totalBitsInLayer(e,t){return((t?88:112)+16*e)*e}}he.DEFAULT_EC_PERCENT=33,he.DEFAULT_AZTEC_LAYERS=0,he.MAX_NB_BITS=32,he.MAX_NB_BITS_COMPACT=4,he.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Ar{encode(e,t,n,r){return this.encodeWithHints(e,t,n,r,null)}encodeWithHints(e,t,n,r,i){let o=ii.ISO_8859_1,c=he.DEFAULT_EC_PERCENT,u=he.DEFAULT_AZTEC_LAYERS;return i!=null&&(i.has(je.CHARACTER_SET)&&(o=As.forName(i.get(je.CHARACTER_SET).toString())),i.has(je.ERROR_CORRECTION)&&(c=W.parseInt(i.get(je.ERROR_CORRECTION).toString())),i.has(je.AZTEC_LAYERS)&&(u=W.parseInt(i.get(je.AZTEC_LAYERS).toString()))),Ar.encodeLayers(e,t,n,r,o,c,u)}static encodeLayers(e,t,n,r,i,o,c){if(t!==J.AZTEC)throw new N("Can only encode AZTEC, but got "+t);let u=he.encode(te.getBytes(e,i),o,c);return Ar.renderResult(u,n,r)}static renderResult(e,t,n){let r=e.getMatrix();if(r==null)throw new Nt;let i=r.getWidth(),o=r.getHeight(),c=Math.max(t,i),u=Math.max(n,o),f=Math.min(c/i,u/o),x=(c-i*f)/2,p=(u-o*f)/2,E=new Ve(c,u);for(let y=0,b=p;y<o;y++,b+=f)for(let T=0,M=x;T<i;T++,M+=f)r.get(T,y)&&E.setRegion(M,b,f,f);return E}}l.AbstractExpandedDecoder=Yr,l.ArgumentException=_,l.ArithmeticException=or,l.AztecCode=Cs,l.AztecCodeReader=lr,l.AztecCodeWriter=Ar,l.AztecDecoder=be,l.AztecDetector=ss,l.AztecDetectorResult=rs,l.AztecEncoder=he,l.AztecHighLevelEncoder=Zn,l.AztecPoint=rt,l.BarcodeFormat=J,l.Binarizer=Ae,l.BinaryBitmap=z,l.BitArray=ne,l.BitMatrix=Ve,l.BitSource=Kr,l.BrowserAztecCodeReader=Ia,l.BrowserBarcodeReader=_a,l.BrowserCodeReader=nn,l.BrowserDatamatrixCodeReader=Ma,l.BrowserMultiFormatReader=Ha,l.BrowserPDF417Reader=za,l.BrowserQRCodeReader=ja,l.BrowserQRCodeSvgWriter=ln,l.CharacterSetECI=k,l.ChecksumException=Y,l.Code128Reader=H,l.Code39Reader=He,l.DataMatrixDecodedBitStreamParser=Wt,l.DataMatrixReader=Yt,l.DecodeHintType=ue,l.DecoderResult=Fn,l.DefaultGridSampler=is,l.DetectorResult=cr,l.EAN13Reader=rn,l.EncodeHintType=je,l.Exception=C,l.FormatException=U,l.GenericGF=ge,l.GenericGFPoly=at,l.GlobalHistogramBinarizer=Ge,l.GridSampler=jr,l.GridSamplerInstance=Vt,l.HTMLCanvasElementLuminanceSource=jt,l.HybridBinarizer=se,l.ITFReader=Ie,l.IllegalArgumentException=N,l.IllegalStateException=Nt,l.InvertedLuminanceSource=zt,l.LuminanceSource=Pn,l.MathUtils=fe,l.MultiFormatOneDReader=In,l.MultiFormatReader=ps,l.MultiFormatWriter=Ga,l.NotFoundException=v,l.OneDReader=ke,l.PDF417DecodedBitStreamParser=D,l.PDF417DecoderErrorCorrection=fs,l.PDF417Reader=Ke,l.PDF417ResultMetadata=ds,l.PerspectiveTransform=It,l.PlanarYUVLuminanceSource=Rt,l.QRCodeByteMatrix=wr,l.QRCodeDataMask=At,l.QRCodeDecodedBitStreamParser=De,l.QRCodeDecoderErrorCorrectionLevel=Te,l.QRCodeDecoderFormatInformation=$e,l.QRCodeEncoder=_e,l.QRCodeEncoderQRCode=cn,l.QRCodeMaskUtil=Be,l.QRCodeMatrixUtil=$,l.QRCodeMode=K,l.QRCodeReader=Xt,l.QRCodeVersion=Z,l.QRCodeWriter=Sn,l.RGBLuminanceSource=ri,l.RSS14Reader=Le,l.RSSExpandedReader=L,l.ReaderException=xr,l.ReedSolomonDecoder=Un,l.ReedSolomonEncoder=ni,l.ReedSolomonException=An,l.Result=nt,l.ResultMetadataType=We,l.ResultPoint=X,l.StringUtils=te,l.UnsupportedOperationException=Ht,l.VideoInputDevice=ns,l.WhiteRectangleDetector=Ft,l.WriterException=ye,l.ZXingArrays=Q,l.ZXingCharset=As,l.ZXingInteger=W,l.ZXingStandardCharsets=ii,l.ZXingStringBuilder=Ee,l.ZXingStringEncoding=ot,l.ZXingSystem=q,l.createAbstractExpandedDecoder=ls,Object.defineProperty(l,"__esModule",{value:!0})})}($n,$n.exports)),$n.exports}var Ne=E1();const m1=A1(Ne),I1=nc({__proto__:null,default:m1},[Ne]);var Ys=function(){function s(a,l,h){if(this.formatMap=new Map([[G.QR_CODE,Ne.BarcodeFormat.QR_CODE],[G.AZTEC,Ne.BarcodeFormat.AZTEC],[G.CODABAR,Ne.BarcodeFormat.CODABAR],[G.CODE_39,Ne.BarcodeFormat.CODE_39],[G.CODE_93,Ne.BarcodeFormat.CODE_93],[G.CODE_128,Ne.BarcodeFormat.CODE_128],[G.DATA_MATRIX,Ne.BarcodeFormat.DATA_MATRIX],[G.MAXICODE,Ne.BarcodeFormat.MAXICODE],[G.ITF,Ne.BarcodeFormat.ITF],[G.EAN_13,Ne.BarcodeFormat.EAN_13],[G.EAN_8,Ne.BarcodeFormat.EAN_8],[G.PDF_417,Ne.BarcodeFormat.PDF_417],[G.RSS_14,Ne.BarcodeFormat.RSS_14],[G.RSS_EXPANDED,Ne.BarcodeFormat.RSS_EXPANDED],[G.UPC_A,Ne.BarcodeFormat.UPC_A],[G.UPC_E,Ne.BarcodeFormat.UPC_E],[G.UPC_EAN_EXTENSION,Ne.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!I1)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=l,this.logger=h;var g=this.createZXingFormats(a),d=new Map;d.set(Ne.DecodeHintType.POSSIBLE_FORMATS,g),d.set(Ne.DecodeHintType.TRY_HARDER,!1),this.hints=d}return s.prototype.decodeAsync=function(a){var l=this;return new Promise(function(h,g){try{h(l.decode(a))}catch(d){g(d)}})},s.prototype.decode=function(a){var l=new Ne.MultiFormatReader(this.verbose,this.hints),h=new Ne.HTMLCanvasElementLuminanceSource(a),g=new Ne.BinaryBitmap(new Ne.HybridBinarizer(h)),d=l.decode(g);return{text:d.text,format:xa.create(this.toHtml5QrcodeSupportedFormats(d.format)),debugData:this.createDebugData()}},s.prototype.createReverseFormatMap=function(){var a=new Map;return this.formatMap.forEach(function(l,h,g){a.set(l,h)}),a},s.prototype.toHtml5QrcodeSupportedFormats=function(a){if(!this.reverseFormatMap.has(a))throw"reverseFormatMap doesn't have ".concat(a);return this.reverseFormatMap.get(a)},s.prototype.createZXingFormats=function(a){for(var l=[],h=0,g=a;h<g.length;h++){var d=g[h];this.formatMap.has(d)?l.push(this.formatMap.get(d)):this.logger.logError("".concat(d," is not supported by")+"ZXingHtml5QrcodeShim")}return l},s.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},s}(),y1=function(s,a,l,h){function g(d){return d instanceof l?d:new l(function(A){A(d)})}return new(l||(l=Promise))(function(d,A){function m(_){try{C(h.next(_))}catch(N){A(N)}}function S(_){try{C(h.throw(_))}catch(N){A(N)}}function C(_){_.done?d(_.value):g(_.value).then(m,S)}C((h=h.apply(s,a||[])).next())})},S1=function(s,a){var l={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},h,g,d,A;return A={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(A[Symbol.iterator]=function(){return this}),A;function m(C){return function(_){return S([C,_])}}function S(C){if(h)throw new TypeError("Generator is already executing.");for(;A&&(A=0,C[0]&&(l=0)),l;)try{if(h=1,g&&(d=C[0]&2?g.return:C[0]?g.throw||((d=g.return)&&d.call(g),0):g.next)&&!(d=d.call(g,C[1])).done)return d;switch(g=0,d&&(C=[C[0]&2,d.value]),C[0]){case 0:case 1:d=C;break;case 4:return l.label++,{value:C[1],done:!1};case 5:l.label++,g=C[1],C=[0];continue;case 7:C=l.ops.pop(),l.trys.pop();continue;default:if(d=l.trys,!(d=d.length>0&&d[d.length-1])&&(C[0]===6||C[0]===2)){l=0;continue}if(C[0]===3&&(!d||C[1]>d[0]&&C[1]<d[3])){l.label=C[1];break}if(C[0]===6&&l.label<d[1]){l.label=d[1],d=C;break}if(d&&l.label<d[2]){l.label=d[2],l.ops.push(C);break}d[2]&&l.ops.pop(),l.trys.pop();continue}C=a.call(s,l)}catch(_){C=[6,_],g=0}finally{h=d=0}if(C[0]&5)throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}},Xs=function(){function s(a,l,h){if(this.formatMap=new Map([[G.QR_CODE,"qr_code"],[G.AZTEC,"aztec"],[G.CODABAR,"codabar"],[G.CODE_39,"code_39"],[G.CODE_93,"code_93"],[G.CODE_128,"code_128"],[G.DATA_MATRIX,"data_matrix"],[G.ITF,"itf"],[G.EAN_13,"ean_13"],[G.EAN_8,"ean_8"],[G.PDF_417,"pdf417"],[G.UPC_A,"upc_a"],[G.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!s.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=l,this.logger=h;var g=this.createBarcodeDetectorFormats(a);if(this.detector=new BarcodeDetector(g),!this.detector)throw"BarcodeDetector detector not supported"}return s.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var a=new BarcodeDetector({formats:["qr_code"]});return typeof a<"u"},s.prototype.decodeAsync=function(a){return y1(this,void 0,void 0,function(){var l,h;return S1(this,function(g){switch(g.label){case 0:return[4,this.detector.detect(a)];case 1:if(l=g.sent(),!l||l.length===0)throw"No barcode or QR code detected.";return h=this.selectLargestBarcode(l),[2,{text:h.rawValue,format:xa.create(this.toHtml5QrcodeSupportedFormats(h.format)),debugData:this.createDebugData()}]}})})},s.prototype.selectLargestBarcode=function(a){for(var l=null,h=0,g=0,d=a;g<d.length;g++){var A=d[g],m=A.boundingBox.width*A.boundingBox.height;m>h&&(h=m,l=A)}if(!l)throw"No largest barcode found";return l},s.prototype.createBarcodeDetectorFormats=function(a){for(var l=[],h=0,g=a;h<g.length;h++){var d=g[h];this.formatMap.has(d)?l.push(this.formatMap.get(d)):this.logger.warn("".concat(d," is not supported by")+"BarcodeDetectorDelegate")}return{formats:l}},s.prototype.toHtml5QrcodeSupportedFormats=function(a){if(!this.reverseFormatMap.has(a))throw"reverseFormatMap doesn't have ".concat(a);return this.reverseFormatMap.get(a)},s.prototype.createReverseFormatMap=function(){var a=new Map;return this.formatMap.forEach(function(l,h,g){a.set(l,h)}),a},s.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},s}(),Zs=function(s,a,l,h){function g(d){return d instanceof l?d:new l(function(A){A(d)})}return new(l||(l=Promise))(function(d,A){function m(_){try{C(h.next(_))}catch(N){A(N)}}function S(_){try{C(h.throw(_))}catch(N){A(N)}}function C(_){_.done?d(_.value):g(_.value).then(m,S)}C((h=h.apply(s,a||[])).next())})},Qs=function(s,a){var l={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},h,g,d,A;return A={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(A[Symbol.iterator]=function(){return this}),A;function m(C){return function(_){return S([C,_])}}function S(C){if(h)throw new TypeError("Generator is already executing.");for(;A&&(A=0,C[0]&&(l=0)),l;)try{if(h=1,g&&(d=C[0]&2?g.return:C[0]?g.throw||((d=g.return)&&d.call(g),0):g.next)&&!(d=d.call(g,C[1])).done)return d;switch(g=0,d&&(C=[C[0]&2,d.value]),C[0]){case 0:case 1:d=C;break;case 4:return l.label++,{value:C[1],done:!1};case 5:l.label++,g=C[1],C=[0];continue;case 7:C=l.ops.pop(),l.trys.pop();continue;default:if(d=l.trys,!(d=d.length>0&&d[d.length-1])&&(C[0]===6||C[0]===2)){l=0;continue}if(C[0]===3&&(!d||C[1]>d[0]&&C[1]<d[3])){l.label=C[1];break}if(C[0]===6&&l.label<d[1]){l.label=d[1],d=C;break}if(d&&l.label<d[2]){l.label=d[2],l.ops.push(C);break}d[2]&&l.ops.pop(),l.trys.pop();continue}C=a.call(s,l)}catch(_){C=[6,_],g=0}finally{h=d=0}if(C[0]&5)throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}},b1=function(){function s(a,l,h,g){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=h,l&&Xs.isSupported()?(this.primaryDecoder=new Xs(a,h,g),this.secondaryDecoder=new Ys(a,h,g)):this.primaryDecoder=new Ys(a,h,g)}return s.prototype.decodeAsync=function(a){return Zs(this,void 0,void 0,function(){var l;return Qs(this,function(h){switch(h.label){case 0:l=performance.now(),h.label=1;case 1:return h.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(a)];case 2:return[2,h.sent()];case 3:return this.possiblyLogPerformance(l),[7];case 4:return[2]}})})},s.prototype.decodeRobustlyAsync=function(a){return Zs(this,void 0,void 0,function(){var l,h;return Qs(this,function(g){switch(g.label){case 0:l=performance.now(),g.label=1;case 1:return g.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(a)];case 2:return[2,g.sent()];case 3:if(h=g.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(a)];throw h;case 4:return this.possiblyLogPerformance(l),[7];case 5:return[2]}})})},s.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},s.prototype.possiblyLogPerformance=function(a){if(this.verbose){var l=performance.now()-a;this.executionResults.push(l),this.executions++,this.possiblyFlushPerformanceReport()}},s.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var a=0,l=0,h=this.executionResults;l<h.length;l++){var g=h[l];a+=g}var d=a/this.executionResults.length;console.log("".concat(d," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},s}(),$i=function(){var s=function(a,l){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,g){h.__proto__=g}||function(h,g){for(var d in g)Object.prototype.hasOwnProperty.call(g,d)&&(h[d]=g[d])},s(a,l)};return function(a,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");s(a,l);function h(){this.constructor=a}a.prototype=l===null?Object.create(l):(h.prototype=l.prototype,new h)}}(),Dr=function(s,a,l,h){function g(d){return d instanceof l?d:new l(function(A){A(d)})}return new(l||(l=Promise))(function(d,A){function m(_){try{C(h.next(_))}catch(N){A(N)}}function S(_){try{C(h.throw(_))}catch(N){A(N)}}function C(_){_.done?d(_.value):g(_.value).then(m,S)}C((h=h.apply(s,a||[])).next())})},Rr=function(s,a){var l={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},h,g,d,A;return A={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(A[Symbol.iterator]=function(){return this}),A;function m(C){return function(_){return S([C,_])}}function S(C){if(h)throw new TypeError("Generator is already executing.");for(;A&&(A=0,C[0]&&(l=0)),l;)try{if(h=1,g&&(d=C[0]&2?g.return:C[0]?g.throw||((d=g.return)&&d.call(g),0):g.next)&&!(d=d.call(g,C[1])).done)return d;switch(g=0,d&&(C=[C[0]&2,d.value]),C[0]){case 0:case 1:d=C;break;case 4:return l.label++,{value:C[1],done:!1};case 5:l.label++,g=C[1],C=[0];continue;case 7:C=l.ops.pop(),l.trys.pop();continue;default:if(d=l.trys,!(d=d.length>0&&d[d.length-1])&&(C[0]===6||C[0]===2)){l=0;continue}if(C[0]===3&&(!d||C[1]>d[0]&&C[1]<d[3])){l.label=C[1];break}if(C[0]===6&&l.label<d[1]){l.label=d[1],d=C;break}if(d&&l.label<d[2]){l.label=d[2],l.ops.push(C);break}d[2]&&l.ops.pop(),l.trys.pop();continue}C=a.call(s,l)}catch(_){C=[6,_],g=0}finally{h=d=0}if(C[0]&5)throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}},Ca=function(){function s(a,l){this.name=a,this.track=l}return s.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},s.prototype.apply=function(a){var l={};l[this.name]=a;var h={advanced:[l]};return this.track.applyConstraints(h)},s.prototype.value=function(){var a=this.track.getSettings();if(this.name in a){var l=a[this.name];return l}return null},s}(),T1=function(s){$i(a,s);function a(l,h){return s.call(this,l,h)||this}return a.prototype.min=function(){return this.getCapabilities().min},a.prototype.max=function(){return this.getCapabilities().max},a.prototype.step=function(){return this.getCapabilities().step},a.prototype.apply=function(l){var h={};h[this.name]=l;var g={advanced:[h]};return this.track.applyConstraints(g)},a.prototype.getCapabilities=function(){this.failIfNotSupported();var l=this.track.getCapabilities(),h=l[this.name];return{min:h.min,max:h.max,step:h.step}},a.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},a}(Ca),_1=function(s){$i(a,s);function a(l){return s.call(this,"zoom",l)||this}return a}(T1),N1=function(s){$i(a,s);function a(l){return s.call(this,"torch",l)||this}return a}(Ca),M1=function(){function s(a){this.track=a}return s.prototype.zoomFeature=function(){return new _1(this.track)},s.prototype.torchFeature=function(){return new N1(this.track)},s}(),O1=function(){function s(a,l,h){this.isClosed=!1,this.parentElement=a,this.mediaStream=l,this.callbacks=h,this.surface=this.createVideoElement(this.parentElement.clientWidth),a.append(this.surface)}return s.prototype.createVideoElement=function(a){var l=document.createElement("video");return l.style.width="".concat(a,"px"),l.style.display="block",l.muted=!0,l.setAttribute("muted","true"),l.playsInline=!0,l},s.prototype.setupSurface=function(){var a=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var l=function(){var h=a.surface.clientWidth,g=a.surface.clientHeight;a.callbacks.onRenderSurfaceReady(h,g),a.surface.removeEventListener("playing",l)};this.surface.addEventListener("playing",l),this.surface.srcObject=this.mediaStream,this.surface.play()},s.create=function(a,l,h,g){return Dr(this,void 0,void 0,function(){var d,A;return Rr(this,function(m){switch(m.label){case 0:return d=new s(a,l,g),h.aspectRatio?(A={aspectRatio:h.aspectRatio},[4,d.getFirstTrackOrFail().applyConstraints(A)]):[3,2];case 1:m.sent(),m.label=2;case 2:return d.setupSurface(),[2,d]}})})},s.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},s.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},s.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},s.prototype.resume=function(a){this.failIfClosed();var l=this,h=function(){setTimeout(a,200),l.surface.removeEventListener("playing",h)};this.surface.addEventListener("playing",h),this.surface.play()},s.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},s.prototype.getSurface=function(){return this.failIfClosed(),this.surface},s.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},s.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},s.prototype.applyVideoConstraints=function(a){return Dr(this,void 0,void 0,function(){return Rr(this,function(l){if("aspectRatio"in a)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(a)]})})},s.prototype.close=function(){if(this.isClosed)return Promise.resolve();var a=this;return new Promise(function(l,h){var g=a.mediaStream.getVideoTracks(),d=g.length,A=0;a.mediaStream.getVideoTracks().forEach(function(m){a.mediaStream.removeTrack(m),m.stop(),++A,A>=d&&(a.isClosed=!0,a.parentElement.removeChild(a.surface),l())})})},s.prototype.getCapabilities=function(){return new M1(this.getFirstTrackOrFail())},s}(),D1=function(){function s(a){this.mediaStream=a}return s.prototype.render=function(a,l,h){return Dr(this,void 0,void 0,function(){return Rr(this,function(g){return[2,O1.create(a,this.mediaStream,l,h)]})})},s.create=function(a){return Dr(this,void 0,void 0,function(){var l,h;return Rr(this,function(g){switch(g.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return l={audio:!1,video:a},[4,navigator.mediaDevices.getUserMedia(l)];case 1:return h=g.sent(),[2,new s(h)]}})})},s}(),Ks=function(s,a,l,h){function g(d){return d instanceof l?d:new l(function(A){A(d)})}return new(l||(l=Promise))(function(d,A){function m(_){try{C(h.next(_))}catch(N){A(N)}}function S(_){try{C(h.throw(_))}catch(N){A(N)}}function C(_){_.done?d(_.value):g(_.value).then(m,S)}C((h=h.apply(s,a||[])).next())})},qs=function(s,a){var l={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},h,g,d,A;return A={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(A[Symbol.iterator]=function(){return this}),A;function m(C){return function(_){return S([C,_])}}function S(C){if(h)throw new TypeError("Generator is already executing.");for(;A&&(A=0,C[0]&&(l=0)),l;)try{if(h=1,g&&(d=C[0]&2?g.return:C[0]?g.throw||((d=g.return)&&d.call(g),0):g.next)&&!(d=d.call(g,C[1])).done)return d;switch(g=0,d&&(C=[C[0]&2,d.value]),C[0]){case 0:case 1:d=C;break;case 4:return l.label++,{value:C[1],done:!1};case 5:l.label++,g=C[1],C=[0];continue;case 7:C=l.ops.pop(),l.trys.pop();continue;default:if(d=l.trys,!(d=d.length>0&&d[d.length-1])&&(C[0]===6||C[0]===2)){l=0;continue}if(C[0]===3&&(!d||C[1]>d[0]&&C[1]<d[3])){l.label=C[1];break}if(C[0]===6&&l.label<d[1]){l.label=d[1],d=C;break}if(d&&l.label<d[2]){l.label=d[2],l.ops.push(C);break}d[2]&&l.ops.pop(),l.trys.pop();continue}C=a.call(s,l)}catch(_){C=[6,_],g=0}finally{h=d=0}if(C[0]&5)throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}},R1=function(){function s(){}return s.failIfNotSupported=function(){return Ks(this,void 0,void 0,function(){return qs(this,function(a){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new s]})})},s.prototype.create=function(a){return Ks(this,void 0,void 0,function(){return qs(this,function(l){return[2,D1.create(a)]})})},s}(),v1=function(s,a,l,h){function g(d){return d instanceof l?d:new l(function(A){A(d)})}return new(l||(l=Promise))(function(d,A){function m(_){try{C(h.next(_))}catch(N){A(N)}}function S(_){try{C(h.throw(_))}catch(N){A(N)}}function C(_){_.done?d(_.value):g(_.value).then(m,S)}C((h=h.apply(s,a||[])).next())})},L1=function(s,a){var l={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},h,g,d,A;return A={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(A[Symbol.iterator]=function(){return this}),A;function m(C){return function(_){return S([C,_])}}function S(C){if(h)throw new TypeError("Generator is already executing.");for(;A&&(A=0,C[0]&&(l=0)),l;)try{if(h=1,g&&(d=C[0]&2?g.return:C[0]?g.throw||((d=g.return)&&d.call(g),0):g.next)&&!(d=d.call(g,C[1])).done)return d;switch(g=0,d&&(C=[C[0]&2,d.value]),C[0]){case 0:case 1:d=C;break;case 4:return l.label++,{value:C[1],done:!1};case 5:l.label++,g=C[1],C=[0];continue;case 7:C=l.ops.pop(),l.trys.pop();continue;default:if(d=l.trys,!(d=d.length>0&&d[d.length-1])&&(C[0]===6||C[0]===2)){l=0;continue}if(C[0]===3&&(!d||C[1]>d[0]&&C[1]<d[3])){l.label=C[1];break}if(C[0]===6&&l.label<d[1]){l.label=d[1],d=C;break}if(d&&l.label<d[2]){l.label=d[2],l.ops.push(C);break}d[2]&&l.ops.pop(),l.trys.pop();continue}C=a.call(s,l)}catch(_){C=[6,_],g=0}finally{h=d=0}if(C[0]&5)throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}},B1=function(){function s(){}return s.retrieve=function(){if(navigator.mediaDevices)return s.getCamerasFromMediaDevices();var a=MediaStreamTrack;return MediaStreamTrack&&a.getSources?s.getCamerasFromMediaStreamTrack():s.rejectWithError()},s.rejectWithError=function(){var a=Nn.unableToQuerySupportedDevices();return s.isHttpsOrLocalhost()||(a=Nn.insecureContextCameraQueryError()),Promise.reject(a)},s.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var a=location.host.split(":")[0];return a==="127.0.0.1"||a==="localhost"},s.getCamerasFromMediaDevices=function(){return v1(this,void 0,void 0,function(){var a,l,h,g,d,A,m;return L1(this,function(S){switch(S.label){case 0:return a=function(C){for(var _=C.getVideoTracks(),N=0,z=_;N<z.length;N++){var Y=z[N];Y.enabled=!1,Y.stop(),C.removeTrack(Y)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return l=S.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(h=S.sent(),g=[],d=0,A=h;d<A.length;d++)m=A[d],m.kind==="videoinput"&&g.push({id:m.deviceId,label:m.label});return a(l),[2,g]}})})},s.getCamerasFromMediaStreamTrack=function(){return new Promise(function(a,l){var h=function(d){for(var A=[],m=0,S=d;m<S.length;m++){var C=S[m];C.kind==="video"&&A.push({id:C.id,label:C.label})}a(A)},g=MediaStreamTrack;g.getSources(h)})},s}(),Pe;(function(s){s[s.UNKNOWN=0]="UNKNOWN",s[s.NOT_STARTED=1]="NOT_STARTED",s[s.SCANNING=2]="SCANNING",s[s.PAUSED=3]="PAUSED"})(Pe||(Pe={}));var P1=function(){function s(){this.state=Pe.NOT_STARTED,this.onGoingTransactionNewState=Pe.UNKNOWN}return s.prototype.directTransition=function(a){this.failIfTransitionOngoing(),this.validateTransition(a),this.state=a},s.prototype.startTransition=function(a){return this.failIfTransitionOngoing(),this.validateTransition(a),this.onGoingTransactionNewState=a,this},s.prototype.execute=function(){if(this.onGoingTransactionNewState===Pe.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var a=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Pe.UNKNOWN,this.directTransition(a)},s.prototype.cancel=function(){if(this.onGoingTransactionNewState===Pe.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Pe.UNKNOWN},s.prototype.getState=function(){return this.state},s.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Pe.UNKNOWN)throw"Cannot transition to a new state, already under transition"},s.prototype.validateTransition=function(a){switch(this.state){case Pe.UNKNOWN:throw"Transition from unknown is not allowed";case Pe.NOT_STARTED:this.failIfNewStateIs(a,[Pe.PAUSED]);break;case Pe.SCANNING:break;case Pe.PAUSED:break}},s.prototype.failIfNewStateIs=function(a,l){for(var h=0,g=l;h<g.length;h++){var d=g[h];if(a===d)throw"Cannot transition from ".concat(this.state," to ").concat(a)}},s}(),F1=function(){function s(a){this.stateManager=a}return s.prototype.startTransition=function(a){return this.stateManager.startTransition(a)},s.prototype.directTransition=function(a){this.stateManager.directTransition(a)},s.prototype.getState=function(){return this.stateManager.getState()},s.prototype.canScanFile=function(){return this.stateManager.getState()===Pe.NOT_STARTED},s.prototype.isScanning=function(){return this.stateManager.getState()!==Pe.NOT_STARTED},s.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Pe.SCANNING},s.prototype.isPaused=function(){return this.stateManager.getState()===Pe.PAUSED},s}(),k1=function(){function s(){}return s.create=function(){return new F1(new P1)},s}(),U1=function(){var s=function(a,l){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,g){h.__proto__=g}||function(h,g){for(var d in g)Object.prototype.hasOwnProperty.call(g,d)&&(h[d]=g[d])},s(a,l)};return function(a,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");s(a,l);function h(){this.constructor=a}a.prototype=l===null?Object.create(l):(h.prototype=l.prototype,new h)}}(),gt=function(s){U1(a,s);function a(){return s!==null&&s.apply(this,arguments)||this}return a.DEFAULT_WIDTH=300,a.DEFAULT_WIDTH_OFFSET=2,a.FILE_SCAN_MIN_HEIGHT=300,a.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,a.MIN_QR_BOX_SIZE=50,a.SHADED_LEFT=1,a.SHADED_RIGHT=2,a.SHADED_TOP=3,a.SHADED_BOTTOM=4,a.SHADED_REGION_ELEMENT_ID="qr-shaded-region",a.VERBOSE=!1,a.BORDER_SHADER_DEFAULT_COLOR="#ffffff",a.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",a}(bt),H1=function(){function s(a,l){this.logger=l,this.fps=gt.SCAN_DEFAULT_FPS,a?(a.fps&&(this.fps=a.fps),this.disableFlip=a.disableFlip===!0,this.qrbox=a.qrbox,this.aspectRatio=a.aspectRatio,this.videoConstraints=a.videoConstraints):this.disableFlip=gt.DEFAULT_DISABLE_FLIP}return s.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?Aa.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},s.prototype.isShadedBoxEnabled=function(){return!Bt(this.qrbox)},s.create=function(a,l){return new s(a,l)},s}(),Js=function(){function s(a,l){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(a))throw"HTML Element with id=".concat(a," not found");this.elementId=a,this.verbose=!1;var h;typeof l=="boolean"?this.verbose=l===!0:l&&(h=l,this.verbose=h.verbose===!0,h.experimentalFeatures),this.logger=new pa(this.verbose),this.qrcode=new b1(this.getSupportedFormats(l),this.getUseBarCodeDetectorIfSupported(h),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=k1.create()}return s.prototype.start=function(a,l,h,g){var d=this;if(!a)throw"cameraIdOrConfig is required";if(!h||typeof h!="function")throw"qrCodeSuccessCallback is required and should be a function.";var A;g?A=g:A=this.verbose?this.logger.log:function(){};var m=H1.create(l,this.logger);this.clearElement();var S=!1;m.videoConstraints&&(m.isMediaStreamConstraintsValid()?S=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var C=S,_=document.getElementById(this.elementId);_.clientWidth?_.clientWidth:gt.DEFAULT_WIDTH,_.style.position="relative",this.shouldScan=!0,this.element=_;var N=this,z=this.stateManagerProxy.startTransition(Pe.SCANNING);return new Promise(function(Y,Ae){var q=C?m.videoConstraints:N.createVideoConstraints(a);if(!q){z.cancel(),Ae("videoConstraints should be defined");return}var j={};(!C||m.aspectRatio)&&(j.aspectRatio=m.aspectRatio);var ie={onRenderSurfaceReady:function(Q,W){N.setupUi(Q,W,m),N.isScanning=!0,N.foreverScan(m,h,A)}};R1.failIfNotSupported().then(function(Q){Q.create(q).then(function(W){return W.render(d.element,j,ie).then(function(ne){N.renderedCamera=ne,z.execute(),Y(null)}).catch(function(ne){z.cancel(),Ae(ne)})}).catch(function(W){z.cancel(),Ae(Nn.errorGettingUserMedia(W))})}).catch(function(Q){z.cancel(),Ae(Nn.cameraStreamingNotSupported())})})},s.prototype.pause=function(a){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Pe.PAUSED),this.showPausedState(),(Bt(a)||a!==!0)&&(a=!1),a&&this.renderedCamera&&this.renderedCamera.pause()},s.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var a=this,l=function(){a.stateManagerProxy.directTransition(Pe.SCANNING),a.hidePausedState()};if(!this.renderedCamera.isPaused()){l();return}this.renderedCamera.resume(function(){l()})},s.prototype.getState=function(){return this.stateManagerProxy.getState()},s.prototype.stop=function(){var a=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var l=this.stateManagerProxy.startTransition(Pe.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var h=function(){if(a.element){var d=document.getElementById(gt.SHADED_REGION_ELEMENT_ID);d&&a.element.removeChild(d)}},g=this;return this.renderedCamera.close().then(function(){return g.renderedCamera=null,g.element&&(g.element.removeChild(g.canvasElement),g.canvasElement=null),h(),g.qrRegion&&(g.qrRegion=null),g.context&&(g.context=null),l.execute(),g.hidePausedState(),g.isScanning=!1,Promise.resolve()})},s.prototype.scanFile=function(a,l){return this.scanFileV2(a,l).then(function(h){return h.decodedText})},s.prototype.scanFileV2=function(a,l){var h=this;if(!a||!(a instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Bt(l)&&(l=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(g,d){h.possiblyCloseLastScanImageFile(),h.clearElement(),h.lastScanImageFile=URL.createObjectURL(a);var A=new Image;A.onload=function(){var m=A.width,S=A.height,C=document.getElementById(h.elementId),_=C.clientWidth?C.clientWidth:gt.DEFAULT_WIDTH,N=Math.max(C.clientHeight?C.clientHeight:S,gt.FILE_SCAN_MIN_HEIGHT),z=h.computeCanvasDrawConfig(m,S,_,N);if(l){var Y=h.createCanvasElement(_,N,"qr-canvas-visible");Y.style.display="inline-block",C.appendChild(Y);var Ae=Y.getContext("2d");if(!Ae)throw"Unable to get 2d context from canvas";Ae.canvas.width=_,Ae.canvas.height=N,Ae.drawImage(A,0,0,m,S,z.x,z.y,z.width,z.height)}var q=gt.FILE_SCAN_HIDDEN_CANVAS_PADDING,j=Math.max(A.width,z.width),ie=Math.max(A.height,z.height),Q=j+2*q,W=ie+2*q,ne=h.createCanvasElement(Q,W);C.appendChild(ne);var et=ne.getContext("2d");if(!et)throw"Unable to get 2d context from canvas";et.canvas.width=Q,et.canvas.height=W,et.drawImage(A,0,0,m,S,q,q,j,ie);try{h.qrcode.decodeRobustlyAsync(ne).then(function(ue){g(Vs.createFromQrcodeResult(ue))}).catch(d)}catch(ue){d("QR code parse error, error = ".concat(ue))}},A.onerror=d,A.onabort=d,A.onstalled=d,A.onsuspend=d,A.src=URL.createObjectURL(a)})},s.prototype.clear=function(){this.clearElement()},s.getCameras=function(){return B1.retrieve()},s.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},s.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},s.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},s.prototype.applyVideoConstraints=function(a){if(a){if(!Aa.isMediaStreamConstraintsValid(a,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(a)},s.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},s.prototype.getSupportedFormats=function(a){var l=[G.QR_CODE,G.AZTEC,G.CODABAR,G.CODE_39,G.CODE_93,G.CODE_128,G.DATA_MATRIX,G.MAXICODE,G.ITF,G.EAN_13,G.EAN_8,G.PDF_417,G.RSS_14,G.RSS_EXPANDED,G.UPC_A,G.UPC_E,G.UPC_EAN_EXTENSION];if(!a||typeof a=="boolean"||!a.formatsToSupport)return l;if(!Array.isArray(a.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(a.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var h=[],g=0,d=a.formatsToSupport;g<d.length;g++){var A=d[g];w1(A)?h.push(A):this.logger.warn("Invalid format: ".concat(A," passed in config, ignoring."))}if(h.length===0)throw"None of formatsToSupport match supported values.";return h},s.prototype.getUseBarCodeDetectorIfSupported=function(a){if(Bt(a))return!0;if(!Bt(a.useBarCodeDetectorIfSupported))return a.useBarCodeDetectorIfSupported!==!1;if(Bt(a.experimentalFeatures))return!0;var l=a.experimentalFeatures;return Bt(l.useBarCodeDetectorIfSupported)?!0:l.useBarCodeDetectorIfSupported!==!1},s.prototype.validateQrboxSize=function(a,l,h){var g=this,d=h.qrbox;this.validateQrboxConfig(d);var A=this.toQrdimensions(a,l,d),m=function(C){if(C<gt.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(gt.MIN_QR_BOX_SIZE,"px.")},S=function(C){return C>a&&(g.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),C=a),C};m(A.width),m(A.height),A.width=S(A.width)},s.prototype.validateQrboxConfig=function(a){if(typeof a!="number"&&typeof a!="function"&&(a.width===void 0||a.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},s.prototype.toQrdimensions=function(a,l,h){if(typeof h=="number")return{width:h,height:h};if(typeof h=="function")try{return h(a,l)}catch(g){throw new Error("qrbox config was passed as a function but it failed with unknown error"+g)}return h},s.prototype.setupUi=function(a,l,h){h.isShadedBoxEnabled()&&this.validateQrboxSize(a,l,h);var g=Bt(h.qrbox)?{width:a,height:l}:h.qrbox;this.validateQrboxConfig(g);var d=this.toQrdimensions(a,l,g);d.height>l&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var A=h.isShadedBoxEnabled()&&d.height<=l,m={x:0,y:0,width:a,height:l},S=A?this.getShadedRegionBounds(a,l,d):m,C=this.createCanvasElement(S.width,S.height),_={willReadFrequently:!0},N=C.getContext("2d",_);N.canvas.width=S.width,N.canvas.height=S.height,this.element.append(C),A&&this.possiblyInsertShadingElement(this.element,a,l,d),this.createScannerPausedUiElement(this.element),this.qrRegion=S,this.context=N,this.canvasElement=C},s.prototype.createScannerPausedUiElement=function(a){var l=document.createElement("div");l.innerText=Nn.scannerPaused(),l.style.display="none",l.style.position="absolute",l.style.top="0px",l.style.zIndex="1",l.style.background="rgba(9, 9, 9, 0.46)",l.style.color="#FFECEC",l.style.textAlign="center",l.style.width="100%",a.appendChild(l),this.scannerPausedUiElement=l},s.prototype.scanContext=function(a,l){var h=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(g){return a(g.text,Vs.createFromQrcodeResult(g)),h.possiblyUpdateShaders(!0),!0}).catch(function(g){h.possiblyUpdateShaders(!1);var d=Nn.codeParseError(g);return l(d,wa.createFrom(d)),!1})},s.prototype.foreverScan=function(a,l,h){var g=this;if(this.shouldScan&&this.renderedCamera){var d=this.renderedCamera.getSurface(),A=d.videoWidth/d.clientWidth,m=d.videoHeight/d.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var S=this.qrRegion.width*A,C=this.qrRegion.height*m,_=this.qrRegion.x*A,N=this.qrRegion.y*m;this.context.drawImage(d,_,N,S,C,0,0,this.qrRegion.width,this.qrRegion.height);var z=function(){g.foreverScanTimeout=setTimeout(function(){g.foreverScan(a,l,h)},g.getTimeoutFps(a.fps))};this.scanContext(l,h).then(function(Y){!Y&&a.disableFlip!==!0?(g.context.translate(g.context.canvas.width,0),g.context.scale(-1,1),g.scanContext(l,h).finally(function(){z()})):z()}).catch(function(Y){g.logger.logError("Error happend while scanning context",Y),z()})}},s.prototype.createVideoConstraints=function(a){if(typeof a=="string")return{deviceId:{exact:a}};if(typeof a=="object"){var l="facingMode",h="deviceId",g={user:!0,environment:!0},d="exact",A=function(Ae){if(Ae in g)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(Ae,"'")},m=Object.keys(a);if(m.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(m.length," keys");var S=Object.keys(a)[0];if(S!==l&&S!==h)throw"Only '".concat(l,"' and '").concat(h,"' ")+" are supported for 'cameraIdOrConfig'";if(S===l){var C=a.facingMode;if(typeof C=="string"){if(A(C))return{facingMode:C}}else if(typeof C=="object")if(d in C){if(A(C["".concat(d)]))return{facingMode:{exact:C["".concat(d)]}}}else throw"'facingMode' should be string or object with"+" ".concat(d," as key.");else{var _=typeof C;throw"Invalid type of 'facingMode' = ".concat(_)}}else{var N=a.deviceId;if(typeof N=="string")return{deviceId:N};if(typeof N=="object"){if(d in N)return{deviceId:{exact:N["".concat(d)]}};throw"'deviceId' should be string or object with"+" ".concat(d," as key.")}else{var z=typeof N;throw"Invalid type of 'deviceId' = ".concat(z)}}}var Y=typeof a;throw"Invalid type of 'cameraIdOrConfig' = ".concat(Y)},s.prototype.computeCanvasDrawConfig=function(a,l,h,g){if(a<=h&&l<=g){var d=(h-a)/2,A=(g-l)/2;return{x:d,y:A,width:a,height:l}}else{var m=a,S=l;return a>h&&(l=h/a*l,a=h),l>g&&(a=g/l*a,l=g),this.logger.log("Image downsampled from "+"".concat(m,"X").concat(S)+" to ".concat(a,"X").concat(l,".")),this.computeCanvasDrawConfig(a,l,h,g)}},s.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var a=document.getElementById(this.elementId);a&&(a.innerHTML="")},s.prototype.possiblyUpdateShaders=function(a){this.qrMatch!==a&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(l){l.style.backgroundColor=a?gt.BORDER_SHADER_MATCH_COLOR:gt.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=a)},s.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},s.prototype.createCanvasElement=function(a,l,h){var g=a,d=l,A=document.createElement("canvas");return A.style.width="".concat(g,"px"),A.style.height="".concat(d,"px"),A.style.display="none",A.id=Bt(h)?"qr-canvas":h,A},s.prototype.getShadedRegionBounds=function(a,l,h){if(h.width>a||h.height>l)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(a-h.width)/2,y:(l-h.height)/2,width:h.width,height:h.height}},s.prototype.possiblyInsertShadingElement=function(a,l,h,g){if(!(l-g.width<1||h-g.height<1)){var d=document.createElement("div");d.style.position="absolute";var A=(l-g.width)/2,m=(h-g.height)/2;if(d.style.borderLeft="".concat(A,"px solid rgba(0, 0, 0, 0.48)"),d.style.borderRight="".concat(A,"px solid rgba(0, 0, 0, 0.48)"),d.style.borderTop="".concat(m,"px solid rgba(0, 0, 0, 0.48)"),d.style.borderBottom="".concat(m,"px solid rgba(0, 0, 0, 0.48)"),d.style.boxSizing="border-box",d.style.top="0px",d.style.bottom="0px",d.style.left="0px",d.style.right="0px",d.id="".concat(gt.SHADED_REGION_ELEMENT_ID),l-g.width<11||h-g.height<11)this.hasBorderShaders=!1;else{var S=5,C=40;this.insertShaderBorders(d,C,S,-S,null,0,!0),this.insertShaderBorders(d,C,S,-S,null,0,!1),this.insertShaderBorders(d,C,S,null,-S,0,!0),this.insertShaderBorders(d,C,S,null,-S,0,!1),this.insertShaderBorders(d,S,C+S,-S,null,-S,!0),this.insertShaderBorders(d,S,C+S,null,-S,-S,!0),this.insertShaderBorders(d,S,C+S,-S,null,-S,!1),this.insertShaderBorders(d,S,C+S,null,-S,-S,!1),this.hasBorderShaders=!0}a.append(d)}},s.prototype.insertShaderBorders=function(a,l,h,g,d,A,m){var S=document.createElement("div");S.style.position="absolute",S.style.backgroundColor=gt.BORDER_SHADER_DEFAULT_COLOR,S.style.width="".concat(l,"px"),S.style.height="".concat(h,"px"),g!==null&&(S.style.top="".concat(g,"px")),d!==null&&(S.style.bottom="".concat(d,"px")),m?S.style.left="".concat(A,"px"):S.style.right="".concat(A,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(S),a.appendChild(S)},s.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},s.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},s.prototype.getTimeoutFps=function(a){return 1e3/a},s}(),es="data:image/svg+xml;base64,",z1=es+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",j1=es+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",$s=es+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",V1="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",eo=function(){function s(){}return s.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},s}(),G1=function(){function s(){this.data=eo.createDefault();var a=localStorage.getItem(s.LOCAL_STORAGE_KEY);a?this.data=JSON.parse(a):this.reset()}return s.prototype.hasCameraPermissions=function(){return this.data.hasPermission},s.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},s.prototype.setHasPermission=function(a){this.data.hasPermission=a,this.flush()},s.prototype.setLastUsedCameraId=function(a){this.data.lastUsedCameraId=a,this.flush()},s.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},s.prototype.reset=function(){this.data=eo.createDefault(),this.flush()},s.prototype.flush=function(){localStorage.setItem(s.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},s.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",s}(),W1=function(){function s(){this.infoDiv=document.createElement("div")}return s.prototype.renderInto=function(a){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=Gs.poweredBy();var l=document.createElement("a");l.innerText="ScanApp",l.href="https://scanapp.org",l.target="new",l.style.color="white",this.infoDiv.appendChild(l);var h=document.createElement("br"),g=document.createElement("br");this.infoDiv.appendChild(h),this.infoDiv.appendChild(g);var d=document.createElement("a");d.innerText=Gs.reportIssues(),d.href="https://github.com/mebjas/html5-qrcode/issues",d.target="new",d.style.color="white",this.infoDiv.appendChild(d),a.appendChild(this.infoDiv)},s.prototype.show=function(){this.infoDiv.style.display="block"},s.prototype.hide=function(){this.infoDiv.style.display="none"},s}(),Y1=function(){function s(a,l){this.isShowingInfoIcon=!0,this.onTapIn=a,this.onTapOut=l,this.infoIcon=document.createElement("img")}return s.prototype.renderInto=function(a){var l=this;this.infoIcon.alt="Info icon",this.infoIcon.src=$s,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(h){return l.onHoverIn()},this.infoIcon.onmouseout=function(h){return l.onHoverOut()},this.infoIcon.onclick=function(h){return l.onClick()},a.appendChild(this.infoIcon)},s.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},s.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},s.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=V1,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=$s,this.infoIcon.style.opacity="0.6")},s}(),X1=function(){function s(){var a=this;this.infoDiv=new W1,this.infoIcon=new Y1(function(){a.infoDiv.show()},function(){a.infoDiv.hide()})}return s.prototype.renderInto=function(a){this.infoDiv.renderInto(a),this.infoIcon.renderInto(a)},s}(),Z1=function(s,a,l,h){function g(d){return d instanceof l?d:new l(function(A){A(d)})}return new(l||(l=Promise))(function(d,A){function m(_){try{C(h.next(_))}catch(N){A(N)}}function S(_){try{C(h.throw(_))}catch(N){A(N)}}function C(_){_.done?d(_.value):g(_.value).then(m,S)}C((h=h.apply(s,a||[])).next())})},Q1=function(s,a){var l={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},h,g,d,A;return A={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(A[Symbol.iterator]=function(){return this}),A;function m(C){return function(_){return S([C,_])}}function S(C){if(h)throw new TypeError("Generator is already executing.");for(;A&&(A=0,C[0]&&(l=0)),l;)try{if(h=1,g&&(d=C[0]&2?g.return:C[0]?g.throw||((d=g.return)&&d.call(g),0):g.next)&&!(d=d.call(g,C[1])).done)return d;switch(g=0,d&&(C=[C[0]&2,d.value]),C[0]){case 0:case 1:d=C;break;case 4:return l.label++,{value:C[1],done:!1};case 5:l.label++,g=C[1],C=[0];continue;case 7:C=l.ops.pop(),l.trys.pop();continue;default:if(d=l.trys,!(d=d.length>0&&d[d.length-1])&&(C[0]===6||C[0]===2)){l=0;continue}if(C[0]===3&&(!d||C[1]>d[0]&&C[1]<d[3])){l.label=C[1];break}if(C[0]===6&&l.label<d[1]){l.label=d[1],d=C;break}if(d&&l.label<d[2]){l.label=d[2],l.ops.push(C);break}d[2]&&l.ops.pop(),l.trys.pop();continue}C=a.call(s,l)}catch(_){C=[6,_],g=0}finally{h=d=0}if(C[0]&5)throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}},to=function(){function s(){}return s.hasPermissions=function(){return Z1(this,void 0,void 0,function(){var a,l,h,g;return Q1(this,function(d){switch(d.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(a=d.sent(),l=0,h=a;l<h.length;l++)if(g=h[l],g.kind==="videoinput"&&g.label)return[2,!0];return[2,!1]}})})},s}(),qt=function(){function s(a){this.supportedScanTypes=this.validateAndReturnScanTypes(a)}return s.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},s.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},s.prototype.isCameraScanRequired=function(){for(var a=0,l=this.supportedScanTypes;a<l.length;a++){var h=l[a];if(s.isCameraScanType(h))return!0}return!1},s.isCameraScanType=function(a){return a===en.SCAN_TYPE_CAMERA},s.isFileScanType=function(a){return a===en.SCAN_TYPE_FILE},s.prototype.validateAndReturnScanTypes=function(a){if(!a||a.length===0)return bt.DEFAULT_SUPPORTED_SCAN_TYPE;var l=bt.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(a.length>l)throw"Max ".concat(l," values expected for ")+"supportedScanTypes";for(var h=0,g=a;h<g.length;h++){var d=g[h];if(!bt.DEFAULT_SUPPORTED_SCAN_TYPE.includes(d))throw"Unsupported scan type ".concat(d)}return a},s}(),wt=function(){function s(){}return s.ALL_ELEMENT_CLASS="html5-qrcode-element",s.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",s.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",s.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",s.TORCH_BUTTON_ID="html5-qrcode-button-torch",s.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",s.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",s.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",s.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",s.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",s.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",s}(),kt=function(){function s(){}return s.createElement=function(a,l){var h=document.createElement(a);return h.id=l,h.classList.add(wt.ALL_ELEMENT_CLASS),a==="button"&&h.setAttribute("type","button"),h},s}(),Ea=function(s,a,l,h){function g(d){return d instanceof l?d:new l(function(A){A(d)})}return new(l||(l=Promise))(function(d,A){function m(_){try{C(h.next(_))}catch(N){A(N)}}function S(_){try{C(h.throw(_))}catch(N){A(N)}}function C(_){_.done?d(_.value):g(_.value).then(m,S)}C((h=h.apply(s,a||[])).next())})},ma=function(s,a){var l={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},h,g,d,A;return A={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(A[Symbol.iterator]=function(){return this}),A;function m(C){return function(_){return S([C,_])}}function S(C){if(h)throw new TypeError("Generator is already executing.");for(;A&&(A=0,C[0]&&(l=0)),l;)try{if(h=1,g&&(d=C[0]&2?g.return:C[0]?g.throw||((d=g.return)&&d.call(g),0):g.next)&&!(d=d.call(g,C[1])).done)return d;switch(g=0,d&&(C=[C[0]&2,d.value]),C[0]){case 0:case 1:d=C;break;case 4:return l.label++,{value:C[1],done:!1};case 5:l.label++,g=C[1],C=[0];continue;case 7:C=l.ops.pop(),l.trys.pop();continue;default:if(d=l.trys,!(d=d.length>0&&d[d.length-1])&&(C[0]===6||C[0]===2)){l=0;continue}if(C[0]===3&&(!d||C[1]>d[0]&&C[1]<d[3])){l.label=C[1];break}if(C[0]===6&&l.label<d[1]){l.label=d[1],d=C;break}if(d&&l.label<d[2]){l.label=d[2],l.ops.push(C);break}d[2]&&l.ops.pop(),l.trys.pop();continue}C=a.call(s,l)}catch(_){C=[6,_],g=0}finally{h=d=0}if(C[0]&5)throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}},no=function(){function s(a,l,h){this.isTorchOn=!1,this.torchCapability=a,this.buttonController=l,this.onTorchActionFailureCallback=h}return s.prototype.isTorchEnabled=function(){return this.isTorchOn},s.prototype.flipState=function(){return Ea(this,void 0,void 0,function(){var a,l;return ma(this,function(h){switch(h.label){case 0:this.buttonController.disable(),a=!this.isTorchOn,h.label=1;case 1:return h.trys.push([1,3,,4]),[4,this.torchCapability.apply(a)];case 2:return h.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),a),[3,4];case 3:return l=h.sent(),this.propagateFailure(a,l),this.buttonController.enable(),[3,4];case 4:return[2]}})})},s.prototype.updateUiBasedOnLatestSettings=function(a,l){a===l?(this.buttonController.setText(l?Ce.torchOffButton():Ce.torchOnButton()),this.isTorchOn=l):this.propagateFailure(l),this.buttonController.enable()},s.prototype.propagateFailure=function(a,l){var h=a?Ce.torchOnFailedMessage():Ce.torchOffFailedMessage();l&&(h+="; Error = "+l),this.onTorchActionFailureCallback(h)},s.prototype.reset=function(){this.isTorchOn=!1},s}(),K1=function(){function s(a,l){this.onTorchActionFailureCallback=l,this.torchButton=kt.createElement("button",wt.TORCH_BUTTON_ID),this.torchController=new no(a,this,l)}return s.prototype.render=function(a,l){var h=this;this.torchButton.innerText=Ce.torchOnButton(),this.torchButton.style.display=l.display,this.torchButton.style.marginLeft=l.marginLeft;var g=this;this.torchButton.addEventListener("click",function(d){return Ea(h,void 0,void 0,function(){return ma(this,function(A){switch(A.label){case 0:return[4,g.torchController.flipState()];case 1:return A.sent(),g.torchController.isTorchEnabled()?(g.torchButton.classList.remove(wt.TORCH_BUTTON_CLASS_TORCH_OFF),g.torchButton.classList.add(wt.TORCH_BUTTON_CLASS_TORCH_ON)):(g.torchButton.classList.remove(wt.TORCH_BUTTON_CLASS_TORCH_ON),g.torchButton.classList.add(wt.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),a.appendChild(this.torchButton)},s.prototype.updateTorchCapability=function(a){this.torchController=new no(a,this,this.onTorchActionFailureCallback)},s.prototype.getTorchButton=function(){return this.torchButton},s.prototype.hide=function(){this.torchButton.style.display="none"},s.prototype.show=function(){this.torchButton.style.display="inline-block"},s.prototype.disable=function(){this.torchButton.disabled=!0},s.prototype.enable=function(){this.torchButton.disabled=!1},s.prototype.setText=function(a){this.torchButton.innerText=a},s.prototype.reset=function(){this.torchButton.innerText=Ce.torchOnButton(),this.torchController.reset()},s.create=function(a,l,h,g){var d=new s(l,g);return d.render(a,h),d},s}(),q1=function(){function s(a,l,h){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=l?"block":"none",a.appendChild(this.fileBasedScanRegion);var g=document.createElement("label");g.setAttribute("for",this.getFileScanInputId()),g.style.display="inline-block",this.fileBasedScanRegion.appendChild(g),this.fileSelectionButton=kt.createElement("button",wt.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(m){g.click()}),g.append(this.fileSelectionButton),this.fileScanInput=kt.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",g.appendChild(this.fileScanInput);var d=this;this.fileScanInput.addEventListener("change",function(m){if(!(m==null||m.target==null)){var S=m.target;if(!(S.files&&S.files.length===0)){var C=S.files,_=C[0],N=_.name;d.setImageNameToButton(N),h(_)}}});var A=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(A),this.fileBasedScanRegion.addEventListener("dragenter",function(m){d.fileBasedScanRegion.style.border=d.fileBasedScanRegionActiveBorder(),m.stopPropagation(),m.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(m){d.fileBasedScanRegion.style.border=d.fileBasedScanRegionDefaultBorder(),m.stopPropagation(),m.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(m){d.fileBasedScanRegion.style.border=d.fileBasedScanRegionActiveBorder(),m.stopPropagation(),m.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(m){m.stopPropagation(),m.preventDefault(),d.fileBasedScanRegion.style.border=d.fileBasedScanRegionDefaultBorder();var S=m.dataTransfer;if(S){var C=S.files;if(!C||C.length===0)return;for(var _=!1,N=0;N<C.length;++N){var z=C.item(N);if(z){var Y=/image.*/;if(z.type.match(Y)){_=!0;var Ae=z.name;d.setImageNameToButton(Ae),h(z),A.innerText=Ce.dragAndDropMessage();break}}}_||(A.innerText=Ce.dragAndDropMessageOnlyImages())}})}return s.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},s.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},s.prototype.isShowing=function(){return this.fileBasedScanRegion.style.display==="block"},s.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},s.prototype.createFileBasedScanRegion=function(){var a=document.createElement("div");return a.style.textAlign="center",a.style.margin="auto",a.style.width="80%",a.style.maxWidth="600px",a.style.border=this.fileBasedScanRegionDefaultBorder(),a.style.padding="10px",a.style.marginBottom="10px",a},s.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},s.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},s.prototype.createDragAndDropMessage=function(){var a=document.createElement("div");return a.innerText=Ce.dragAndDropMessage(),a.style.fontWeight="400",a},s.prototype.setImageNameToButton=function(a){var l=20;if(a.length>l){var h=a.substring(0,8),g=a.length,d=a.substring(g-8,g);a="".concat(h,"....").concat(d)}var A=Ce.fileSelectionChooseAnother()+" - "+a;this.fileSelectionButton.innerText=A},s.prototype.setInitialValueToButton=function(){var a=Ce.fileSelectionChooseImage()+" - "+Ce.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=a},s.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},s.create=function(a,l,h){var g=new s(a,l,h);return g},s}(),J1=function(){function s(a){this.selectElement=kt.createElement("select",wt.CAMERA_SELECTION_SELECT_ID),this.cameras=a,this.options=[]}return s.prototype.render=function(a){var l=document.createElement("span");l.style.marginRight="10px";var h=this.cameras.length;if(h===0)throw new Error("No cameras found");if(h===1)l.style.display="none";else{var g=Ce.selectCamera();l.innerText="".concat(g," (").concat(this.cameras.length,")  ")}for(var d=1,A=0,m=this.cameras;A<m.length;A++){var S=m[A],C=S.id,_=S.label==null?C:S.label;(!_||_==="")&&(_=[Ce.anonymousCameraPrefix(),d++].join(" "));var N=document.createElement("option");N.value=C,N.innerText=_,this.options.push(N),this.selectElement.appendChild(N)}l.appendChild(this.selectElement),a.appendChild(l)},s.prototype.disable=function(){this.selectElement.disabled=!0},s.prototype.isDisabled=function(){return this.selectElement.disabled===!0},s.prototype.enable=function(){this.selectElement.disabled=!1},s.prototype.getValue=function(){return this.selectElement.value},s.prototype.hasValue=function(a){for(var l=0,h=this.options;l<h.length;l++){var g=h[l];if(g.value===a)return!0}return!1},s.prototype.setValue=function(a){if(!this.hasValue(a))throw new Error("".concat(a," is not present in the camera list."));this.selectElement.value=a},s.prototype.hasSingleItem=function(){return this.cameras.length===1},s.prototype.numCameras=function(){return this.cameras.length},s.create=function(a,l){var h=new s(l);return h.render(a),h},s}(),$1=function(){function s(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=kt.createElement("input",wt.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return s.prototype.render=function(a,l){this.zoomElementContainer.style.display=l?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",a.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var h=Ce.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(h),this.rangeText.style.marginRight="10px";var g=this;this.rangeInput.addEventListener("input",function(){return g.onValueChange()}),this.rangeInput.addEventListener("change",function(){return g.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},s.prototype.onValueChange=function(){var a=Ce.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(a),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},s.prototype.setValues=function(a,l,h,g){this.rangeInput.min=a.toString(),this.rangeInput.max=l.toString(),this.rangeInput.step=g.toString(),this.rangeInput.value=h.toString(),this.onValueChange()},s.prototype.show=function(){this.zoomElementContainer.style.display="block"},s.prototype.hide=function(){this.zoomElementContainer.style.display="none"},s.prototype.setOnCameraZoomValueChangeCallback=function(a){this.onChangeCallback=a},s.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},s.create=function(a,l){var h=new s;return h.render(a,l),h},s}(),xt;(function(s){s[s.STATUS_DEFAULT=0]="STATUS_DEFAULT",s[s.STATUS_SUCCESS=1]="STATUS_SUCCESS",s[s.STATUS_WARNING=2]="STATUS_WARNING",s[s.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(xt||(xt={}));function e0(s){return{fps:s.fps,qrbox:s.qrbox,aspectRatio:s.aspectRatio,disableFlip:s.disableFlip,videoConstraints:s.videoConstraints}}function t0(s,a){return{formatsToSupport:s.formatsToSupport,useBarCodeDetectorIfSupported:s.useBarCodeDetectorIfSupported,experimentalFeatures:s.experimentalFeatures,verbose:a}}var n0=function(){function s(a,l,h){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=a,this.config=this.createConfig(l),this.verbose=h===!0,!document.getElementById(a))throw"HTML Element with id=".concat(a," not found");this.scanTypeSelector=new qt(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new pa(this.verbose),this.persistedDataManager=new G1,l.rememberLastUsedCamera!==!0&&this.persistedDataManager.reset()}return s.prototype.render=function(a,l){var h=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(d,A){if(a)a(d,A);else{if(h.lastMatchFound===d)return;h.lastMatchFound=d,h.setHeaderMessage(Ce.lastMatch(d),xt.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(d,A){l&&l(d,A)};var g=document.getElementById(this.elementId);if(!g)throw"HTML Element with id=".concat(this.elementId," not found");g.innerHTML="",this.createBasicLayout(g),this.html5Qrcode=new Js(this.getScanRegionId(),t0(this.config,this.verbose))},s.prototype.pause=function(a){(Bt(a)||a!==!0)&&(a=!1),this.getHtml5QrcodeOrFail().pause(a)},s.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},s.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},s.prototype.clear=function(){var a=this,l=function(){var h=document.getElementById(a.elementId);h&&(h.innerHTML="",a.resetBasicLayout(h))};return this.html5Qrcode?new Promise(function(h,g){if(!a.html5Qrcode){h();return}a.html5Qrcode.isScanning?a.html5Qrcode.stop().then(function(d){if(!a.html5Qrcode){h();return}a.html5Qrcode.clear(),l(),h()}).catch(function(d){a.verbose&&a.logger.logError("Unable to stop qrcode scanner",d),g(d)}):(a.html5Qrcode.clear(),l(),h())}):Promise.resolve()},s.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},s.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},s.prototype.applyVideoConstraints=function(a){return this.getHtml5QrcodeOrFail().applyVideoConstraints(a)},s.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},s.prototype.createConfig=function(a){return a?(a.fps||(a.fps=bt.SCAN_DEFAULT_FPS),a.rememberLastUsedCamera!==!bt.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(a.rememberLastUsedCamera=bt.DEFAULT_REMEMBER_LAST_CAMERA_USED),a.supportedScanTypes||(a.supportedScanTypes=bt.DEFAULT_SUPPORTED_SCAN_TYPE),a):{fps:bt.SCAN_DEFAULT_FPS,rememberLastUsedCamera:bt.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:bt.DEFAULT_SUPPORTED_SCAN_TYPE}},s.prototype.createBasicLayout=function(a){a.style.position="relative",a.style.padding="0px",a.style.border="1px solid silver",this.createHeader(a);var l=document.createElement("div"),h=this.getScanRegionId();l.id=h,l.style.width="100%",l.style.minHeight="100px",l.style.textAlign="center",a.appendChild(l),qt.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var g=document.createElement("div"),d=this.getDashboardId();g.id=d,g.style.width="100%",a.appendChild(g),this.setupInitialDashboard(g)},s.prototype.resetBasicLayout=function(a){a.style.border="none"},s.prototype.setupInitialDashboard=function(a){this.createSection(a),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},s.prototype.createHeader=function(a){var l=document.createElement("div");l.style.textAlign="left",l.style.margin="0px",a.appendChild(l);var h=new X1;h.renderInto(l);var g=document.createElement("div");g.id=this.getHeaderMessageContainerId(),g.style.display="none",g.style.textAlign="center",g.style.fontSize="14px",g.style.padding="2px 10px",g.style.margin="4px",g.style.borderTop="1px solid #f6f6f6",l.appendChild(g)},s.prototype.createSection=function(a){var l=document.createElement("div");l.id=this.getDashboardSectionId(),l.style.width="100%",l.style.padding="10px 0px 10px 0px",l.style.textAlign="left",a.appendChild(l)},s.prototype.createCameraListUi=function(a,l,h){var g=this;g.showHideScanTypeSwapLink(!1),g.setHeaderMessage(Ce.cameraPermissionRequesting());var d=function(){h||g.createPermissionButton(a,l)};Js.getCameras().then(function(A){g.persistedDataManager.setHasPermission(!0),g.showHideScanTypeSwapLink(!0),g.resetHeaderMessage(),A&&A.length>0?(a.removeChild(l),g.renderCameraSelection(A)):(g.setHeaderMessage(Ce.noCameraFound(),xt.STATUS_WARNING),d())}).catch(function(A){g.persistedDataManager.setHasPermission(!1),h?h.disabled=!1:d(),g.setHeaderMessage(A,xt.STATUS_WARNING),g.showHideScanTypeSwapLink(!0)})},s.prototype.createPermissionButton=function(a,l){var h=this,g=kt.createElement("button",this.getCameraPermissionButtonId());g.innerText=Ce.cameraPermissionTitle(),g.addEventListener("click",function(){g.disabled=!0,h.createCameraListUi(a,l,g)}),l.appendChild(g)},s.prototype.createPermissionsUi=function(a,l){var h=this;if(qt.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()){to.hasPermissions().then(function(g){g?h.createCameraListUi(a,l):(h.persistedDataManager.setHasPermission(!1),h.createPermissionButton(a,l))}).catch(function(g){h.persistedDataManager.setHasPermission(!1),h.createPermissionButton(a,l)});return}this.createPermissionButton(a,l)},s.prototype.createSectionControlPanel=function(){var a=document.getElementById(this.getDashboardSectionId()),l=document.createElement("div");a.appendChild(l);var h=document.createElement("div");h.id=this.getDashboardSectionCameraScanRegionId(),h.style.display=qt.isCameraScanType(this.currentScanType)?"block":"none",l.appendChild(h);var g=document.createElement("div");g.style.textAlign="center",h.appendChild(g),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(h,g),this.renderFileScanUi(l)},s.prototype.renderFileScanUi=function(a){var l=qt.isFileScanType(this.currentScanType),h=this,g=function(d){if(!h.html5Qrcode)throw"html5Qrcode not defined";qt.isFileScanType(h.currentScanType)&&(h.setHeaderMessage(Ce.loadingImage()),h.html5Qrcode.scanFileV2(d,!0).then(function(A){h.resetHeaderMessage(),h.qrCodeSuccessCallback(A.decodedText,A)}).catch(function(A){h.setHeaderMessage(A,xt.STATUS_WARNING),h.qrCodeErrorCallback(A,wa.createFrom(A))}))};this.fileSelectionUi=q1.create(a,l,g)},s.prototype.renderCameraSelection=function(a){var l=this,h=this,g=document.getElementById(this.getDashboardSectionCameraScanRegionId());g.style.textAlign="center";var d=$1.create(g,!1),A=function(q){var j=q.zoomFeature();if(j.isSupported()){d.setOnCameraZoomValueChangeCallback(function(Q){j.apply(Q)});var ie=1;l.config.defaultZoomValueIfSupported&&(ie=l.config.defaultZoomValueIfSupported),ie=p1(ie,j.min(),j.max()),d.setValues(j.min(),j.max(),ie,j.step()),d.show()}},m=J1.create(g,a),S=document.createElement("span"),C=kt.createElement("button",wt.CAMERA_START_BUTTON_ID);C.innerText=Ce.scanButtonStartScanningText(),S.appendChild(C);var _=kt.createElement("button",wt.CAMERA_STOP_BUTTON_ID);_.innerText=Ce.scanButtonStopScanningText(),_.style.display="none",_.disabled=!0,S.appendChild(_);var N,z=function(q){if(!q.torchFeature().isSupported()){N&&N.hide();return}N?N.updateTorchCapability(q.torchFeature()):N=K1.create(S,q.torchFeature(),{display:"none",marginLeft:"5px"},function(j){h.setHeaderMessage(j,xt.STATUS_WARNING)}),N.show()};g.appendChild(S);var Y=function(q){q||(C.style.display="none"),C.innerText=Ce.scanButtonStartScanningText(),C.style.opacity="1",C.disabled=!1,q&&(C.style.display="inline-block")};if(C.addEventListener("click",function(q){C.innerText=Ce.scanButtonScanningStarting(),m.disable(),C.disabled=!0,C.style.opacity="0.5",l.scanTypeSelector.hasMoreThanOneScanType()&&h.showHideScanTypeSwapLink(!1),h.resetHeaderMessage();var j=m.getValue();h.persistedDataManager.setLastUsedCameraId(j),h.html5Qrcode.start(j,e0(h.config),h.qrCodeSuccessCallback,h.qrCodeErrorCallback).then(function(ie){_.disabled=!1,_.style.display="inline-block",Y(!1);var Q=h.html5Qrcode.getRunningTrackCameraCapabilities();l.config.showTorchButtonIfSupported===!0&&z(Q),l.config.showZoomSliderIfSupported===!0&&A(Q)}).catch(function(ie){h.showHideScanTypeSwapLink(!0),m.enable(),Y(!0),h.setHeaderMessage(ie,xt.STATUS_WARNING)})}),m.hasSingleItem()&&C.click(),_.addEventListener("click",function(q){if(!h.html5Qrcode)throw"html5Qrcode not defined";_.disabled=!0,h.html5Qrcode.stop().then(function(j){l.scanTypeSelector.hasMoreThanOneScanType()&&h.showHideScanTypeSwapLink(!0),m.enable(),C.disabled=!1,_.style.display="none",C.style.display="inline-block",N&&(N.reset(),N.hide()),d.removeOnCameraZoomValueChangeCallback(),d.hide(),h.insertCameraScanImageToScanRegion()}).catch(function(j){_.disabled=!1,h.setHeaderMessage(j,xt.STATUS_WARNING)})}),h.persistedDataManager.getLastUsedCameraId()){var Ae=h.persistedDataManager.getLastUsedCameraId();m.hasValue(Ae)?(m.setValue(Ae),C.click()):h.persistedDataManager.resetLastUsedCameraId()}},s.prototype.createSectionSwap=function(){var a=this,l=Ce.textIfCameraScanSelected(),h=Ce.textIfFileScanSelected(),g=document.getElementById(this.getDashboardSectionId()),d=document.createElement("div");d.style.textAlign="center";var A=kt.createElement("span",this.getDashboardSectionSwapLinkId());A.style.textDecoration="underline",A.style.cursor="pointer",A.innerText=qt.isCameraScanType(this.currentScanType)?l:h,A.addEventListener("click",function(){if(!a.sectionSwapAllowed){a.verbose&&a.logger.logError("Section swap called when not allowed");return}a.resetHeaderMessage(),a.fileSelectionUi.resetValue(),a.sectionSwapAllowed=!1,qt.isCameraScanType(a.currentScanType)?(a.clearScanRegion(),a.getCameraScanRegion().style.display="none",a.fileSelectionUi.show(),A.innerText=h,a.currentScanType=en.SCAN_TYPE_FILE,a.insertFileScanImageToScanRegion()):(a.clearScanRegion(),a.getCameraScanRegion().style.display="block",a.fileSelectionUi.hide(),A.innerText=l,a.currentScanType=en.SCAN_TYPE_CAMERA,a.insertCameraScanImageToScanRegion(),a.startCameraScanIfPermissionExistsOnSwap()),a.sectionSwapAllowed=!0}),d.appendChild(A),g.appendChild(d)},s.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var a=this,l=this;if(this.persistedDataManager.hasCameraPermissions()){to.hasPermissions().then(function(h){if(h){var g=document.getElementById(l.getCameraPermissionButtonId());if(!g)throw a.logger.logError("Permission button not found, fail;"),"Permission button not found";g.click()}else l.persistedDataManager.setHasPermission(!1)}).catch(function(h){l.persistedDataManager.setHasPermission(!1)});return}},s.prototype.resetHeaderMessage=function(){var a=document.getElementById(this.getHeaderMessageContainerId());a.style.display="none"},s.prototype.setHeaderMessage=function(a,l){l||(l=xt.STATUS_DEFAULT);var h=this.getHeaderMessageDiv();switch(h.innerText=a,h.style.display="block",l){case xt.STATUS_SUCCESS:h.style.background="rgba(106, 175, 80, 0.26)",h.style.color="#477735";break;case xt.STATUS_WARNING:h.style.background="rgba(203, 36, 49, 0.14)",h.style.color="#cb2431";break;case xt.STATUS_DEFAULT:default:h.style.background="rgba(0, 0, 0, 0)",h.style.color="rgb(17, 17, 17)";break}},s.prototype.showHideScanTypeSwapLink=function(a){this.scanTypeSelector.hasMoreThanOneScanType()&&(a!==!0&&(a=!1),this.sectionSwapAllowed=a,this.getDashboardSectionSwapLink().style.display=a?"inline-block":"none")},s.prototype.insertCameraScanImageToScanRegion=function(){var a=this,l=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){l.innerHTML="<br>",l.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(h){l.innerHTML="<br>",l.appendChild(a.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=z1,this.cameraScanImage.alt=Ce.cameraScanAltText()},s.prototype.insertFileScanImageToScanRegion=function(){var a=this,l=document.getElementById(this.getScanRegionId());if(this.fileScanImage){l.innerHTML="<br>",l.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(h){l.innerHTML="<br>",l.appendChild(a.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=j1,this.fileScanImage.alt=Ce.fileScanAltText()},s.prototype.clearScanRegion=function(){var a=document.getElementById(this.getScanRegionId());a.innerHTML=""},s.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},s.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},s.prototype.getDashboardSectionSwapLinkId=function(){return wt.SCAN_TYPE_CHANGE_ANCHOR_ID},s.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},s.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},s.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},s.prototype.getCameraPermissionButtonId=function(){return wt.CAMERA_PERMISSION_BUTTON_ID},s.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},s.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},s.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},s}();Ji.plugin(d1);Ji.plugin(x1);document.addEventListener("DOMContentLoaded",function(){Livewire.on("bookmarkUpdated",()=>{alert("Bookmark was updated")}),Livewire.on("show-login-modal",()=>{alert("Please login to save resources")})});function ts(){const s=document.getElementById("connection-status");navigator.onLine?s&&(s.innerHTML='<i class="fas fa-wifi text-green-500"></i> Online',s.className="text-green-500"):(s&&(s.innerHTML='<i class="fas fa-wifi-slash text-red-500"></i> Offline',s.className="text-red-500"),Livewire.dispatch("offline-mode-activated"))}window.addEventListener("online",ts);window.addEventListener("offline",ts);ts();document.addEventListener("alpine:init",()=>{Ji.data("editorJs",function(s,a,l){return{editor:null,init(){this.editor=new $a({holder:s,data:JSON.parse(a),tools:{header:ec,list:tc},onChange:async h=>{const g=await h.saver.save();l(JSON.stringify(g))}})}}})});document.addEventListener("DOMContentLoaded",function(){Livewire.on("download-certificate",s=>{window.location.href=`/certificates/download/${s.certificateId}`})});window.Html5QrcodeScanner=n0;
